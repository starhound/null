<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://null-terminal.com/FEATURE_SPECS/ rel=canonical><link href=../DEVELOPMENT/ rel=prev><link href=../TEST_COVERAGE_AUDIT/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Feature Specs - Null Terminal</title><link rel=stylesheet href=../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#feature-specifications class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Null Terminal" class="md-header__button md-logo" aria-label="Null Terminal" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Null Terminal </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Feature Specs </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/starhound/null-terminal title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> starhound/null-terminal </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../roadmap/ class=md-tabs__link> Roadmap </a> </li> <li class=md-tabs__item> <a href=../user/ class=md-tabs__link> User Guide </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ARCHITECTURE/ class=md-tabs__link> Developer Guide </a> </li> <li class=md-tabs__item> <a href=../contributing/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Null Terminal" class="md-nav__button md-logo" aria-label="Null Terminal" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Null Terminal </label> <div class=md-nav__source> <a href=https://github.com/starhound/null-terminal title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> starhound/null-terminal </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../user/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../user/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../user/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../user/commands/ class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=../user/providers/ class=md-nav__link> <span class=md-ellipsis> AI Providers </span> </a> </li> <li class=md-nav__item> <a href=../user/mcp/ class=md-nav__link> <span class=md-ellipsis> MCP </span> </a> </li> <li class=md-nav__item> <a href=../user/tools/ class=md-nav__link> <span class=md-ellipsis> Tools & Agents </span> </a> </li> <li class=md-nav__item> <a href=../user/ssh/ class=md-nav__link> <span class=md-ellipsis> SSH </span> </a> </li> <li class=md-nav__item> <a href=../user/themes/ class=md-nav__link> <span class=md-ellipsis> Themes </span> </a> </li> <li class=md-nav__item> <a href=../user/sessions/ class=md-nav__link> <span class=md-ellipsis> Sessions </span> </a> </li> <li class=md-nav__item> <a href=../user/shortcuts/ class=md-nav__link> <span class=md-ellipsis> Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=../user/training/ class=md-nav__link> <span class=md-ellipsis> Training </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Developer Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Developer Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ARCHITECTURE/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../DEVELOPMENT/ class=md-nav__link> <span class=md-ellipsis> Development </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Feature Specs </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Feature Specs </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-smart-command-suggestions class=md-nav__link> <span class=md-ellipsis> 1. Smart Command Suggestions </span> </a> <nav class=md-nav aria-label="1. Smart Command Suggestions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=#ui-integration class=md-nav__link> <span class=md-ellipsis> UI Integration </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-conversation-branching-ui class=md-nav__link> <span class=md-ellipsis> 2. Conversation Branching UI </span> </a> <nav class=md-nav aria-label="2. Conversation Branching UI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_1 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_1 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_1 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_1 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-model class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_1 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_1 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-workflow-templates-recipes class=md-nav__link> <span class=md-ellipsis> 3. Workflow Templates / Recipes </span> </a> <nav class=md-nav aria-label="3. Workflow Templates / Recipes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_2 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_2 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_2 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_2 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-model_1 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#file-format-nullworkflows class=md-nav__link> <span class=md-ellipsis> File Format (~/.null/workflows/) </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_1 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_2 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_2 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-enhanced-rag-with-semantic-caching class=md-nav__link> <span class=md-ellipsis> 4. Enhanced RAG with Semantic Caching </span> </a> <nav class=md-nav aria-label="4. Enhanced RAG with Semantic Caching"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_3 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_3 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_3 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_3 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_1 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#sqlite-schema class=md-nav__link> <span class=md-ellipsis> SQLite Schema </span> </a> </li> <li class=md-nav__item> <a href=#semantic-cache class=md-nav__link> <span class=md-ellipsis> Semantic Cache </span> </a> </li> <li class=md-nav__item> <a href=#incremental-indexing class=md-nav__link> <span class=md-ellipsis> Incremental Indexing </span> </a> </li> <li class=md-nav__item> <a href=#hybrid-search class=md-nav__link> <span class=md-ellipsis> Hybrid Search </span> </a> </li> <li class=md-nav__item> <a href=#configuration_1 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_3 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_3 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-session-sharing-collaboration class=md-nav__link> <span class=md-ellipsis> 5. Session Sharing &amp; Collaboration </span> </a> <nav class=md-nav aria-label="5. Session Sharing & Collaboration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_4 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_4 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_4 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_4 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sharing-flow class=md-nav__link> <span class=md-ellipsis> Sharing Flow </span> </a> </li> <li class=md-nav__item> <a href=#share-types class=md-nav__link> <span class=md-ellipsis> Share Types </span> </a> </li> <li class=md-nav__item> <a href=#data-format class=md-nav__link> <span class=md-ellipsis> Data Format </span> </a> </li> <li class=md-nav__item> <a href=#commands_1 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_2 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#backend-requirements class=md-nav__link> <span class=md-ellipsis> Backend Requirements </span> </a> </li> <li class=md-nav__item> <a href=#configuration_2 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_4 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_4 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-streaming-tool-results class=md-nav__link> <span class=md-ellipsis> 6. Streaming Tool Results </span> </a> <nav class=md-nav aria-label="6. Streaming Tool Results"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_5 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_5 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_5 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_5 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#streaming-architecture class=md-nav__link> <span class=md-ellipsis> Streaming Architecture </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-tool-accordion class=md-nav__link> <span class=md-ellipsis> Enhanced Tool Accordion </span> </a> </li> <li class=md-nav__item> <a href=#streaming-tool-protocol class=md-nav__link> <span class=md-ellipsis> Streaming Tool Protocol </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-run_command class=md-nav__link> <span class=md-ellipsis> Enhanced run_command </span> </a> </li> <li class=md-nav__item> <a href=#ui-widget-updates class=md-nav__link> <span class=md-ellipsis> UI Widget Updates </span> </a> </li> <li class=md-nav__item> <a href=#cancel-support class=md-nav__link> <span class=md-ellipsis> Cancel Support </span> </a> </li> <li class=md-nav__item> <a href=#configuration_3 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_5 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_5 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation-priority class=md-nav__link> <span class=md-ellipsis> Implementation Priority </span> </a> </li> <li class=md-nav__item> <a href=#7-planning-mode-plan class=md-nav__link> <span class=md-ellipsis> 7. Planning Mode (/plan) </span> </a> <nav class=md-nav aria-label="7. Planning Mode (/plan)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_6 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_6 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_6 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_6 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_2 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_2 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_3 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_2 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts_1 class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#configuration_4 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_6 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_6 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-git-native-operations class=md-nav__link> <span class=md-ellipsis> 8. Git-Native Operations </span> </a> <nav class=md-nav aria-label="8. Git-Native Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_7 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_7 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_7 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_7 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_3 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_3 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_4 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_3 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#auto-commit-behavior class=md-nav__link> <span class=md-ellipsis> Auto-Commit Behavior </span> </a> </li> <li class=md-nav__item> <a href=#commit-message-generation class=md-nav__link> <span class=md-ellipsis> Commit Message Generation </span> </a> </li> <li class=md-nav__item> <a href=#configuration_5 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_7 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_7 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#9-human-in-the-loop-code-review class=md-nav__link> <span class=md-ellipsis> 9. Human-in-the-Loop Code Review </span> </a> <nav class=md-nav aria-label="9. Human-in-the-Loop Code Review"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_8 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_8 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_8 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_8 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_4 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_4 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_5 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts_2 class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#configuration_6 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_8 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_8 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#10-error-auto-correction-loop class=md-nav__link> <span class=md-ellipsis> 10. Error Auto-Correction Loop </span> </a> <nav class=md-nav aria-label="10. Error Auto-Correction Loop"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_9 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_9 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_9 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_9 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_5 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_5 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#error-detection-patterns class=md-nav__link> <span class=md-ellipsis> Error Detection Patterns </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_6 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_4 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_7 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_9 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_9 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-background-agents class=md-nav__link> <span class=md-ellipsis> 11. Background Agents </span> </a> <nav class=md-nav aria-label="11. Background Agents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_10 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_10 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_10 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_10 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_6 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_6 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_7 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_5 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts_3 class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#configuration_8 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_10 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_10 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-multi-agent-orchestration class=md-nav__link> <span class=md-ellipsis> 12. Multi-Agent Orchestration </span> </a> <nav class=md-nav aria-label="12. Multi-Agent Orchestration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_11 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_11 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_11 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_11 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_7 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#agent-profiles class=md-nav__link> <span class=md-ellipsis> Agent Profiles </span> </a> </li> <li class=md-nav__item> <a href=#orchestration-flow class=md-nav__link> <span class=md-ellipsis> Orchestration Flow </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_8 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_6 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_9 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_11 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_11 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#13-natural-language-to-shell class=md-nav__link> <span class=md-ellipsis> 13. Natural Language to Shell </span> </a> <nav class=md-nav aria-label="13. Natural Language to Shell"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_12 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_12 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_12 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_12 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_8 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_7 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#context-enrichment class=md-nav__link> <span class=md-ellipsis> Context Enrichment </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_9 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_7 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#nl-patterns class=md-nav__link> <span class=md-ellipsis> NL Patterns </span> </a> </li> <li class=md-nav__item> <a href=#configuration_10 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_12 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_12 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#14-architecture-mapping-map class=md-nav__link> <span class=md-ellipsis> 14. Architecture Mapping (/map) </span> </a> <nav class=md-nav aria-label="14. Architecture Mapping (/map)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_13 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_13 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_13 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_13 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_9 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_8 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#output-formats class=md-nav__link> <span class=md-ellipsis> Output Formats </span> </a> </li> <li class=md-nav__item> <a href=#commands_8 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_11 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_13 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_13 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#15-custom-agent-profiles class=md-nav__link> <span class=md-ellipsis> 15. Custom Agent Profiles </span> </a> <nav class=md-nav aria-label="15. Custom Agent Profiles"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_14 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_14 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_14 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_14 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-model_9 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#built-in-profiles class=md-nav__link> <span class=md-ellipsis> Built-in Profiles </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_10 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_9 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_12 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_14 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_14 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#16-collaborative-git-context class=md-nav__link> <span class=md-ellipsis> 16. Collaborative Git Context </span> </a> <nav class=md-nav aria-label="16. Collaborative Git Context"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_15 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_15 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_15 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_15 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_10 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_10 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_11 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_10 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#mcp-integration class=md-nav__link> <span class=md-ellipsis> MCP Integration </span> </a> </li> <li class=md-nav__item> <a href=#configuration_13 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_15 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_15 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#updated-implementation-priority class=md-nav__link> <span class=md-ellipsis> Updated Implementation Priority </span> </a> <nav class=md-nav aria-label="Updated Implementation Priority"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#recommended-implementation-order class=md-nav__link> <span class=md-ellipsis> Recommended Implementation Order </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../TEST_COVERAGE_AUDIT/ class=md-nav__link> <span class=md-ellipsis> Test Coverage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-smart-command-suggestions class=md-nav__link> <span class=md-ellipsis> 1. Smart Command Suggestions </span> </a> <nav class=md-nav aria-label="1. Smart Command Suggestions"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=#ui-integration class=md-nav__link> <span class=md-ellipsis> UI Integration </span> </a> </li> <li class=md-nav__item> <a href=#configuration class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-conversation-branching-ui class=md-nav__link> <span class=md-ellipsis> 2. Conversation Branching UI </span> </a> <nav class=md-nav aria-label="2. Conversation Branching UI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_1 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_1 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_1 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_1 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-model class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_1 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_1 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-workflow-templates-recipes class=md-nav__link> <span class=md-ellipsis> 3. Workflow Templates / Recipes </span> </a> <nav class=md-nav aria-label="3. Workflow Templates / Recipes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_2 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_2 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_2 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_2 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-model_1 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#file-format-nullworkflows class=md-nav__link> <span class=md-ellipsis> File Format (~/.null/workflows/) </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_1 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_2 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_2 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-enhanced-rag-with-semantic-caching class=md-nav__link> <span class=md-ellipsis> 4. Enhanced RAG with Semantic Caching </span> </a> <nav class=md-nav aria-label="4. Enhanced RAG with Semantic Caching"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_3 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_3 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_3 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_3 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_1 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#sqlite-schema class=md-nav__link> <span class=md-ellipsis> SQLite Schema </span> </a> </li> <li class=md-nav__item> <a href=#semantic-cache class=md-nav__link> <span class=md-ellipsis> Semantic Cache </span> </a> </li> <li class=md-nav__item> <a href=#incremental-indexing class=md-nav__link> <span class=md-ellipsis> Incremental Indexing </span> </a> </li> <li class=md-nav__item> <a href=#hybrid-search class=md-nav__link> <span class=md-ellipsis> Hybrid Search </span> </a> </li> <li class=md-nav__item> <a href=#configuration_1 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_3 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_3 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#5-session-sharing-collaboration class=md-nav__link> <span class=md-ellipsis> 5. Session Sharing &amp; Collaboration </span> </a> <nav class=md-nav aria-label="5. Session Sharing & Collaboration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_4 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_4 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_4 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_4 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sharing-flow class=md-nav__link> <span class=md-ellipsis> Sharing Flow </span> </a> </li> <li class=md-nav__item> <a href=#share-types class=md-nav__link> <span class=md-ellipsis> Share Types </span> </a> </li> <li class=md-nav__item> <a href=#data-format class=md-nav__link> <span class=md-ellipsis> Data Format </span> </a> </li> <li class=md-nav__item> <a href=#commands_1 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_2 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#backend-requirements class=md-nav__link> <span class=md-ellipsis> Backend Requirements </span> </a> </li> <li class=md-nav__item> <a href=#configuration_2 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_4 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_4 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#6-streaming-tool-results class=md-nav__link> <span class=md-ellipsis> 6. Streaming Tool Results </span> </a> <nav class=md-nav aria-label="6. Streaming Tool Results"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_5 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_5 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_5 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_5 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#streaming-architecture class=md-nav__link> <span class=md-ellipsis> Streaming Architecture </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-tool-accordion class=md-nav__link> <span class=md-ellipsis> Enhanced Tool Accordion </span> </a> </li> <li class=md-nav__item> <a href=#streaming-tool-protocol class=md-nav__link> <span class=md-ellipsis> Streaming Tool Protocol </span> </a> </li> <li class=md-nav__item> <a href=#enhanced-run_command class=md-nav__link> <span class=md-ellipsis> Enhanced run_command </span> </a> </li> <li class=md-nav__item> <a href=#ui-widget-updates class=md-nav__link> <span class=md-ellipsis> UI Widget Updates </span> </a> </li> <li class=md-nav__item> <a href=#cancel-support class=md-nav__link> <span class=md-ellipsis> Cancel Support </span> </a> </li> <li class=md-nav__item> <a href=#configuration_3 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_5 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_5 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#implementation-priority class=md-nav__link> <span class=md-ellipsis> Implementation Priority </span> </a> </li> <li class=md-nav__item> <a href=#7-planning-mode-plan class=md-nav__link> <span class=md-ellipsis> 7. Planning Mode (/plan) </span> </a> <nav class=md-nav aria-label="7. Planning Mode (/plan)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_6 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_6 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_6 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_6 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_2 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_2 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_3 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_2 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts_1 class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#configuration_4 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_6 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_6 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#8-git-native-operations class=md-nav__link> <span class=md-ellipsis> 8. Git-Native Operations </span> </a> <nav class=md-nav aria-label="8. Git-Native Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_7 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_7 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_7 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_7 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_3 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_3 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_4 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_3 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#auto-commit-behavior class=md-nav__link> <span class=md-ellipsis> Auto-Commit Behavior </span> </a> </li> <li class=md-nav__item> <a href=#commit-message-generation class=md-nav__link> <span class=md-ellipsis> Commit Message Generation </span> </a> </li> <li class=md-nav__item> <a href=#configuration_5 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_7 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_7 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#9-human-in-the-loop-code-review class=md-nav__link> <span class=md-ellipsis> 9. Human-in-the-Loop Code Review </span> </a> <nav class=md-nav aria-label="9. Human-in-the-Loop Code Review"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_8 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_8 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_8 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_8 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_4 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_4 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_5 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts_2 class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#configuration_6 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_8 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_8 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#10-error-auto-correction-loop class=md-nav__link> <span class=md-ellipsis> 10. Error Auto-Correction Loop </span> </a> <nav class=md-nav aria-label="10. Error Auto-Correction Loop"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_9 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_9 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_9 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_9 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_5 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_5 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#error-detection-patterns class=md-nav__link> <span class=md-ellipsis> Error Detection Patterns </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_6 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_4 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_7 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_9 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_9 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-background-agents class=md-nav__link> <span class=md-ellipsis> 11. Background Agents </span> </a> <nav class=md-nav aria-label="11. Background Agents"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_10 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_10 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_10 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_10 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_6 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_6 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_7 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_5 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#keyboard-shortcuts_3 class=md-nav__link> <span class=md-ellipsis> Keyboard Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=#configuration_8 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_10 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_10 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-multi-agent-orchestration class=md-nav__link> <span class=md-ellipsis> 12. Multi-Agent Orchestration </span> </a> <nav class=md-nav aria-label="12. Multi-Agent Orchestration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_11 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_11 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_11 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_11 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_7 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#agent-profiles class=md-nav__link> <span class=md-ellipsis> Agent Profiles </span> </a> </li> <li class=md-nav__item> <a href=#orchestration-flow class=md-nav__link> <span class=md-ellipsis> Orchestration Flow </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_8 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_6 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_9 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_11 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_11 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#13-natural-language-to-shell class=md-nav__link> <span class=md-ellipsis> 13. Natural Language to Shell </span> </a> <nav class=md-nav aria-label="13. Natural Language to Shell"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_12 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_12 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_12 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_12 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_8 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_7 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#context-enrichment class=md-nav__link> <span class=md-ellipsis> Context Enrichment </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_9 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_7 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#nl-patterns class=md-nav__link> <span class=md-ellipsis> NL Patterns </span> </a> </li> <li class=md-nav__item> <a href=#configuration_10 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_12 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_12 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#14-architecture-mapping-map class=md-nav__link> <span class=md-ellipsis> 14. Architecture Mapping (/map) </span> </a> <nav class=md-nav aria-label="14. Architecture Mapping (/map)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_13 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_13 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_13 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_13 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_9 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_8 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#output-formats class=md-nav__link> <span class=md-ellipsis> Output Formats </span> </a> </li> <li class=md-nav__item> <a href=#commands_8 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_11 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_13 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_13 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#15-custom-agent-profiles class=md-nav__link> <span class=md-ellipsis> 15. Custom Agent Profiles </span> </a> <nav class=md-nav aria-label="15. Custom Agent Profiles"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_14 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_14 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_14 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_14 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-model_9 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#built-in-profiles class=md-nav__link> <span class=md-ellipsis> Built-in Profiles </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_10 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_9 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#configuration_12 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_14 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_14 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#16-collaborative-git-context class=md-nav__link> <span class=md-ellipsis> 16. Collaborative Git Context </span> </a> <nav class=md-nav aria-label="16. Collaborative Git Context"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#overview_15 class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#user-story_15 class=md-nav__link> <span class=md-ellipsis> User Story </span> </a> </li> <li class=md-nav__item> <a href=#current-state_15 class=md-nav__link> <span class=md-ellipsis> Current State </span> </a> </li> <li class=md-nav__item> <a href=#proposed-design_15 class=md-nav__link> <span class=md-ellipsis> Proposed Design </span> </a> <nav class=md-nav aria-label="Proposed Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#architecture_10 class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#data-model_10 class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=#ui-components_11 class=md-nav__link> <span class=md-ellipsis> UI Components </span> </a> </li> <li class=md-nav__item> <a href=#commands_10 class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=#mcp-integration class=md-nav__link> <span class=md-ellipsis> MCP Integration </span> </a> </li> <li class=md-nav__item> <a href=#configuration_13 class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=#implementation-steps_15 class=md-nav__link> <span class=md-ellipsis> Implementation Steps </span> </a> </li> <li class=md-nav__item> <a href=#effort-estimate_15 class=md-nav__link> <span class=md-ellipsis> Effort Estimate </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#updated-implementation-priority class=md-nav__link> <span class=md-ellipsis> Updated Implementation Priority </span> </a> <nav class=md-nav aria-label="Updated Implementation Priority"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#recommended-implementation-order class=md-nav__link> <span class=md-ellipsis> Recommended Implementation Order </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/starhound/null-terminal/edit/main/docs/FEATURE_SPECS.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=feature-specifications>Feature Specifications<a class=headerlink href=#feature-specifications title="Permanent link">&para;</a></h1> <p>This document contains detailed design specifications for proposed Null Terminal features.</p> <hr> <h2 id=1-smart-command-suggestions>1. Smart Command Suggestions<a class=headerlink href=#1-smart-command-suggestions title="Permanent link">&para;</a></h2> <h3 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h3> <p>AI-powered command suggestions based on context, history, and current state.</p> <h3 id=user-story>User Story<a class=headerlink href=#user-story title="Permanent link">&para;</a></h3> <blockquote> <p>As a user, I want intelligent command suggestions that understand my current context (directory, git status, recent commands) so I can work faster.</p> </blockquote> <h3 id=current-state>Current State<a class=headerlink href=#current-state title="Permanent link">&para;</a></h3> <ul> <li><code>CommandSuggester</code> provides static slash command suggestions</li> <li>History-based completion via arrow keys</li> <li>No contextual awareness</li> </ul> <h3 id=proposed-design>Proposed Design<a class=headerlink href=#proposed-design title="Permanent link">&para;</a></h3> <h4 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>                  SuggestionEngine                       
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>        
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    History        Context        AI-Powered       
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    Provider       Provider       Provider         
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>        
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>                                                      
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>                    
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>                                                        
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>                                            
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>                      Ranker                           
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>                                            
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>                                                        
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>                                            
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>                     Top N                             
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>                     Suggestions                        
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>                                            
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>
</span></code></pre></div> <h4 id=components>Components<a class=headerlink href=#components title="Permanent link">&para;</a></h4> <p><strong>1. HistoryProvider</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=k>class</span><span class=w> </span><span class=nc>HistoryProvider</span><span class=p>:</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=k>def</span><span class=w> </span><span class=nf>suggest</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>limit</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Suggestion</span><span class=p>]:</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Return commands from history matching prefix.&quot;&quot;&quot;</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>        <span class=c1># Weighted by recency and frequency</span>
</span></code></pre></div></p> <p><strong>2. ContextProvider</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>class</span><span class=w> </span><span class=nc>ContextProvider</span><span class=p>:</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>    <span class=k>def</span><span class=w> </span><span class=nf>suggest</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>ContextState</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Suggestion</span><span class=p>]:</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Suggest based on current state.&quot;&quot;&quot;</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>        <span class=c1># - Directory contents (files suggest relevant commands)</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>        <span class=c1># - Git status (dirty repo suggests git commands)</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>        <span class=c1># - Recent errors (suggest fixes)</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>        <span class=c1># - Time of day (morning: git pull)</span>
</span></code></pre></div></p> <p><strong>3. AIProvider</strong> (optional, requires AI mode) <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=k>class</span><span class=w> </span><span class=nc>AISuggestionProvider</span><span class=p>:</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>suggest</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>input</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=n>ContextState</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Suggestion</span><span class=p>]:</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Use LLM to suggest contextual commands.&quot;&quot;&quot;</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>        <span class=c1># Lightweight prompt, cached responses</span>
</span></code></pre></div></p> <p><strong>4. Suggestion Model</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nd>@dataclass</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=k>class</span><span class=w> </span><span class=nc>Suggestion</span><span class=p>:</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=n>command</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>source</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;history&quot;</span><span class=p>,</span> <span class=s2>&quot;context&quot;</span><span class=p>,</span> <span class=s2>&quot;ai&quot;</span><span class=p>]</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=n>score</span><span class=p>:</span> <span class=nb>float</span>  <span class=c1># 0.0 - 1.0</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>    <span class=n>icon</span><span class=p>:</span> <span class=nb>str</span>  <span class=c1># For display</span>
</span></code></pre></div></p> <h4 id=ui-integration>UI Integration<a class=headerlink href=#ui-integration title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a> $ git sta                                  
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>  git status         Show working tree     
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>   git stash          Stash changes         
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>   git stash pop      Apply stashed changes 
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
</span></code></pre></div> <ul> <li>Tab to accept top suggestion</li> <li>Arrow keys to navigate</li> <li>Escape to dismiss</li> <li>Inline ghost text for top suggestion</li> </ul> <h4 id=configuration>Configuration<a class=headerlink href=#configuration title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>&quot;suggestions&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=nt>&quot;ai_enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=nt>&quot;max_suggestions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=nt>&quot;min_chars&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=nt>&quot;sources&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;history&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;context&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;ai&quot;</span><span class=p>]</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps>Implementation Steps<a class=headerlink href=#implementation-steps title="Permanent link">&para;</a></h4> <ol> <li>Create <code>SuggestionEngine</code> base class</li> <li>Implement <code>HistoryProvider</code> (parse command history)</li> <li>Implement <code>ContextProvider</code> (git, files, errors)</li> <li>Create suggestion dropdown widget</li> <li>Add ghost text overlay to input</li> <li>(Optional) Implement <code>AIProvider</code></li> </ol> <h4 id=effort-estimate>Effort Estimate<a class=headerlink href=#effort-estimate title="Permanent link">&para;</a></h4> <ul> <li>Core engine: 2 days</li> <li>UI integration: 1 day</li> <li>AI provider: 1 day</li> <li>Testing: 1 day</li> <li><strong>Total: 5 days</strong></li> </ul> <hr> <h2 id=2-conversation-branching-ui>2. Conversation Branching UI<a class=headerlink href=#2-conversation-branching-ui title="Permanent link">&para;</a></h2> <h3 id=overview_1>Overview<a class=headerlink href=#overview_1 title="Permanent link">&para;</a></h3> <p>Visual interface for exploring conversation branches and comparing AI responses.</p> <h3 id=user-story_1>User Story<a class=headerlink href=#user-story_1 title="Permanent link">&para;</a></h3> <blockquote> <p>As a user, I want to explore alternative AI responses by branching conversations, so I can compare different approaches without losing context.</p> </blockquote> <h3 id=current-state_1>Current State<a class=headerlink href=#current-state_1 title="Permanent link">&para;</a></h3> <ul> <li><code>ForkRequested</code> message exists in <code>BaseBlockWidget</code></li> <li><code>BranchManager</code> tracks branches</li> <li>No visual UI for branch navigation</li> </ul> <h3 id=proposed-design_1>Proposed Design<a class=headerlink href=#proposed-design_1 title="Permanent link">&para;</a></h3> <h4 id=data-model>Data Model<a class=headerlink href=#data-model title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nd>@dataclass</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=k>class</span><span class=w> </span><span class=nc>ConversationBranch</span><span class=p>:</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>    <span class=n>parent_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>    <span class=n>parent_block_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>  <span class=c1># Block where branch diverged</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>    <span class=n>created_at</span><span class=p>:</span> <span class=n>datetime</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>  <span class=c1># Auto-generated or user-defined</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>    <span class=n>blocks</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>BlockState</span><span class=p>]</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=k>class</span><span class=w> </span><span class=nc>BranchManager</span><span class=p>:</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a>    <span class=n>branches</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ConversationBranch</span><span class=p>]</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>    <span class=n>current_branch_id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>    <span class=k>def</span><span class=w> </span><span class=nf>fork</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>at_block_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ConversationBranch</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a>    <span class=k>def</span><span class=w> </span><span class=nf>switch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a>    <span class=k>def</span><span class=w> </span><span class=nf>merge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>target_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a>    <span class=k>def</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span>
</span></code></pre></div> <h4 id=ui-components>UI Components<a class=headerlink href=#ui-components title="Permanent link">&para;</a></h4> <p><strong>1. Branch Indicator (Status Bar)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a> CLI  main (3 branches)  gpt-4o  1.2K tokens  $0.02 
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>         
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    Click to open Branch Navigator
</span></code></pre></div></p> <p><strong>2. Branch Navigator (Sidebar Panel)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a> Branches            
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>  main              
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>    fix-attempt-1  
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>    refactor-v2    
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>  experiment        
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a> [+ New Branch]      
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>
</span></code></pre></div></p> <p><strong>3. Branch Diff View (Modal)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a> Compare: main  fix-attempt-1                      []  
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a> main                     fix-attempt-1                 
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>    
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a> def process():           def process():                
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>   for item in items:       items = [x for x in        
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>     handle(item)                    items if valid(x)]
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>                            for item in items:          
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>                              handle(item)              
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>
</span></code></pre></div></p> <p><strong>4. Block Fork Button</strong> Each AI response block gets a fork icon: <div class="language-text highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a> AI Response                              [] [] []  
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>                                                        
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a> Here&#39;s how to refactor...                     Fork button
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>
</span></code></pre></div></p> <h4 id=keyboard-shortcuts>Keyboard Shortcuts<a class=headerlink href=#keyboard-shortcuts title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Shortcut</th> <th>Action</th> </tr> </thead> <tbody> <tr> <td><code>Ctrl+B</code></td> <td>Open branch navigator</td> </tr> <tr> <td><code>Ctrl+Shift+B</code></td> <td>Create branch at current position</td> </tr> <tr> <td><code>Alt+Left/Right</code></td> <td>Switch between sibling branches</td> </tr> </tbody> </table> <h4 id=implementation-steps_1>Implementation Steps<a class=headerlink href=#implementation-steps_1 title="Permanent link">&para;</a></h4> <ol> <li>Extend <code>BranchManager</code> with full CRUD</li> <li>Create <code>BranchNavigator</code> sidebar widget</li> <li>Add branch indicator to <code>StatusBar</code></li> <li>Implement fork action in <code>BaseBlockWidget</code></li> <li>Create <code>BranchDiffScreen</code> modal</li> <li>Add persistence (SQLite)</li> <li>Testing</li> </ol> <h4 id=effort-estimate_1>Effort Estimate<a class=headerlink href=#effort-estimate_1 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 1 day</li> <li>BranchNavigator widget: 2 days</li> <li>Diff view: 1 day</li> <li>Integration: 1 day</li> <li>Persistence: 1 day</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=3-workflow-templates-recipes>3. Workflow Templates / Recipes<a class=headerlink href=#3-workflow-templates-recipes title="Permanent link">&para;</a></h2> <h3 id=overview_2>Overview<a class=headerlink href=#overview_2 title="Permanent link">&para;</a></h3> <p>Save and replay multi-step AI agent sessions as reusable templates.</p> <h3 id=user-story_2>User Story<a class=headerlink href=#user-story_2 title="Permanent link">&para;</a></h3> <blockquote> <p>As a power user, I want to save successful agent workflows as templates, so I can reuse them with different inputs.</p> </blockquote> <h3 id=current-state_2>Current State<a class=headerlink href=#current-state_2 title="Permanent link">&para;</a></h3> <ul> <li>Agent mode executes multi-step tasks</li> <li>Sessions can be exported to markdown</li> <li>No template/replay functionality</li> </ul> <h3 id=proposed-design_2>Proposed Design<a class=headerlink href=#proposed-design_2 title="Permanent link">&para;</a></h3> <h4 id=data-model_1>Data Model<a class=headerlink href=#data-model_1 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=nd>@dataclass</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=k>class</span><span class=w> </span><span class=nc>WorkflowStep</span><span class=p>:</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>    <span class=nb>type</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;prompt&quot;</span><span class=p>,</span> <span class=s2>&quot;tool&quot;</span><span class=p>,</span> <span class=s2>&quot;checkpoint&quot;</span><span class=p>]</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>    <span class=n>content</span><span class=p>:</span> <span class=nb>str</span>  <span class=c1># Prompt text or tool name</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>    <span class=n>arguments</span><span class=p>:</span> <span class=nb>dict</span>  <span class=c1># Tool arguments or prompt variables</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>    <span class=n>expected_output</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>  <span class=c1># For validation</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=nd>@dataclass</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=k>class</span><span class=w> </span><span class=nc>Workflow</span><span class=p>:</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>    <span class=n>tags</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>    <span class=n>variables</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>  <span class=c1># Placeholders like {{filename}}</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>    <span class=n>steps</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>WorkflowStep</span><span class=p>]</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>    <span class=n>created_at</span><span class=p>:</span> <span class=n>datetime</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>    <span class=n>source</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;local&quot;</span><span class=p>,</span> <span class=s2>&quot;community&quot;</span><span class=p>]</span>
</span></code></pre></div> <h4 id=file-format-nullworkflows>File Format (<code>~/.null/workflows/</code>)<a class=headerlink href=#file-format-nullworkflows title="Permanent link">&para;</a></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># debug-python.yaml</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Debug Python Error</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Analyze and fix Python errors with step-by-step debugging</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>python</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>debugging</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>fix</span><span class="p p-Indicator">]</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=nt>variables</span><span class=p>:</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>  </span><span class=nt>error_message</span><span class=p>:</span><span class=w> </span><span class=s>&quot;The</span><span class=nv> </span><span class=s>error</span><span class=nv> </span><span class=s>you</span><span class=nv> </span><span class=s>encountered&quot;</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>  </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Path</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>file</span><span class=nv> </span><span class=s>with</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>error&quot;</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=nt>steps</span><span class=p>:</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">prompt</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=w>    </span><span class=nt>content</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=w>      </span><span class=no>Analyze this Python error:</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=w>      </span><span class=no>```</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=w>      </span><span class=no>{{error_message}}</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=w>      </span><span class=no>```</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=w>      </span><span class=no>In file: {{file_path}}</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=w>      </span><span class=no>First, read the file to understand context.</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tool</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">read_file</span>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=w>    </span><span class=nt>arguments</span><span class=p>:</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;{{file_path}}&quot;</span>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">prompt</span>
</span><span id=__span-13-26><a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a><span class=w>    </span><span class=nt>content</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-13-27><a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a><span class=w>      </span><span class=no>Based on the file content, identify the bug and suggest a fix.</span>
</span><span id=__span-13-28><a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a><span class=w>      </span><span class=no>Use write_file to apply the fix.</span>
</span><span id=__span-13-29><a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a>
</span><span id=__span-13-30><a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">checkpoint</span>
</span><span id=__span-13-31><a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a><span class=w>    </span><span class=nt>content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Confirm</span><span class=nv> </span><span class=s>fix</span><span class=nv> </span><span class=s>before</span><span class=nv> </span><span class=s>continuing&quot;</span>
</span></code></pre></div> <h4 id=ui-components_1>UI Components<a class=headerlink href=#ui-components_1 title="Permanent link">&para;</a></h4> <p><strong>1. Workflow Browser (<code>/workflow</code> command)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a> Workflows                                          []  
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>  Debug Python Error                                   
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>    Analyze and fix Python errors                        
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>    Tags: python, debugging                              
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>                                                         
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>  Code Review                                          
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>    Review code changes and suggest improvements         
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>    Tags: review, quality                                
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>                                                         
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>  Deploy Checklist                                     
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a>    Pre-deployment verification workflow                 
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a>    Tags: devops, deploy                                 
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a> [+ Create New] [Import] [Browse Community]              
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a>
</span></code></pre></div></p> <p><strong>2. Workflow Runner</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a> Running: Debug Python Error                        []  
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a> Variables:                                              
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>   error_message: [TypeError: &#39;NoneType&#39; object...]      
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>   file_path: [src/parser.py                       ]     
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>                                                         
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>                              [Run Workflow]             
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>
</span></code></pre></div></p> <p><strong>3. Save Session as Workflow</strong> After successful agent session: <div class="language-text highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a> Save as Workflow                                   []  
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a> Name: [                                           ]     
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a> Description: [                                    ]     
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a> Tags: [                                           ]     
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>                                                         
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a> Detected Variables:                                     
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>  filename  {{filename}}                               
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>  function_name  {{function_name}}                     
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>  specific_value (keep as-is)                           
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>                                                         
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>                      [Cancel] [Save Workflow]           
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>
</span></code></pre></div></p> <h4 id=commands>Commands<a class=headerlink href=#commands title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/workflow</code></td> <td>Browse workflows</td> </tr> <tr> <td><code>/workflow run &lt;name&gt;</code></td> <td>Run a workflow</td> </tr> <tr> <td><code>/workflow save [name]</code></td> <td>Save current session as workflow</td> </tr> <tr> <td><code>/workflow import &lt;file&gt;</code></td> <td>Import from YAML</td> </tr> <tr> <td><code>/workflow export &lt;name&gt;</code></td> <td>Export to YAML</td> </tr> </tbody> </table> <h4 id=implementation-steps_2>Implementation Steps<a class=headerlink href=#implementation-steps_2 title="Permanent link">&para;</a></h4> <ol> <li>Define Workflow data model</li> <li>Create YAML parser/writer</li> <li>Implement <code>WorkflowManager</code></li> <li>Build workflow browser screen</li> <li>Create workflow runner with variable substitution</li> <li>Add "Save as Workflow" to agent completion</li> <li>(Future) Community workflow sharing</li> </ol> <h4 id=effort-estimate_2>Effort Estimate<a class=headerlink href=#effort-estimate_2 title="Permanent link">&para;</a></h4> <ul> <li>Data model &amp; parsing: 1 day</li> <li>WorkflowManager: 2 days</li> <li>Browser UI: 2 days</li> <li>Runner &amp; variable substitution: 2 days</li> <li>Save from session: 1 day</li> <li><strong>Total: 8 days</strong></li> </ul> <hr> <h2 id=4-enhanced-rag-with-semantic-caching>4. Enhanced RAG with Semantic Caching<a class=headerlink href=#4-enhanced-rag-with-semantic-caching title="Permanent link">&para;</a></h2> <h3 id=overview_3>Overview<a class=headerlink href=#overview_3 title="Permanent link">&para;</a></h3> <p>Improve RAG performance with SQLite-based vector storage and semantic result caching.</p> <h3 id=user-story_3>User Story<a class=headerlink href=#user-story_3 title="Permanent link">&para;</a></h3> <blockquote> <p>As a user with large codebases, I want faster and more accurate code search that remembers previous queries.</p> </blockquote> <h3 id=current-state_3>Current State<a class=headerlink href=#current-state_3 title="Permanent link">&para;</a></h3> <ul> <li><code>VectorStore</code> uses JSON file persistence</li> <li>Pure Python cosine similarity</li> <li>No query caching</li> <li>Full re-index required for updates</li> </ul> <h3 id=proposed-design_3>Proposed Design<a class=headerlink href=#proposed-design_3 title="Permanent link">&para;</a></h3> <h4 id=architecture_1>Architecture<a class=headerlink href=#architecture_1 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>                    RAGManager                           
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>       
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>    QueryCache         VectorStore (SQLite)          
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>    (Semantic)         - FTS5 for text search        
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>      - Vector similarity           
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>                        - Incremental updates          
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>                         
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>                                                       
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>                               
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>                                                        
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>                                  
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>                            HybridSearch               
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>                            (Vector + FTS5)            
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a>                                  
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a>
</span></code></pre></div> <h4 id=sqlite-schema>SQLite Schema<a class=headerlink href=#sqlite-schema title="Permanent link">&para;</a></h4> <div class="language-sql highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>-- Documents table</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>documents</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>    </span><span class=k>source</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span><span class=n>content</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>    </span><span class=n>chunk_index</span><span class=w> </span><span class=nb>INTEGER</span><span class=p>,</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>    </span><span class=n>updated_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=p>);</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=c1>-- Vector embeddings (stored as BLOB)</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>embeddings</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=w>    </span><span class=n>doc_id</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>documents</span><span class=p>(</span><span class=n>id</span><span class=p>),</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=w>    </span><span class=n>vector</span><span class=w> </span><span class=nb>BLOB</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=w>    </span><span class=n>model</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=p>);</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=c1>-- Full-text search</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=k>CREATE</span><span class=w> </span><span class=n>VIRTUAL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>documents_fts</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=n>fts5</span><span class=p>(</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a><span class=w>    </span><span class=n>content</span><span class=p>,</span>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a><span class=w>    </span><span class=n>content</span><span class=o>=</span><span class=s1>&#39;documents&#39;</span><span class=p>,</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=w>    </span><span class=n>content_rowid</span><span class=o>=</span><span class=s1>&#39;rowid&#39;</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a><span class=p>);</span>
</span><span id=__span-18-23><a id=__codelineno-18-23 name=__codelineno-18-23 href=#__codelineno-18-23></a>
</span><span id=__span-18-24><a id=__codelineno-18-24 name=__codelineno-18-24 href=#__codelineno-18-24></a><span class=c1>-- Query cache</span>
</span><span id=__span-18-25><a id=__codelineno-18-25 name=__codelineno-18-25 href=#__codelineno-18-25></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>query_cache</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-18-26><a id=__codelineno-18-26 name=__codelineno-18-26 href=#__codelineno-18-26></a><span class=w>    </span><span class=n>query_hash</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span>
</span><span id=__span-18-27><a id=__codelineno-18-27 name=__codelineno-18-27 href=#__codelineno-18-27></a><span class=w>    </span><span class=n>query_text</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span>
</span><span id=__span-18-28><a id=__codelineno-18-28 name=__codelineno-18-28 href=#__codelineno-18-28></a><span class=w>    </span><span class=n>query_vector</span><span class=w> </span><span class=nb>BLOB</span><span class=p>,</span>
</span><span id=__span-18-29><a id=__codelineno-18-29 name=__codelineno-18-29 href=#__codelineno-18-29></a><span class=w>    </span><span class=n>results</span><span class=w> </span><span class=nb>TEXT</span><span class=p>,</span><span class=w>  </span><span class=c1>-- JSON array of doc_ids with scores</span>
</span><span id=__span-18-30><a id=__codelineno-18-30 name=__codelineno-18-30 href=#__codelineno-18-30></a><span class=w>    </span><span class=n>created_at</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=k>CURRENT_TIMESTAMP</span><span class=p>,</span>
</span><span id=__span-18-31><a id=__codelineno-18-31 name=__codelineno-18-31 href=#__codelineno-18-31></a><span class=w>    </span><span class=n>hit_count</span><span class=w> </span><span class=nb>INTEGER</span><span class=w> </span><span class=k>DEFAULT</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-18-32><a id=__codelineno-18-32 name=__codelineno-18-32 href=#__codelineno-18-32></a><span class=p>);</span>
</span><span id=__span-18-33><a id=__codelineno-18-33 name=__codelineno-18-33 href=#__codelineno-18-33></a>
</span><span id=__span-18-34><a id=__codelineno-18-34 name=__codelineno-18-34 href=#__codelineno-18-34></a><span class=c1>-- File modification tracking</span>
</span><span id=__span-18-35><a id=__codelineno-18-35 name=__codelineno-18-35 href=#__codelineno-18-35></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>file_index</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-18-36><a id=__codelineno-18-36 name=__codelineno-18-36 href=#__codelineno-18-36></a><span class=w>    </span><span class=n>path</span><span class=w> </span><span class=nb>TEXT</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span>
</span><span id=__span-18-37><a id=__codelineno-18-37 name=__codelineno-18-37 href=#__codelineno-18-37></a><span class=w>    </span><span class=n>mtime</span><span class=w> </span><span class=nb>REAL</span><span class=p>,</span>
</span><span id=__span-18-38><a id=__codelineno-18-38 name=__codelineno-18-38 href=#__codelineno-18-38></a><span class=w>    </span><span class=n>hash</span><span class=w> </span><span class=nb>TEXT</span>
</span><span id=__span-18-39><a id=__codelineno-18-39 name=__codelineno-18-39 href=#__codelineno-18-39></a><span class=p>);</span>
</span></code></pre></div> <h4 id=semantic-cache>Semantic Cache<a class=headerlink href=#semantic-cache title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=k>class</span><span class=w> </span><span class=nc>SemanticCache</span><span class=p>:</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>similarity_threshold</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.92</span><span class=p>):</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>threshold</span> <span class=o>=</span> <span class=n>similarity_threshold</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>query</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>query_vector</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>float</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>CacheHit</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Find semantically similar cached query.&quot;&quot;&quot;</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>        <span class=c1># 1. Hash lookup for exact match</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>        <span class=c1># 2. Vector similarity for semantic match</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>        <span class=c1># 3. Return cached results if similar enough</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>set</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>query</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>query_vector</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>float</span><span class=p>],</span> <span class=n>results</span><span class=p>:</span> <span class=nb>list</span><span class=p>):</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Cache query results.&quot;&quot;&quot;</span>
</span></code></pre></div> <h4 id=incremental-indexing>Incremental Indexing<a class=headerlink href=#incremental-indexing title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=k>class</span><span class=w> </span><span class=nc>IncrementalIndexer</span><span class=p>:</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>):</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Update index for changed files only.&quot;&quot;&quot;</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>        <span class=c1># 1. Scan directory for mtime changes</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>        <span class=c1># 2. Hash changed files</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>        <span class=c1># 3. Re-chunk and re-embed only changed files</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>        <span class=c1># 4. Update FTS index</span>
</span></code></pre></div> <h4 id=hybrid-search>Hybrid Search<a class=headerlink href=#hybrid-search title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=k>class</span><span class=w> </span><span class=nc>HybridSearch</span><span class=p>:</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>search</span><span class=p>(</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>        <span class=bp>self</span><span class=p>,</span> 
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>        <span class=n>query</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>        <span class=n>limit</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>        <span class=n>vector_weight</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.7</span><span class=p>,</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>        <span class=n>fts_weight</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.3</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>SearchResult</span><span class=p>]:</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Combine vector similarity with FTS5 ranking.&quot;&quot;&quot;</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>        <span class=c1># 1. Get vector results</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>        <span class=c1># 2. Get FTS5 results</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a>        <span class=c1># 3. Merge and re-rank with weights</span>
</span></code></pre></div> <h4 id=configuration_1>Configuration<a class=headerlink href=#configuration_1 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=p>{</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>&quot;rag&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>    </span><span class=nt>&quot;storage&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;sqlite&quot;</span><span class=p>,</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class=nt>&quot;cache_enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=nt>&quot;cache_similarity_threshold&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.92</span><span class=p>,</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=nt>&quot;cache_max_entries&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=nt>&quot;hybrid_search&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>    </span><span class=nt>&quot;vector_weight&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.7</span><span class=p>,</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>    </span><span class=nt>&quot;chunk_size&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=w>    </span><span class=nt>&quot;chunk_overlap&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>200</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_3>Implementation Steps<a class=headerlink href=#implementation-steps_3 title="Permanent link">&para;</a></h4> <ol> <li>Create SQLite schema and migration</li> <li>Implement <code>SQLiteVectorStore</code></li> <li>Add FTS5 integration</li> <li>Build <code>SemanticCache</code></li> <li>Implement <code>IncrementalIndexer</code></li> <li>Create <code>HybridSearch</code></li> <li>Migration from JSON to SQLite</li> <li>Performance testing</li> </ol> <h4 id=effort-estimate_3>Effort Estimate<a class=headerlink href=#effort-estimate_3 title="Permanent link">&para;</a></h4> <ul> <li>SQLite schema: 1 day</li> <li>VectorStore migration: 2 days</li> <li>Semantic cache: 2 days</li> <li>Incremental indexing: 2 days</li> <li>Hybrid search: 1 day</li> <li>Testing &amp; optimization: 2 days</li> <li><strong>Total: 10 days</strong></li> </ul> <hr> <h2 id=5-session-sharing-collaboration>5. Session Sharing &amp; Collaboration<a class=headerlink href=#5-session-sharing-collaboration title="Permanent link">&para;</a></h2> <h3 id=overview_4>Overview<a class=headerlink href=#overview_4 title="Permanent link">&para;</a></h3> <p>Share conversation sessions via URLs and enable team workspace features.</p> <h3 id=user-story_4>User Story<a class=headerlink href=#user-story_4 title="Permanent link">&para;</a></h3> <blockquote> <p>As a team member, I want to share my AI conversation with colleagues so we can collaborate on problem-solving.</p> </blockquote> <h3 id=current-state_4>Current State<a class=headerlink href=#current-state_4 title="Permanent link">&para;</a></h3> <ul> <li>Sessions export to markdown/JSON files</li> <li>No sharing mechanism</li> <li>Single-user only</li> </ul> <h3 id=proposed-design_4>Proposed Design<a class=headerlink href=#proposed-design_4 title="Permanent link">&para;</a></h3> <h4 id=sharing-flow>Sharing Flow<a class=headerlink href=#sharing-flow title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>            
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>  User   &gt;  /share     &gt;  Share       &gt;  URL    
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>               command          Service          Generated
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>            
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>                                        
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>                                        
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>                               
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>                                 Cloud Storage   
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>                                 (Optional S3)   
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>                               
</span></code></pre></div> <h4 id=share-types>Share Types<a class=headerlink href=#share-types title="Permanent link">&para;</a></h4> <p><strong>1. Public Link (Expiring)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>https://null.sh/s/abc123def456
</span></code></pre></div> - Read-only - 7-day expiration (configurable) - No authentication required</p> <p><strong>2. Team Workspace</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>https://null.sh/team/acme/sessions/project-debug-001
</span></code></pre></div> - Team members can view/fork - Persistent storage - Requires team account</p> <p><strong>3. Self-Hosted</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>https://your-server.com/null/s/abc123
</span></code></pre></div> - Deploy your own share server - Full control over data</p> <h4 id=data-format>Data Format<a class=headerlink href=#data-format title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=nd>@dataclass</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=k>class</span><span class=w> </span><span class=nc>SharedSession</span><span class=p>:</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>    <span class=n>created_by</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>    <span class=n>created_at</span><span class=p>:</span> <span class=n>datetime</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>    <span class=n>expires_at</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>    <span class=n>access_level</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;public&quot;</span><span class=p>,</span> <span class=s2>&quot;team&quot;</span><span class=p>,</span> <span class=s2>&quot;private&quot;</span><span class=p>]</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>    <span class=c1># Session data (encrypted for private)</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>    <span class=n>blocks</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>BlockState</span><span class=p>]</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>    <span class=n>metadata</span><span class=p>:</span> <span class=nb>dict</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>    <span class=c1># Optional</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>    <span class=n>team_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>    <span class=n>fork_count</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>    <span class=n>view_count</span><span class=p>:</span> <span class=nb>int</span>
</span></code></pre></div> <h4 id=commands_1>Commands<a class=headerlink href=#commands_1 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/share</code></td> <td>Share current session (public link)</td> </tr> <tr> <td><code>/share team</code></td> <td>Share to team workspace</td> </tr> <tr> <td><code>/share --expires 24h</code></td> <td>Share with expiration</td> </tr> <tr> <td><code>/import &lt;url&gt;</code></td> <td>Import shared session</td> </tr> </tbody> </table> <h4 id=ui-components_2>UI Components<a class=headerlink href=#ui-components_2 title="Permanent link">&para;</a></h4> <p><strong>1. Share Dialog</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a> Share Session                                      []  
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a> Visibility:                                             
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>    Public (anyone with link)                           
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>    Team (Acme Corp members)                            
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>    Private (invite only)                               
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>                                                         
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a> Expires: [7 days ]                                     
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>                                                         
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a> Include:                                                
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>    Full conversation                                   
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>    Tool call results                                   
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>    Token/cost information                              
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>                                                         
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a>  
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a>  https://null.sh/s/abc123def456              [Copy]   
</span><span id=__span-28-18><a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a>  
</span><span id=__span-28-19><a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a>                                                         
</span><span id=__span-28-20><a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a>                              [Cancel] [Create Link]     
</span><span id=__span-28-21><a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a>
</span></code></pre></div></p> <p><strong>2. Shared Session Viewer</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a> Shared Session                          [Fork] [Import] 
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a> by @user  2 days ago  15 views                        
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>                                                         
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>  [Read-only session view with blocks]                   
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>                                                         
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
</span></code></pre></div></p> <h4 id=backend-requirements>Backend Requirements<a class=headerlink href=#backend-requirements title="Permanent link">&para;</a></h4> <ul> <li>Share service API (optional, can be self-hosted)</li> <li>Cloud storage for session data</li> <li>URL shortener/ID generation</li> <li>Expiration cleanup job</li> </ul> <h4 id=configuration_2>Configuration<a class=headerlink href=#configuration_2 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=p>{</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=w>  </span><span class=nt>&quot;sharing&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=w>    </span><span class=nt>&quot;service_url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://null.sh&quot;</span><span class=p>,</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=w>    </span><span class=nt>&quot;default_expiration&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;7d&quot;</span><span class=p>,</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>    </span><span class=nt>&quot;include_tools&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=w>    </span><span class=nt>&quot;self_hosted&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>    </span><span class=nt>&quot;s3_bucket&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_4>Implementation Steps<a class=headerlink href=#implementation-steps_4 title="Permanent link">&para;</a></h4> <ol> <li>Define sharing protocol/format</li> <li>Create share service API spec</li> <li>Implement <code>/share</code> command</li> <li>Build share dialog UI</li> <li>Implement session viewer</li> <li>(Optional) Self-hosted share server</li> <li>(Optional) Team workspace features</li> </ol> <h4 id=effort-estimate_4>Effort Estimate<a class=headerlink href=#effort-estimate_4 title="Permanent link">&para;</a></h4> <ul> <li>Data format: 1 day</li> <li>Share command &amp; dialog: 2 days</li> <li>Service integration: 3 days</li> <li>Session viewer: 2 days</li> <li>Self-hosted option: 3 days</li> <li><strong>Total: 11 days</strong></li> </ul> <hr> <h2 id=6-streaming-tool-results>6. Streaming Tool Results<a class=headerlink href=#6-streaming-tool-results title="Permanent link">&para;</a></h2> <h3 id=overview_5>Overview<a class=headerlink href=#overview_5 title="Permanent link">&para;</a></h3> <p>Display tool execution results in real-time rather than waiting for completion.</p> <h3 id=user-story_5>User Story<a class=headerlink href=#user-story_5 title="Permanent link">&para;</a></h3> <blockquote> <p>As a user running long commands via AI tools, I want to see output as it happens rather than waiting for completion.</p> </blockquote> <h3 id=current-state_5>Current State<a class=headerlink href=#current-state_5 title="Permanent link">&para;</a></h3> <ul> <li>Tool results shown after completion in accordion</li> <li><code>run_command</code> waits for full output</li> <li>No streaming indication during execution</li> </ul> <h3 id=proposed-design_5>Proposed Design<a class=headerlink href=#proposed-design_5 title="Permanent link">&para;</a></h3> <h4 id=streaming-architecture>Streaming Architecture<a class=headerlink href=#streaming-architecture title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a>        
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>  AI calls   &gt;  ToolRunner  &gt;  StreamingTool  
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>  tool             (async)           (PTY/Process)  
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>        
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>                                               
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>                                                stdout chunks
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>                                               
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>                   
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a>                      ToolProgressWidget         
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>                      (real-time output view)    
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>                   
</span></code></pre></div> <h4 id=enhanced-tool-accordion>Enhanced Tool Accordion<a class=headerlink href=#enhanced-tool-accordion title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>  run_command: npm install                    [] []  
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>  Running... (12s)                                     
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>  
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a> npm WARN deprecated lodash@4.17.20                      
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a> npm WARN deprecated request@2.88.2                      
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a> added 1247 packages in 10s                              
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>  85%                          
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a>
</span></code></pre></div> <h4 id=streaming-tool-protocol>Streaming Tool Protocol<a class=headerlink href=#streaming-tool-protocol title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=nd>@dataclass</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=k>class</span><span class=w> </span><span class=nc>ToolProgress</span><span class=p>:</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>    <span class=n>status</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;running&quot;</span><span class=p>,</span> <span class=s2>&quot;completed&quot;</span><span class=p>,</span> <span class=s2>&quot;failed&quot;</span><span class=p>,</span> <span class=s2>&quot;cancelled&quot;</span><span class=p>]</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>    <span class=n>output</span><span class=p>:</span> <span class=nb>str</span>  <span class=c1># Cumulative output</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>    <span class=n>progress</span><span class=p>:</span> <span class=nb>float</span> <span class=o>|</span> <span class=kc>None</span>  <span class=c1># 0.0 - 1.0 if determinable</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>    <span class=n>elapsed</span><span class=p>:</span> <span class=nb>float</span>  <span class=c1># Seconds</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=k>class</span><span class=w> </span><span class=nc>StreamingTool</span><span class=p>(</span><span class=n>Protocol</span><span class=p>):</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>        <span class=bp>self</span><span class=p>,</span> 
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>        <span class=n>arguments</span><span class=p>:</span> <span class=nb>dict</span><span class=p>,</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>        <span class=n>on_progress</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=n>ToolProgress</span><span class=p>],</span> <span class=kc>None</span><span class=p>]</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute tool with progress callbacks.&quot;&quot;&quot;</span>
</span></code></pre></div> <h4 id=enhanced-run_command>Enhanced <code>run_command</code><a class=headerlink href=#enhanced-run_command title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>run_command_streaming</span><span class=p>(</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>    <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>    <span class=n>working_dir</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>    <span class=n>on_progress</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[</span><span class=n>ToolProgress</span><span class=p>],</span> <span class=kc>None</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Execute command with streaming output.&quot;&quot;&quot;</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>    <span class=n>process</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_subprocess_shell</span><span class=p>(</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>        <span class=n>command</span><span class=p>,</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>        <span class=n>stdout</span><span class=o>=</span><span class=n>asyncio</span><span class=o>.</span><span class=n>subprocess</span><span class=o>.</span><span class=n>PIPE</span><span class=p>,</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>        <span class=n>stderr</span><span class=o>=</span><span class=n>asyncio</span><span class=o>.</span><span class=n>subprocess</span><span class=o>.</span><span class=n>STDOUT</span><span class=p>,</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>        <span class=n>cwd</span><span class=o>=</span><span class=n>working_dir</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>    <span class=p>)</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a>    <span class=n>output_buffer</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>process</span><span class=o>.</span><span class=n>stdout</span><span class=p>:</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>        <span class=n>chunk</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>        <span class=n>output_buffer</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>        <span class=k>if</span> <span class=n>on_progress</span><span class=p>:</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a>            <span class=n>on_progress</span><span class=p>(</span><span class=n>ToolProgress</span><span class=p>(</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a>                <span class=n>status</span><span class=o>=</span><span class=s2>&quot;running&quot;</span><span class=p>,</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a>                <span class=n>output</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>output_buffer</span><span class=p>),</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a>                <span class=n>progress</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>                <span class=n>elapsed</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27 href=#__codelineno-34-27></a>            <span class=p>))</span>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28 href=#__codelineno-34-28></a>
</span><span id=__span-34-29><a id=__codelineno-34-29 name=__codelineno-34-29 href=#__codelineno-34-29></a>    <span class=k>await</span> <span class=n>process</span><span class=o>.</span><span class=n>wait</span><span class=p>()</span>
</span><span id=__span-34-30><a id=__codelineno-34-30 name=__codelineno-34-30 href=#__codelineno-34-30></a>    <span class=n>final_output</span> <span class=o>=</span> <span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>output_buffer</span><span class=p>)</span>
</span><span id=__span-34-31><a id=__codelineno-34-31 name=__codelineno-34-31 href=#__codelineno-34-31></a>
</span><span id=__span-34-32><a id=__codelineno-34-32 name=__codelineno-34-32 href=#__codelineno-34-32></a>    <span class=k>if</span> <span class=n>on_progress</span><span class=p>:</span>
</span><span id=__span-34-33><a id=__codelineno-34-33 name=__codelineno-34-33 href=#__codelineno-34-33></a>        <span class=n>on_progress</span><span class=p>(</span><span class=n>ToolProgress</span><span class=p>(</span>
</span><span id=__span-34-34><a id=__codelineno-34-34 name=__codelineno-34-34 href=#__codelineno-34-34></a>            <span class=n>status</span><span class=o>=</span><span class=s2>&quot;completed&quot;</span> <span class=k>if</span> <span class=n>process</span><span class=o>.</span><span class=n>returncode</span> <span class=o>==</span> <span class=mi>0</span> <span class=k>else</span> <span class=s2>&quot;failed&quot;</span><span class=p>,</span>
</span><span id=__span-34-35><a id=__codelineno-34-35 name=__codelineno-34-35 href=#__codelineno-34-35></a>            <span class=n>output</span><span class=o>=</span><span class=n>final_output</span><span class=p>,</span>
</span><span id=__span-34-36><a id=__codelineno-34-36 name=__codelineno-34-36 href=#__codelineno-34-36></a>            <span class=n>progress</span><span class=o>=</span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-34-37><a id=__codelineno-34-37 name=__codelineno-34-37 href=#__codelineno-34-37></a>            <span class=n>elapsed</span><span class=o>=</span><span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span> <span class=o>-</span> <span class=n>start_time</span>
</span><span id=__span-34-38><a id=__codelineno-34-38 name=__codelineno-34-38 href=#__codelineno-34-38></a>        <span class=p>))</span>
</span><span id=__span-34-39><a id=__codelineno-34-39 name=__codelineno-34-39 href=#__codelineno-34-39></a>
</span><span id=__span-34-40><a id=__codelineno-34-40 name=__codelineno-34-40 href=#__codelineno-34-40></a>    <span class=k>return</span> <span class=n>final_output</span>
</span></code></pre></div> <h4 id=ui-widget-updates>UI Widget Updates<a class=headerlink href=#ui-widget-updates title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=k>class</span><span class=w> </span><span class=nc>ToolAccordion</span><span class=p>(</span><span class=n>Widget</span><span class=p>):</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>    <span class=n>output</span> <span class=o>=</span> <span class=n>reactive</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>    <span class=n>status</span> <span class=o>=</span> <span class=n>reactive</span><span class=p>(</span><span class=s2>&quot;pending&quot;</span><span class=p>)</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a>    <span class=n>elapsed</span> <span class=o>=</span> <span class=n>reactive</span><span class=p>(</span><span class=mf>0.0</span><span class=p>)</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>    <span class=k>def</span><span class=w> </span><span class=nf>update_progress</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>progress</span><span class=p>:</span> <span class=n>ToolProgress</span><span class=p>):</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>output</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>output</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>status</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>        <span class=bp>self</span><span class=o>.</span><span class=n>elapsed</span> <span class=o>=</span> <span class=n>progress</span><span class=o>.</span><span class=n>elapsed</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>        <span class=c1># Auto-scroll to bottom</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>        <span class=bp>self</span><span class=o>.</span><span class=n>query_one</span><span class=p>(</span><span class=s2>&quot;#output&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>scroll_end</span><span class=p>()</span>
</span></code></pre></div> <h4 id=cancel-support>Cancel Support<a class=headerlink href=#cancel-support title="Permanent link">&para;</a></h4> <ul> <li>Stop button on running tools</li> <li>Send SIGTERM to process</li> <li>Update AI context with "Tool cancelled by user"</li> </ul> <h4 id=configuration_3>Configuration<a class=headerlink href=#configuration_3 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=p>{</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>  </span><span class=nt>&quot;tools&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>    </span><span class=nt>&quot;streaming_enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=w>    </span><span class=nt>&quot;auto_scroll&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>    </span><span class=nt>&quot;max_output_lines&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span><span class=p>,</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>    </span><span class=nt>&quot;show_elapsed_time&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_5>Implementation Steps<a class=headerlink href=#implementation-steps_5 title="Permanent link">&para;</a></h4> <ol> <li>Define <code>ToolProgress</code> protocol</li> <li>Update <code>run_command</code> with streaming</li> <li>Modify <code>ToolAccordion</code> for live updates</li> <li>Add cancel button functionality</li> <li>Update AIExecutor to handle streaming tools</li> <li>Add progress parsing for known commands (npm, pip, etc.)</li> <li>Testing</li> </ol> <h4 id=effort-estimate_5>Effort Estimate<a class=headerlink href=#effort-estimate_5 title="Permanent link">&para;</a></h4> <ul> <li>Protocol definition: 0.5 days</li> <li>Streaming run_command: 1 day</li> <li>ToolAccordion updates: 1.5 days</li> <li>Cancel support: 1 day</li> <li>Progress parsing: 1 day</li> <li>Integration: 1 day</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=implementation-priority>Implementation Priority<a class=headerlink href=#implementation-priority title="Permanent link">&para;</a></h2> <p>Based on impact and effort:</p> <table> <thead> <tr> <th>Priority</th> <th>Feature</th> <th>Effort</th> <th>Impact</th> <th>Recommendation</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Streaming Tool Results</td> <td>6d</td> <td>High</td> <td>Quick win, improves UX</td> </tr> <tr> <td>2</td> <td>Smart Command Suggestions</td> <td>5d</td> <td>High</td> <td>Core usability</td> </tr> <tr> <td>3</td> <td>Conversation Branching</td> <td>6d</td> <td>Medium</td> <td>Power user feature</td> </tr> <tr> <td>4</td> <td>Workflow Templates</td> <td>8d</td> <td>Medium</td> <td>Automation value</td> </tr> <tr> <td>5</td> <td>Enhanced RAG</td> <td>10d</td> <td>Medium</td> <td>Performance</td> </tr> <tr> <td>6</td> <td>Session Sharing</td> <td>11d</td> <td>Low*</td> <td>Requires backend</td> </tr> </tbody> </table> <p>*Impact increases significantly with team adoption.</p> <hr> <hr> <h2 id=7-planning-mode-plan>7. Planning Mode (<code>/plan</code>)<a class=headerlink href=#7-planning-mode-plan title="Permanent link">&para;</a></h2> <h3 id=overview_6>Overview<a class=headerlink href=#overview_6 title="Permanent link">&para;</a></h3> <p>Create persistent, editable roadmaps before AI execution. Users review, modify, and approve each step before the AI acts.</p> <h3 id=user-story_6>User Story<a class=headerlink href=#user-story_6 title="Permanent link">&para;</a></h3> <blockquote> <p>As a user, I want to see the AI's plan before it executes, so I can steer the approach and avoid wasted iterations.</p> </blockquote> <h3 id=current-state_6>Current State<a class=headerlink href=#current-state_6 title="Permanent link">&para;</a></h3> <ul> <li>Agent mode executes immediately after receiving a task</li> <li>No preview of planned actions</li> <li>Users discover the approach only after execution begins</li> </ul> <h3 id=proposed-design_6>Proposed Design<a class=headerlink href=#proposed-design_6 title="Permanent link">&para;</a></h3> <h4 id=architecture_2>Architecture<a class=headerlink href=#architecture_2 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>                      PlanningEngine                          
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>             
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>    PlanGenerator&gt;  PlanBlock   &gt;  PlanExecutor   
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>    (AI)              (Widget)          (Agent)        
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a>             
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>                                                           
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>                                             
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>                      User Actions                        
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>                      Edit/Approve                        
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>                      Skip/Reject                         
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>                                             
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>
</span></code></pre></div> <h4 id=data-model_2>Data Model<a class=headerlink href=#data-model_2 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=nd>@dataclass</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=k>class</span><span class=w> </span><span class=nc>PlanStep</span><span class=p>:</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>    <span class=n>order</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>    <span class=n>action_type</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;prompt&quot;</span><span class=p>,</span> <span class=s2>&quot;tool&quot;</span><span class=p>,</span> <span class=s2>&quot;checkpoint&quot;</span><span class=p>,</span> <span class=s2>&quot;conditional&quot;</span><span class=p>]</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>    <span class=n>tool_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a>    <span class=n>tool_args</span><span class=p>:</span> <span class=nb>dict</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a>    <span class=n>status</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;pending&quot;</span><span class=p>,</span> <span class=s2>&quot;approved&quot;</span><span class=p>,</span> <span class=s2>&quot;skipped&quot;</span><span class=p>,</span> <span class=s2>&quot;completed&quot;</span><span class=p>,</span> <span class=s2>&quot;failed&quot;</span><span class=p>]</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>    <span class=n>result</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a><span class=nd>@dataclass</span>
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a><span class=k>class</span><span class=w> </span><span class=nc>Plan</span><span class=p>:</span>
</span><span id=__span-38-14><a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-38-15><a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>    <span class=n>goal</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-38-16><a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a>    <span class=n>steps</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>PlanStep</span><span class=p>]</span>
</span><span id=__span-38-17><a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a>    <span class=n>created_at</span><span class=p>:</span> <span class=n>datetime</span>
</span><span id=__span-38-18><a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a>    <span class=n>status</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;draft&quot;</span><span class=p>,</span> <span class=s2>&quot;approved&quot;</span><span class=p>,</span> <span class=s2>&quot;executing&quot;</span><span class=p>,</span> <span class=s2>&quot;completed&quot;</span><span class=p>,</span> <span class=s2>&quot;cancelled&quot;</span><span class=p>]</span>
</span><span id=__span-38-19><a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a>    <span class=n>variables</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>  <span class=c1># User-provided inputs</span>
</span><span id=__span-38-20><a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a>
</span><span id=__span-38-21><a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a><span class=k>class</span><span class=w> </span><span class=nc>PlanManager</span><span class=p>:</span>
</span><span id=__span-38-22><a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>generate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>goal</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Plan</span>
</span><span id=__span-38-23><a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plan</span><span class=p>:</span> <span class=n>Plan</span><span class=p>,</span> <span class=n>on_step</span><span class=p>:</span> <span class=n>Callable</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-38-24><a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a>    <span class=k>def</span><span class=w> </span><span class=nf>approve_step</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plan_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>step_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-38-25><a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a>    <span class=k>def</span><span class=w> </span><span class=nf>skip_step</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plan_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>step_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-38-26><a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a>    <span class=k>def</span><span class=w> </span><span class=nf>edit_step</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>plan_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>step_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>new_desc</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span></code></pre></div> <h4 id=ui-components_3>UI Components<a class=headerlink href=#ui-components_3 title="Permanent link">&para;</a></h4> <p><strong>1. Plan Block Widget</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>  Plan: Refactor authentication module              [Edit] 
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>  1. Read current auth implementation                       
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>       read_file: src/auth/handler.py                      
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>  2. Identify security vulnerabilities          [Skip] []  
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>       Analyze for common auth pitfalls                    
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a>  3. Create new JWT-based auth module           [Skip] []  
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>       write_file: src/auth/jwt_handler.py                 
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>  4. Update tests                               [Skip] []  
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>       Modify existing test cases                          
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>  
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>                    [Approve All] [Execute] [Cancel]          
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>
</span></code></pre></div></p> <p><strong>2. Step Editor (Inline)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a> Edit Step 3:                                                 
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>  
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>  Create new JWT-based auth module with refresh tokens     
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>  
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a> Tool: [write_file ]  Path: [src/auth/jwt_handler.py    ]   
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>                                        [Cancel] [Save]       
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>
</span></code></pre></div></p> <h4 id=commands_2>Commands<a class=headerlink href=#commands_2 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/plan &lt;goal&gt;</code></td> <td>Generate a plan for the goal</td> </tr> <tr> <td><code>/plan show</code></td> <td>Show current plan</td> </tr> <tr> <td><code>/plan approve</code></td> <td>Approve all pending steps</td> </tr> <tr> <td><code>/plan execute</code></td> <td>Start executing approved steps</td> </tr> <tr> <td><code>/plan save &lt;name&gt;</code></td> <td>Save plan as workflow template</td> </tr> <tr> <td><code>/plan load &lt;name&gt;</code></td> <td>Load saved plan</td> </tr> </tbody> </table> <h4 id=keyboard-shortcuts_1>Keyboard Shortcuts<a class=headerlink href=#keyboard-shortcuts_1 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Shortcut</th> <th>Action</th> </tr> </thead> <tbody> <tr> <td><code>Enter</code></td> <td>Approve focused step</td> </tr> <tr> <td><code>s</code></td> <td>Skip focused step</td> </tr> <tr> <td><code>e</code></td> <td>Edit focused step</td> </tr> <tr> <td><code>Ctrl+Enter</code></td> <td>Approve all and execute</td> </tr> </tbody> </table> <h4 id=configuration_4>Configuration<a class=headerlink href=#configuration_4 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=p>{</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=w>  </span><span class=nt>&quot;planning&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>    </span><span class=nt>&quot;auto_approve_read_only&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=w>    </span><span class=nt>&quot;max_steps&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=p>,</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=w>    </span><span class=nt>&quot;require_approval&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=w>    </span><span class=nt>&quot;save_plans&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_6>Implementation Steps<a class=headerlink href=#implementation-steps_6 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>PlanStep</code> and <code>Plan</code> data models</li> <li>Implement <code>PlanManager</code> with AI generation</li> <li>Build <code>PlanBlockWidget</code> with interactive steps</li> <li>Add step editing inline UI</li> <li>Integrate with <code>AgentManager</code> for execution</li> <li>Add plan persistence</li> <li>Testing</li> </ol> <h4 id=effort-estimate_6>Effort Estimate<a class=headerlink href=#effort-estimate_6 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>PlanManager: 1 day</li> <li>PlanBlockWidget: 1.5 days</li> <li>Step editing: 0.5 days</li> <li>Agent integration: 1 day</li> <li>Persistence: 0.5 days</li> <li>Testing: 1 day</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=8-git-native-operations>8. Git-Native Operations<a class=headerlink href=#8-git-native-operations title="Permanent link">&para;</a></h2> <h3 id=overview_7>Overview<a class=headerlink href=#overview_7 title="Permanent link">&para;</a></h3> <p>Every AI edit becomes a trackable git operation with auto-generated commit messages and in-chat git commands.</p> <h3 id=user-story_7>User Story<a class=headerlink href=#user-story_7 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer, I want AI changes to be proper git commits, so I can review, revert, and track changes using familiar git workflows.</p> </blockquote> <h3 id=current-state_7>Current State<a class=headerlink href=#current-state_7 title="Permanent link">&para;</a></h3> <ul> <li>AI writes files directly without git integration</li> <li>No automatic commits</li> <li><code>/git</code> command shows status but doesn't integrate with AI actions</li> </ul> <h3 id=proposed-design_7>Proposed Design<a class=headerlink href=#proposed-design_7 title="Permanent link">&para;</a></h3> <h4 id=architecture_3>Architecture<a class=headerlink href=#architecture_3 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>                      GitIntegration                          
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a>             
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>    AI Edit     &gt;  AutoCommit  &gt;  Commit         
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a>    (write_file)      Handler           Block          
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a>             
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>                                                             
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>                                               
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>                       Commit Msg                           
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a>                       Generator                            
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a>                                               
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>
</span></code></pre></div> <h4 id=data-model_3>Data Model<a class=headerlink href=#data-model_3 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=nd>@dataclass</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=k>class</span><span class=w> </span><span class=nc>AICommit</span><span class=p>:</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>    <span class=n>message</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>    <span class=n>files</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a>    <span class=n>diff</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a>    <span class=n>timestamp</span><span class=p>:</span> <span class=n>datetime</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a>    <span class=n>agent_session_id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a>    <span class=n>can_revert</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a><span class=k>class</span><span class=w> </span><span class=nc>GitManager</span><span class=p>:</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>auto_commit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>files</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>context</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AICommit</span>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>generate_message</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>diff</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>revert</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>commit_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>show_diff</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span>
</span></code></pre></div> <h4 id=ui-components_4>UI Components<a class=headerlink href=#ui-components_4 title="Permanent link">&para;</a></h4> <p><strong>1. Commit Block Widget</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>  AI Commit: feat(auth): add JWT refresh token support     
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a> Files changed: 3                                             
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>   M src/auth/handler.py (+45, -12)                          
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>   A src/auth/jwt.py (+120)                                  
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>   M tests/test_auth.py (+30, -5)                            
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>  
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>                              [View Diff] [Revert] [Amend]    
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>
</span></code></pre></div></p> <p><strong>2. Diff View Block</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>  Diff: src/auth/handler.py                           []  
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a> @@ -45,6 +45,15 @@ def authenticate(token):                
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>    def verify_token(token: str) -&gt; bool:                    
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a>        &quot;&quot;&quot;Verify JWT token.&quot;&quot;&quot;                              
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a> +      if is_expired(token):                                
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a> +          refresh_token = get_refresh_token()              
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a> +          if refresh_token:                                
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a> +              return refresh(refresh_token)                
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a> +          return False                                     
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>        return decode(token) is not None                     
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>
</span></code></pre></div></p> <h4 id=commands_3>Commands<a class=headerlink href=#commands_3 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/diff [file]</code></td> <td>Show diff for file or all changes</td> </tr> <tr> <td><code>/commit [message]</code></td> <td>Commit staged changes (AI message if empty)</td> </tr> <tr> <td><code>/undo</code></td> <td>Revert last AI commit</td> </tr> <tr> <td><code>/git log</code></td> <td>Show recent commits with AI badges</td> </tr> <tr> <td><code>/git stash</code></td> <td>Stash current changes</td> </tr> <tr> <td><code>/git checkout &lt;file&gt;</code></td> <td>Discard changes to file</td> </tr> </tbody> </table> <h4 id=auto-commit-behavior>Auto-Commit Behavior<a class=headerlink href=#auto-commit-behavior title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=k>class</span><span class=w> </span><span class=nc>AutoCommitHandler</span><span class=p>:</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>on_file_written</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>content</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Called after AI writes a file.&quot;&quot;&quot;</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=o>.</span><span class=n>auto_commit</span><span class=p>:</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>            <span class=c1># Stage the file</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>git</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a>            <span class=c1># Generate commit message from context</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a>            <span class=n>diff</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>git</span><span class=o>.</span><span class=n>diff_staged</span><span class=p>()</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a>            <span class=n>message</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>generate_message</span><span class=p>(</span><span class=n>diff</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a>            <span class=c1># Commit with conventional commit format</span>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a>            <span class=n>commit</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>git</span><span class=o>.</span><span class=n>commit</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</span><span id=__span-46-14><a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a>
</span><span id=__span-46-15><a id=__codelineno-46-15 name=__codelineno-46-15 href=#__codelineno-46-15></a>            <span class=c1># Show commit block in UI</span>
</span><span id=__span-46-16><a id=__codelineno-46-16 name=__codelineno-46-16 href=#__codelineno-46-16></a>            <span class=bp>self</span><span class=o>.</span><span class=n>app</span><span class=o>.</span><span class=n>post_message</span><span class=p>(</span><span class=n>CommitCreated</span><span class=p>(</span><span class=n>commit</span><span class=p>))</span>
</span></code></pre></div> <h4 id=commit-message-generation>Commit Message Generation<a class=headerlink href=#commit-message-generation title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=n>COMMIT_PROMPT</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=s2>Generate a conventional commit message for these changes.</span>
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=s2>Format: &lt;type&gt;(&lt;scope&gt;): &lt;description&gt;</span>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=s2>Types: feat, fix, refactor, docs, test, chore</span>
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a><span class=s2>Keep description under 50 chars.</span>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a><span class=s2>Diff:</span>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=si>{diff}</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a><span class=s2>Context:</span>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a><span class=si>{context}</span>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a><span class=s2>&quot;&quot;&quot;</span>
</span></code></pre></div> <h4 id=configuration_5>Configuration<a class=headerlink href=#configuration_5 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=p>{</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a><span class=w>  </span><span class=nt>&quot;git&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a><span class=w>    </span><span class=nt>&quot;auto_commit&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=w>    </span><span class=nt>&quot;commit_format&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;conventional&quot;</span><span class=p>,</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=w>    </span><span class=nt>&quot;sign_commits&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=w>    </span><span class=nt>&quot;show_diff_on_commit&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=w>    </span><span class=nt>&quot;allow_revert&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_7>Implementation Steps<a class=headerlink href=#implementation-steps_7 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>GitManager</code> with async git operations</li> <li>Implement commit message generation</li> <li>Add auto-commit hook to <code>write_file</code> tool</li> <li>Build <code>CommitBlockWidget</code></li> <li>Build <code>DiffViewWidget</code> with syntax highlighting</li> <li>Implement <code>/undo</code> with revert logic</li> <li>Add git status to StatusBar</li> <li>Testing</li> </ol> <h4 id=effort-estimate_7>Effort Estimate<a class=headerlink href=#effort-estimate_7 title="Permanent link">&para;</a></h4> <ul> <li>GitManager: 1 day</li> <li>Message generation: 0.5 days</li> <li>Auto-commit integration: 0.5 days</li> <li>CommitBlockWidget: 1 day</li> <li>DiffViewWidget: 1 day</li> <li>Undo/Revert: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 5 days</strong></li> </ul> <hr> <h2 id=9-human-in-the-loop-code-review>9. Human-in-the-Loop Code Review<a class=headerlink href=#9-human-in-the-loop-code-review title="Permanent link">&para;</a></h2> <h3 id=overview_8>Overview<a class=headerlink href=#overview_8 title="Permanent link">&para;</a></h3> <p>Before applying AI changes, show a diff view with rationale, allowing acceptance or rejection per file or per hunk.</p> <h3 id=user-story_8>User Story<a class=headerlink href=#user-story_8 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer, I want to review AI-proposed changes before they're applied, so I maintain control over my codebase.</p> </blockquote> <h3 id=current-state_8>Current State<a class=headerlink href=#current-state_8 title="Permanent link">&para;</a></h3> <ul> <li>AI writes files directly without preview</li> <li>No approval workflow for code changes</li> <li>Tool approval exists but shows args, not diffs</li> </ul> <h3 id=proposed-design_8>Proposed Design<a class=headerlink href=#proposed-design_8 title="Permanent link">&para;</a></h3> <h4 id=architecture_4>Architecture<a class=headerlink href=#architecture_4 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>                    CodeReviewFlow                            
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>             
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>    AI Proposes &gt;  Review      &gt;  Apply          
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>    Changes           Screen            Selected       
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a>             
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a>                                                             
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a>                                               
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a>                       Per-Hunk                             
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a>                       Accept/Reject                         
</span><span id=__span-49-12><a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a>                                               
</span><span id=__span-49-13><a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a>
</span></code></pre></div> <h4 id=data-model_4>Data Model<a class=headerlink href=#data-model_4 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=nd>@dataclass</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=k>class</span><span class=w> </span><span class=nc>ProposedChange</span><span class=p>:</span>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>    <span class=n>file</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a>    <span class=n>original</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>  <span class=c1># None if new file</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>    <span class=n>proposed</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a>    <span class=n>hunks</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>DiffHunk</span><span class=p>]</span>
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a>    <span class=n>rationale</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a>
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a><span class=nd>@dataclass</span>
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a><span class=k>class</span><span class=w> </span><span class=nc>DiffHunk</span><span class=p>:</span>
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a>    <span class=n>start_line</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-50-13><a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a>    <span class=n>end_line</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-50-14><a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a>    <span class=n>original_lines</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-50-15><a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a>    <span class=n>proposed_lines</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-50-16><a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a>    <span class=n>status</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;pending&quot;</span><span class=p>,</span> <span class=s2>&quot;accepted&quot;</span><span class=p>,</span> <span class=s2>&quot;rejected&quot;</span><span class=p>]</span>
</span><span id=__span-50-17><a id=__codelineno-50-17 name=__codelineno-50-17 href=#__codelineno-50-17></a>
</span><span id=__span-50-18><a id=__codelineno-50-18 name=__codelineno-50-18 href=#__codelineno-50-18></a><span class=k>class</span><span class=w> </span><span class=nc>ReviewManager</span><span class=p>:</span>
</span><span id=__span-50-19><a id=__codelineno-50-19 name=__codelineno-50-19 href=#__codelineno-50-19></a>    <span class=n>pending_changes</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ProposedChange</span><span class=p>]</span>
</span><span id=__span-50-20><a id=__codelineno-50-20 name=__codelineno-50-20 href=#__codelineno-50-20></a>
</span><span id=__span-50-21><a id=__codelineno-50-21 name=__codelineno-50-21 href=#__codelineno-50-21></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>propose</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>content</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>rationale</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ProposedChange</span>
</span><span id=__span-50-22><a id=__codelineno-50-22 name=__codelineno-50-22 href=#__codelineno-50-22></a>    <span class=k>def</span><span class=w> </span><span class=nf>accept_hunk</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>hunk_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-50-23><a id=__codelineno-50-23 name=__codelineno-50-23 href=#__codelineno-50-23></a>    <span class=k>def</span><span class=w> </span><span class=nf>reject_hunk</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>hunk_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-50-24><a id=__codelineno-50-24 name=__codelineno-50-24 href=#__codelineno-50-24></a>    <span class=k>def</span><span class=w> </span><span class=nf>accept_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-50-25><a id=__codelineno-50-25 name=__codelineno-50-25 href=#__codelineno-50-25></a>    <span class=k>def</span><span class=w> </span><span class=nf>reject_file</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-50-26><a id=__codelineno-50-26 name=__codelineno-50-26 href=#__codelineno-50-26></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>apply_accepted</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>  <span class=c1># Returns applied files</span>
</span></code></pre></div> <h4 id=ui-components_5>UI Components<a class=headerlink href=#ui-components_5 title="Permanent link">&para;</a></h4> <p><strong>1. Review Screen (Modal)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>  Code Review: 3 files changed                        []  
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a> Files:                                                       
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a>    src/auth/handler.py (2 hunks)                           
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a>    src/auth/jwt.py (new file)                              
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a>    tests/test_auth.py (1 hunk)                             
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a>
</span><span id=__span-51-9><a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a> src/auth/handler.py                                          
</span><span id=__span-51-10><a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a>  
</span><span id=__span-51-11><a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a> Hunk 1/2:                                    [Accept] [Reject]
</span><span id=__span-51-12><a id=__codelineno-51-12 name=__codelineno-51-12 href=#__codelineno-51-12></a> @@ -45,6 +45,10 @@                                           
</span><span id=__span-51-13><a id=__codelineno-51-13 name=__codelineno-51-13 href=#__codelineno-51-13></a>    def verify_token(token: str) -&gt; bool:                    
</span><span id=__span-51-14><a id=__codelineno-51-14 name=__codelineno-51-14 href=#__codelineno-51-14></a> -      return decode(token) is not None                     
</span><span id=__span-51-15><a id=__codelineno-51-15 name=__codelineno-51-15 href=#__codelineno-51-15></a> +      if is_expired(token):                                
</span><span id=__span-51-16><a id=__codelineno-51-16 name=__codelineno-51-16 href=#__codelineno-51-16></a> +          return refresh_token_flow()                      
</span><span id=__span-51-17><a id=__codelineno-51-17 name=__codelineno-51-17 href=#__codelineno-51-17></a> +      return decode(token) is not None                     
</span><span id=__span-51-18><a id=__codelineno-51-18 name=__codelineno-51-18 href=#__codelineno-51-18></a>                                                              
</span><span id=__span-51-19><a id=__codelineno-51-19 name=__codelineno-51-19 href=#__codelineno-51-19></a> Rationale: Added token expiration check with refresh flow   
</span><span id=__span-51-20><a id=__codelineno-51-20 name=__codelineno-51-20 href=#__codelineno-51-20></a>
</span><span id=__span-51-21><a id=__codelineno-51-21 name=__codelineno-51-21 href=#__codelineno-51-21></a>          [Accept All] [Reject All] [Apply Selected]          
</span><span id=__span-51-22><a id=__codelineno-51-22 name=__codelineno-51-22 href=#__codelineno-51-22></a>
</span></code></pre></div></p> <p><strong>2. Inline Review (in AI Block)</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>  AI Response                                               
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a> I&#39;ll add JWT refresh token support. Here are my changes:    
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a>                                                              
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a>  
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a>   src/auth/handler.py              [Preview] [Accept]   
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a>     +10 lines, -2 lines                                   
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a>  
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a>  
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a>   src/auth/jwt.py (new)            [Preview] [Accept]   
</span><span id=__span-52-12><a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a>     +120 lines                                            
</span><span id=__span-52-13><a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a>  
</span><span id=__span-52-14><a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a>                                                              
</span><span id=__span-52-15><a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a>                              [Review All] [Accept All]       
</span><span id=__span-52-16><a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a>
</span></code></pre></div></p> <h4 id=keyboard-shortcuts_2>Keyboard Shortcuts<a class=headerlink href=#keyboard-shortcuts_2 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Shortcut</th> <th>Action</th> </tr> </thead> <tbody> <tr> <td><code>a</code></td> <td>Accept current hunk</td> </tr> <tr> <td><code>r</code></td> <td>Reject current hunk</td> </tr> <tr> <td><code>j/k</code></td> <td>Navigate hunks</td> </tr> <tr> <td><code>Tab</code></td> <td>Switch files</td> </tr> <tr> <td><code>A</code></td> <td>Accept all</td> </tr> <tr> <td><code>Enter</code></td> <td>Apply selected</td> </tr> </tbody> </table> <h4 id=configuration_6>Configuration<a class=headerlink href=#configuration_6 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=p>{</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=w>  </span><span class=nt>&quot;review&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=w>    </span><span class=nt>&quot;require_review&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;destructive&quot;</span><span class=p>,</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=w>    </span><span class=nt>&quot;auto_accept_additions&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a><span class=w>    </span><span class=nt>&quot;show_rationale&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=w>    </span><span class=nt>&quot;syntax_highlighting&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-53-9><a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_8>Implementation Steps<a class=headerlink href=#implementation-steps_8 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>ProposedChange</code> and <code>DiffHunk</code> models</li> <li>Implement <code>ReviewManager</code></li> <li>Hook into <code>write_file</code> tool to propose instead of write</li> <li>Build <code>ReviewScreen</code> modal</li> <li>Add inline preview to AI blocks</li> <li>Implement hunk-level accept/reject</li> <li>Add syntax highlighting to diff view</li> <li>Testing</li> </ol> <h4 id=effort-estimate_8>Effort Estimate<a class=headerlink href=#effort-estimate_8 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>ReviewManager: 1 day</li> <li>write_file integration: 0.5 days</li> <li>ReviewScreen: 1.5 days</li> <li>Inline preview: 1 day</li> <li>Hunk navigation: 0.5 days</li> <li>Syntax highlighting: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=10-error-auto-correction-loop>10. Error Auto-Correction Loop<a class=headerlink href=#10-error-auto-correction-loop title="Permanent link">&para;</a></h2> <h3 id=overview_9>Overview<a class=headerlink href=#overview_9 title="Permanent link">&para;</a></h3> <p>Monitor terminal output, detect errors, and automatically trigger AI fixes in a loop until success or max iterations.</p> <h3 id=user-story_9>User Story<a class=headerlink href=#user-story_9 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer, I want the AI to automatically fix errors it causes, so I don't have to manually iterate on failures.</p> </blockquote> <h3 id=current-state_9>Current State<a class=headerlink href=#current-state_9 title="Permanent link">&para;</a></h3> <ul> <li>Errors are fed back to AI in agent mode</li> <li>No automatic retry loop</li> <li>No structured error detection</li> </ul> <h3 id=proposed-design_9>Proposed Design<a class=headerlink href=#proposed-design_9 title="Permanent link">&para;</a></h3> <h4 id=architecture_5>Architecture<a class=headerlink href=#architecture_5 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>                   AutoCorrectionLoop                         
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>             
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>    Tool        &gt;  Error       &gt;  Fix            
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>    Execution         Detector          Generator      
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>             
</span><span id=__span-54-8><a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a>                                                            
</span><span id=__span-54-9><a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a>                                            
</span><span id=__span-54-10><a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a>           Verify      &lt;            
</span><span id=__span-54-11><a id=__codelineno-54-11 name=__codelineno-54-11 href=#__codelineno-54-11></a>                          Fix                               
</span><span id=__span-54-12><a id=__codelineno-54-12 name=__codelineno-54-12 href=#__codelineno-54-12></a>                                              
</span><span id=__span-54-13><a id=__codelineno-54-13 name=__codelineno-54-13 href=#__codelineno-54-13></a>
</span></code></pre></div> <h4 id=data-model_5>Data Model<a class=headerlink href=#data-model_5 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=nd>@dataclass</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=k>class</span><span class=w> </span><span class=nc>DetectedError</span><span class=p>:</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>    <span class=nb>type</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;syntax&quot;</span><span class=p>,</span> <span class=s2>&quot;type&quot;</span><span class=p>,</span> <span class=s2>&quot;runtime&quot;</span><span class=p>,</span> <span class=s2>&quot;test&quot;</span><span class=p>,</span> <span class=s2>&quot;lint&quot;</span><span class=p>,</span> <span class=s2>&quot;build&quot;</span><span class=p>]</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a>    <span class=n>file</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>    <span class=n>line</span><span class=p>:</span> <span class=nb>int</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>    <span class=n>message</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a>    <span class=n>full_output</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a>    <span class=n>severity</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;error&quot;</span><span class=p>,</span> <span class=s2>&quot;warning&quot;</span><span class=p>]</span>
</span><span id=__span-55-9><a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>
</span><span id=__span-55-10><a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a><span class=nd>@dataclass</span>
</span><span id=__span-55-11><a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a><span class=k>class</span><span class=w> </span><span class=nc>CorrectionAttempt</span><span class=p>:</span>
</span><span id=__span-55-12><a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a>    <span class=n>error</span><span class=p>:</span> <span class=n>DetectedError</span>
</span><span id=__span-55-13><a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a>    <span class=n>fix_description</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-55-14><a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a>    <span class=n>files_modified</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-55-15><a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>    <span class=n>success</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-55-16><a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a>    <span class=n>verification_output</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-55-17><a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a>
</span><span id=__span-55-18><a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a><span class=k>class</span><span class=w> </span><span class=nc>AutoCorrectionLoop</span><span class=p>:</span>
</span><span id=__span-55-19><a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a>    <span class=n>max_iterations</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span>
</span><span id=__span-55-20><a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a>
</span><span id=__span-55-21><a id=__codelineno-55-21 name=__codelineno-55-21 href=#__codelineno-55-21></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>initial_error</span><span class=p>:</span> <span class=n>DetectedError</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CorrectionResult</span><span class=p>:</span>
</span><span id=__span-55-22><a id=__codelineno-55-22 name=__codelineno-55-22 href=#__codelineno-55-22></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Run correction loop until success or max iterations.&quot;&quot;&quot;</span>
</span><span id=__span-55-23><a id=__codelineno-55-23 name=__codelineno-55-23 href=#__codelineno-55-23></a>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>max_iterations</span><span class=p>):</span>
</span><span id=__span-55-24><a id=__codelineno-55-24 name=__codelineno-55-24 href=#__codelineno-55-24></a>            <span class=n>fix</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>generate_fix</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>
</span><span id=__span-55-25><a id=__codelineno-55-25 name=__codelineno-55-25 href=#__codelineno-55-25></a>            <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>apply_fix</span><span class=p>(</span><span class=n>fix</span><span class=p>)</span>
</span><span id=__span-55-26><a id=__codelineno-55-26 name=__codelineno-55-26 href=#__codelineno-55-26></a>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>verify</span><span class=p>()</span>
</span><span id=__span-55-27><a id=__codelineno-55-27 name=__codelineno-55-27 href=#__codelineno-55-27></a>            <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>success</span><span class=p>:</span>
</span><span id=__span-55-28><a id=__codelineno-55-28 name=__codelineno-55-28 href=#__codelineno-55-28></a>                <span class=k>return</span> <span class=n>CorrectionResult</span><span class=p>(</span><span class=n>success</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>attempts</span><span class=o>=</span><span class=n>i</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-55-29><a id=__codelineno-55-29 name=__codelineno-55-29 href=#__codelineno-55-29></a>            <span class=n>error</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>new_error</span>
</span><span id=__span-55-30><a id=__codelineno-55-30 name=__codelineno-55-30 href=#__codelineno-55-30></a>        <span class=k>return</span> <span class=n>CorrectionResult</span><span class=p>(</span><span class=n>success</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>attempts</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>max_iterations</span><span class=p>)</span>
</span></code></pre></div> <h4 id=error-detection-patterns>Error Detection Patterns<a class=headerlink href=#error-detection-patterns title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=n>ERROR_PATTERNS</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>    <span class=s2>&quot;python_syntax&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;SyntaxError: (.+) \((.+), line (\d+)\)&quot;</span><span class=p>,</span>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a>    <span class=s2>&quot;python_type&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;TypeError: (.+)&quot;</span><span class=p>,</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a>    <span class=s2>&quot;python_import&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;ModuleNotFoundError: No module named &#39;(.+)&#39;&quot;</span><span class=p>,</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a>    <span class=s2>&quot;typescript&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;error TS(\d+): (.+)&quot;</span><span class=p>,</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a>    <span class=s2>&quot;eslint&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;(\d+):(\d+)\s+(error|warning)\s+(.+)&quot;</span><span class=p>,</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a>    <span class=s2>&quot;pytest&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;FAILED (.+)::(.+) - (.+)&quot;</span><span class=p>,</span>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a>    <span class=s2>&quot;ruff&quot;</span><span class=p>:</span> <span class=sa>r</span><span class=s2>&quot;(.+):(\d+):(\d+): (\w+) (.+)&quot;</span><span class=p>,</span>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=p>}</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=k>class</span><span class=w> </span><span class=nc>ErrorDetector</span><span class=p>:</span>
</span><span id=__span-56-12><a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>detect</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>output</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>DetectedError</span><span class=p>]:</span>
</span><span id=__span-56-13><a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Parse command output for errors.&quot;&quot;&quot;</span>
</span><span id=__span-56-14><a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a>        <span class=n>errors</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-56-15><a id=__codelineno-56-15 name=__codelineno-56-15 href=#__codelineno-56-15></a>        <span class=k>for</span> <span class=n>error_type</span><span class=p>,</span> <span class=n>pattern</span> <span class=ow>in</span> <span class=n>ERROR_PATTERNS</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-56-16><a id=__codelineno-56-16 name=__codelineno-56-16 href=#__codelineno-56-16></a>            <span class=n>matches</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>findall</span><span class=p>(</span><span class=n>pattern</span><span class=p>,</span> <span class=n>output</span><span class=p>)</span>
</span><span id=__span-56-17><a id=__codelineno-56-17 name=__codelineno-56-17 href=#__codelineno-56-17></a>            <span class=k>for</span> <span class=n>match</span> <span class=ow>in</span> <span class=n>matches</span><span class=p>:</span>
</span><span id=__span-56-18><a id=__codelineno-56-18 name=__codelineno-56-18 href=#__codelineno-56-18></a>                <span class=n>errors</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_parse_match</span><span class=p>(</span><span class=n>error_type</span><span class=p>,</span> <span class=n>match</span><span class=p>))</span>
</span><span id=__span-56-19><a id=__codelineno-56-19 name=__codelineno-56-19 href=#__codelineno-56-19></a>        <span class=k>return</span> <span class=n>errors</span>
</span></code></pre></div> <h4 id=ui-components_6>UI Components<a class=headerlink href=#ui-components_6 title="Permanent link">&para;</a></h4> <p><strong>1. Correction Loop Block</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>  Auto-Correction Loop                              [Stop]  
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a> Error: TypeError: &#39;NoneType&#39; has no attribute &#39;split&#39;       
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a> File: src/parser.py:45                                       
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>  
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a> Attempt 1/5:                                                 
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a>    Added null check before split                           
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>    Verification failed: New error on line 52               
</span><span id=__span-57-10><a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a>                                                              
</span><span id=__span-57-11><a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a> Attempt 2/5:                                                 
</span><span id=__span-57-12><a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a>    Generating fix...                                       
</span><span id=__span-57-13><a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>  
</span><span id=__span-57-14><a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a> Progress:  40%                          
</span><span id=__span-57-15><a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a>
</span></code></pre></div></p> <p><strong>2. Verification Commands</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=n>VERIFICATION_COMMANDS</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>    <span class=s2>&quot;python&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;python -m py_compile </span><span class=si>{file}</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;ruff check </span><span class=si>{file}</span><span class=s2>&quot;</span><span class=p>],</span>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a>    <span class=s2>&quot;typescript&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;tsc --noEmit </span><span class=si>{file}</span><span class=s2>&quot;</span><span class=p>],</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a>    <span class=s2>&quot;javascript&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;eslint </span><span class=si>{file}</span><span class=s2>&quot;</span><span class=p>],</span>
</span><span id=__span-58-5><a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a>    <span class=s2>&quot;rust&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;cargo check&quot;</span><span class=p>],</span>
</span><span id=__span-58-6><a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=p>}</span>
</span></code></pre></div></p> <h4 id=commands_4>Commands<a class=headerlink href=#commands_4 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/fix</code></td> <td>Start auto-correction for last error</td> </tr> <tr> <td><code>/fix &lt;error&gt;</code></td> <td>Fix specific error message</td> </tr> <tr> <td><code>/watch</code></td> <td>Monitor output and auto-fix errors</td> </tr> <tr> <td><code>/watch stop</code></td> <td>Stop watching</td> </tr> </tbody> </table> <h4 id=configuration_7>Configuration<a class=headerlink href=#configuration_7 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=p>{</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=w>  </span><span class=nt>&quot;auto_correction&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=w>    </span><span class=nt>&quot;max_iterations&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=w>    </span><span class=nt>&quot;auto_start&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=w>    </span><span class=nt>&quot;verification_commands&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=w>      </span><span class=nt>&quot;python&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;ruff check {file}&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;python -m py_compile {file}&quot;</span><span class=p>],</span>
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=w>      </span><span class=nt>&quot;typescript&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;tsc --noEmit&quot;</span><span class=p>]</span>
</span><span id=__span-59-9><a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-59-10><a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a><span class=w>    </span><span class=nt>&quot;pause_on_warning&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-59-11><a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-59-12><a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_9>Implementation Steps<a class=headerlink href=#implementation-steps_9 title="Permanent link">&para;</a></h4> <ol> <li>Create error detection patterns</li> <li>Implement <code>ErrorDetector</code></li> <li>Build <code>AutoCorrectionLoop</code></li> <li>Create verification command runner</li> <li>Build <code>CorrectionLoopBlock</code> widget</li> <li>Integrate with agent mode</li> <li>Add <code>/watch</code> command</li> <li>Testing</li> </ol> <h4 id=effort-estimate_9>Effort Estimate<a class=headerlink href=#effort-estimate_9 title="Permanent link">&para;</a></h4> <ul> <li>Error patterns: 0.5 days</li> <li>ErrorDetector: 1 day</li> <li>AutoCorrectionLoop: 1.5 days</li> <li>Verification runner: 0.5 days</li> <li>UI widget: 1 day</li> <li>Agent integration: 0.5 days</li> <li>Watch mode: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=11-background-agents>11. Background Agents<a class=headerlink href=#11-background-agents title="Permanent link">&para;</a></h2> <h3 id=overview_10>Overview<a class=headerlink href=#overview_10 title="Permanent link">&para;</a></h3> <p>Run AI agents in the background, allowing users to continue working while agents handle long-running tasks.</p> <h3 id=user-story_10>User Story<a class=headerlink href=#user-story_10 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer, I want to start an AI task and continue working, getting notified when it's done.</p> </blockquote> <h3 id=current-state_10>Current State<a class=headerlink href=#current-state_10 title="Permanent link">&para;</a></h3> <ul> <li>Agent mode blocks the UI during execution</li> <li>No background task queue</li> <li>No notification system for completed tasks</li> </ul> <h3 id=proposed-design_10>Proposed Design<a class=headerlink href=#proposed-design_10 title="Permanent link">&para;</a></h3> <h4 id=architecture_6>Architecture<a class=headerlink href=#architecture_6 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>                  BackgroundAgentManager                      
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a>             
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a>    Task Queue  &gt;  Agent       &gt;  Result         
</span><span id=__span-60-6><a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a>                      Worker            Handler        
</span><span id=__span-60-7><a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a>             
</span><span id=__span-60-8><a id=__codelineno-60-8 name=__codelineno-60-8 href=#__codelineno-60-8></a>                                                           
</span><span id=__span-60-9><a id=__codelineno-60-9 name=__codelineno-60-9 href=#__codelineno-60-9></a>                                             
</span><span id=__span-60-10><a id=__codelineno-60-10 name=__codelineno-60-10 href=#__codelineno-60-10></a>                      Progress                            
</span><span id=__span-60-11><a id=__codelineno-60-11 name=__codelineno-60-11 href=#__codelineno-60-11></a>                      Reporter                            
</span><span id=__span-60-12><a id=__codelineno-60-12 name=__codelineno-60-12 href=#__codelineno-60-12></a>                                             
</span><span id=__span-60-13><a id=__codelineno-60-13 name=__codelineno-60-13 href=#__codelineno-60-13></a>                                                           
</span><span id=__span-60-14><a id=__codelineno-60-14 name=__codelineno-60-14 href=#__codelineno-60-14></a>                                             
</span><span id=__span-60-15><a id=__codelineno-60-15 name=__codelineno-60-15 href=#__codelineno-60-15></a>          Notification&lt;            
</span><span id=__span-60-16><a id=__codelineno-60-16 name=__codelineno-60-16 href=#__codelineno-60-16></a>                       System                               
</span><span id=__span-60-17><a id=__codelineno-60-17 name=__codelineno-60-17 href=#__codelineno-60-17></a>                                               
</span><span id=__span-60-18><a id=__codelineno-60-18 name=__codelineno-60-18 href=#__codelineno-60-18></a>
</span></code></pre></div> <h4 id=data-model_6>Data Model<a class=headerlink href=#data-model_6 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=nd>@dataclass</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=k>class</span><span class=w> </span><span class=nc>BackgroundTask</span><span class=p>:</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a>    <span class=n>goal</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a>    <span class=n>status</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;queued&quot;</span><span class=p>,</span> <span class=s2>&quot;running&quot;</span><span class=p>,</span> <span class=s2>&quot;completed&quot;</span><span class=p>,</span> <span class=s2>&quot;failed&quot;</span><span class=p>,</span> <span class=s2>&quot;cancelled&quot;</span><span class=p>]</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a>    <span class=n>progress</span><span class=p>:</span> <span class=nb>float</span>  <span class=c1># 0.0 - 1.0</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a>    <span class=n>started_at</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-61-8><a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a>    <span class=n>completed_at</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-61-9><a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a>    <span class=n>result</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-61-10><a id=__codelineno-61-10 name=__codelineno-61-10 href=#__codelineno-61-10></a>    <span class=n>error</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-61-11><a id=__codelineno-61-11 name=__codelineno-61-11 href=#__codelineno-61-11></a>    <span class=n>logs</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-61-12><a id=__codelineno-61-12 name=__codelineno-61-12 href=#__codelineno-61-12></a>
</span><span id=__span-61-13><a id=__codelineno-61-13 name=__codelineno-61-13 href=#__codelineno-61-13></a><span class=k>class</span><span class=w> </span><span class=nc>BackgroundAgentManager</span><span class=p>:</span>
</span><span id=__span-61-14><a id=__codelineno-61-14 name=__codelineno-61-14 href=#__codelineno-61-14></a>    <span class=n>tasks</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>BackgroundTask</span><span class=p>]</span>
</span><span id=__span-61-15><a id=__codelineno-61-15 name=__codelineno-61-15 href=#__codelineno-61-15></a>    <span class=n>max_concurrent</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>3</span>
</span><span id=__span-61-16><a id=__codelineno-61-16 name=__codelineno-61-16 href=#__codelineno-61-16></a>
</span><span id=__span-61-17><a id=__codelineno-61-17 name=__codelineno-61-17 href=#__codelineno-61-17></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>spawn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>goal</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BackgroundTask</span>
</span><span id=__span-61-18><a id=__codelineno-61-18 name=__codelineno-61-18 href=#__codelineno-61-18></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>cancel</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span>
</span><span id=__span-61-19><a id=__codelineno-61-19 name=__codelineno-61-19 href=#__codelineno-61-19></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_status</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>task_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BackgroundTask</span>
</span><span id=__span-61-20><a id=__codelineno-61-20 name=__codelineno-61-20 href=#__codelineno-61-20></a>    <span class=k>def</span><span class=w> </span><span class=nf>list_tasks</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>BackgroundTask</span><span class=p>]</span>
</span></code></pre></div> <h4 id=ui-components_7>UI Components<a class=headerlink href=#ui-components_7 title="Permanent link">&para;</a></h4> <p><strong>1. Background Tasks Sidebar</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>  Background Tasks 
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a>  Refactoring auth  
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a>    80%    
</span><span id=__span-62-6><a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a>                     
</span><span id=__span-62-7><a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a>  Running tests     
</span><span id=__span-62-8><a id=__codelineno-62-8 name=__codelineno-62-8 href=#__codelineno-62-8></a>    20%    
</span><span id=__span-62-9><a id=__codelineno-62-9 name=__codelineno-62-9 href=#__codelineno-62-9></a>                     
</span><span id=__span-62-10><a id=__codelineno-62-10 name=__codelineno-62-10 href=#__codelineno-62-10></a>  Code review       
</span><span id=__span-62-11><a id=__codelineno-62-11 name=__codelineno-62-11 href=#__codelineno-62-11></a>   Completed 5m ago  
</span><span id=__span-62-12><a id=__codelineno-62-12 name=__codelineno-62-12 href=#__codelineno-62-12></a>
</span><span id=__span-62-13><a id=__codelineno-62-13 name=__codelineno-62-13 href=#__codelineno-62-13></a> [+ New Task]        
</span><span id=__span-62-14><a id=__codelineno-62-14 name=__codelineno-62-14 href=#__codelineno-62-14></a>
</span></code></pre></div></p> <p><strong>2. Task Detail Block</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>  Background Task: Refactoring auth module          [Stop]  
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a> Status: Running (3/5 steps)                                  
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a> Progress:  80%                          
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>  
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a> Log:                                                         
</span><span id=__span-63-8><a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a>   [10:30:01] Reading src/auth/handler.py                    
</span><span id=__span-63-9><a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a>   [10:30:05] Analyzing authentication flow                  
</span><span id=__span-63-10><a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a>   [10:30:15] Writing new implementation                     
</span><span id=__span-63-11><a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a>   [10:30:20]  Running verification...                      
</span><span id=__span-63-12><a id=__codelineno-63-12 name=__codelineno-63-12 href=#__codelineno-63-12></a>  
</span><span id=__span-63-13><a id=__codelineno-63-13 name=__codelineno-63-13 href=#__codelineno-63-13></a>                              [View Result] [Cancel]          
</span><span id=__span-63-14><a id=__codelineno-63-14 name=__codelineno-63-14 href=#__codelineno-63-14></a>
</span></code></pre></div></p> <p><strong>3. Notification Toast</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a>  Background task completed: &quot;Refactoring auth module&quot;      
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>                                            [View] [Dismiss]  
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a>
</span></code></pre></div></p> <h4 id=commands_5>Commands<a class=headerlink href=#commands_5 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/bg &lt;goal&gt;</code></td> <td>Start background agent with goal</td> </tr> <tr> <td><code>/bg list</code></td> <td>List all background tasks</td> </tr> <tr> <td><code>/bg status &lt;id&gt;</code></td> <td>Show task status</td> </tr> <tr> <td><code>/bg cancel &lt;id&gt;</code></td> <td>Cancel running task</td> </tr> <tr> <td><code>/bg logs &lt;id&gt;</code></td> <td>Show task logs</td> </tr> </tbody> </table> <h4 id=keyboard-shortcuts_3>Keyboard Shortcuts<a class=headerlink href=#keyboard-shortcuts_3 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Shortcut</th> <th>Action</th> </tr> </thead> <tbody> <tr> <td><code>Ctrl+Shift+B</code></td> <td>Open background tasks sidebar</td> </tr> <tr> <td><code>Ctrl+Shift+N</code></td> <td>Start new background task</td> </tr> </tbody> </table> <h4 id=configuration_8>Configuration<a class=headerlink href=#configuration_8 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=p>{</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a><span class=w>  </span><span class=nt>&quot;background_agents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=w>    </span><span class=nt>&quot;max_concurrent&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a><span class=w>    </span><span class=nt>&quot;notify_on_complete&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-65-6><a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a><span class=w>    </span><span class=nt>&quot;notify_on_error&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-65-7><a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a><span class=w>    </span><span class=nt>&quot;auto_open_result&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-65-8><a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a><span class=w>    </span><span class=nt>&quot;log_retention&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;7d&quot;</span>
</span><span id=__span-65-9><a id=__codelineno-65-9 name=__codelineno-65-9 href=#__codelineno-65-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-65-10><a id=__codelineno-65-10 name=__codelineno-65-10 href=#__codelineno-65-10></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_10>Implementation Steps<a class=headerlink href=#implementation-steps_10 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>BackgroundTask</code> data model</li> <li>Implement <code>BackgroundAgentManager</code></li> <li>Build task queue with asyncio</li> <li>Create background tasks sidebar widget</li> <li>Implement notification system</li> <li>Build task detail block</li> <li>Add progress reporting</li> <li>Testing</li> </ol> <h4 id=effort-estimate_10>Effort Estimate<a class=headerlink href=#effort-estimate_10 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>BackgroundAgentManager: 1.5 days</li> <li>Task queue: 1 day</li> <li>Sidebar widget: 1 day</li> <li>Notifications: 0.5 days</li> <li>Task detail block: 0.5 days</li> <li>Progress reporting: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=12-multi-agent-orchestration>12. Multi-Agent Orchestration<a class=headerlink href=#12-multi-agent-orchestration title="Permanent link">&para;</a></h2> <h3 id=overview_11>Overview<a class=headerlink href=#overview_11 title="Permanent link">&para;</a></h3> <p>Multiple specialized agents working concurrently on different aspects of a task (planning, coding, testing, reviewing).</p> <h3 id=user-story_11>User Story<a class=headerlink href=#user-story_11 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer with complex tasks, I want specialized AI agents to collaborate, each handling what they're best at.</p> </blockquote> <h3 id=current-state_11>Current State<a class=headerlink href=#current-state_11 title="Permanent link">&para;</a></h3> <ul> <li>Single agent handles all tasks</li> <li>No specialization or delegation</li> <li>Sequential execution only</li> </ul> <h3 id=proposed-design_11>Proposed Design<a class=headerlink href=#proposed-design_11 title="Permanent link">&para;</a></h3> <h4 id=architecture_7>Architecture<a class=headerlink href=#architecture_7 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>                   AgentOrchestrator                          
</span><span id=__span-66-3><a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a>
</span><span id=__span-66-4><a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a>                                              
</span><span id=__span-66-5><a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a>                      Coordinator                           
</span><span id=__span-66-6><a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a>                      Agent                                 
</span><span id=__span-66-7><a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a>                                              
</span><span id=__span-66-8><a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a>                             
</span><span id=__span-66-9><a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a>                                                           
</span><span id=__span-66-10><a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a>             
</span><span id=__span-66-11><a id=__codelineno-66-11 name=__codelineno-66-11 href=#__codelineno-66-11></a>    Planner        Coder          Reviewer             
</span><span id=__span-66-12><a id=__codelineno-66-12 name=__codelineno-66-12 href=#__codelineno-66-12></a>    Agent          Agent          Agent                
</span><span id=__span-66-13><a id=__codelineno-66-13 name=__codelineno-66-13 href=#__codelineno-66-13></a>             
</span><span id=__span-66-14><a id=__codelineno-66-14 name=__codelineno-66-14 href=#__codelineno-66-14></a>                                                           
</span><span id=__span-66-15><a id=__codelineno-66-15 name=__codelineno-66-15 href=#__codelineno-66-15></a>                             
</span><span id=__span-66-16><a id=__codelineno-66-16 name=__codelineno-66-16 href=#__codelineno-66-16></a>                                                             
</span><span id=__span-66-17><a id=__codelineno-66-17 name=__codelineno-66-17 href=#__codelineno-66-17></a>                                              
</span><span id=__span-66-18><a id=__codelineno-66-18 name=__codelineno-66-18 href=#__codelineno-66-18></a>                      Result                                
</span><span id=__span-66-19><a id=__codelineno-66-19 name=__codelineno-66-19 href=#__codelineno-66-19></a>                      Aggregator                            
</span><span id=__span-66-20><a id=__codelineno-66-20 name=__codelineno-66-20 href=#__codelineno-66-20></a>                                              
</span><span id=__span-66-21><a id=__codelineno-66-21 name=__codelineno-66-21 href=#__codelineno-66-21></a>
</span></code></pre></div> <h4 id=agent-profiles>Agent Profiles<a class=headerlink href=#agent-profiles title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=nd>@dataclass</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a><span class=k>class</span><span class=w> </span><span class=nc>AgentProfile</span><span class=p>:</span>
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a>    <span class=n>role</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>    <span class=n>system_prompt</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a>    <span class=n>tools</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a>    <span class=n>model</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>  <span class=c1># Override default model</span>
</span><span id=__span-67-8><a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a>    <span class=n>temperature</span><span class=p>:</span> <span class=nb>float</span>
</span><span id=__span-67-9><a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a>
</span><span id=__span-67-10><a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a><span class=n>BUILTIN_PROFILES</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-67-11><a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a>    <span class=s2>&quot;planner&quot;</span><span class=p>:</span> <span class=n>AgentProfile</span><span class=p>(</span>
</span><span id=__span-67-12><a id=__codelineno-67-12 name=__codelineno-67-12 href=#__codelineno-67-12></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Planner&quot;</span><span class=p>,</span>
</span><span id=__span-67-13><a id=__codelineno-67-13 name=__codelineno-67-13 href=#__codelineno-67-13></a>        <span class=n>role</span><span class=o>=</span><span class=s2>&quot;Break down tasks into steps&quot;</span><span class=p>,</span>
</span><span id=__span-67-14><a id=__codelineno-67-14 name=__codelineno-67-14 href=#__codelineno-67-14></a>        <span class=n>system_prompt</span><span class=o>=</span><span class=s2>&quot;You are a planning specialist...&quot;</span><span class=p>,</span>
</span><span id=__span-67-15><a id=__codelineno-67-15 name=__codelineno-67-15 href=#__codelineno-67-15></a>        <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;read_file&quot;</span><span class=p>,</span> <span class=s2>&quot;list_files&quot;</span><span class=p>],</span>
</span><span id=__span-67-16><a id=__codelineno-67-16 name=__codelineno-67-16 href=#__codelineno-67-16></a>        <span class=n>temperature</span><span class=o>=</span><span class=mf>0.7</span>
</span><span id=__span-67-17><a id=__codelineno-67-17 name=__codelineno-67-17 href=#__codelineno-67-17></a>    <span class=p>),</span>
</span><span id=__span-67-18><a id=__codelineno-67-18 name=__codelineno-67-18 href=#__codelineno-67-18></a>    <span class=s2>&quot;coder&quot;</span><span class=p>:</span> <span class=n>AgentProfile</span><span class=p>(</span>
</span><span id=__span-67-19><a id=__codelineno-67-19 name=__codelineno-67-19 href=#__codelineno-67-19></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Coder&quot;</span><span class=p>,</span> 
</span><span id=__span-67-20><a id=__codelineno-67-20 name=__codelineno-67-20 href=#__codelineno-67-20></a>        <span class=n>role</span><span class=o>=</span><span class=s2>&quot;Write and modify code&quot;</span><span class=p>,</span>
</span><span id=__span-67-21><a id=__codelineno-67-21 name=__codelineno-67-21 href=#__codelineno-67-21></a>        <span class=n>system_prompt</span><span class=o>=</span><span class=s2>&quot;You are an expert programmer...&quot;</span><span class=p>,</span>
</span><span id=__span-67-22><a id=__codelineno-67-22 name=__codelineno-67-22 href=#__codelineno-67-22></a>        <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;read_file&quot;</span><span class=p>,</span> <span class=s2>&quot;write_file&quot;</span><span class=p>,</span> <span class=s2>&quot;run_command&quot;</span><span class=p>],</span>
</span><span id=__span-67-23><a id=__codelineno-67-23 name=__codelineno-67-23 href=#__codelineno-67-23></a>        <span class=n>temperature</span><span class=o>=</span><span class=mf>0.3</span>
</span><span id=__span-67-24><a id=__codelineno-67-24 name=__codelineno-67-24 href=#__codelineno-67-24></a>    <span class=p>),</span>
</span><span id=__span-67-25><a id=__codelineno-67-25 name=__codelineno-67-25 href=#__codelineno-67-25></a>    <span class=s2>&quot;reviewer&quot;</span><span class=p>:</span> <span class=n>AgentProfile</span><span class=p>(</span>
</span><span id=__span-67-26><a id=__codelineno-67-26 name=__codelineno-67-26 href=#__codelineno-67-26></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Reviewer&quot;</span><span class=p>,</span>
</span><span id=__span-67-27><a id=__codelineno-67-27 name=__codelineno-67-27 href=#__codelineno-67-27></a>        <span class=n>role</span><span class=o>=</span><span class=s2>&quot;Review code for issues&quot;</span><span class=p>,</span>
</span><span id=__span-67-28><a id=__codelineno-67-28 name=__codelineno-67-28 href=#__codelineno-67-28></a>        <span class=n>system_prompt</span><span class=o>=</span><span class=s2>&quot;You are a code review expert...&quot;</span><span class=p>,</span>
</span><span id=__span-67-29><a id=__codelineno-67-29 name=__codelineno-67-29 href=#__codelineno-67-29></a>        <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;read_file&quot;</span><span class=p>],</span>
</span><span id=__span-67-30><a id=__codelineno-67-30 name=__codelineno-67-30 href=#__codelineno-67-30></a>        <span class=n>temperature</span><span class=o>=</span><span class=mf>0.5</span>
</span><span id=__span-67-31><a id=__codelineno-67-31 name=__codelineno-67-31 href=#__codelineno-67-31></a>    <span class=p>),</span>
</span><span id=__span-67-32><a id=__codelineno-67-32 name=__codelineno-67-32 href=#__codelineno-67-32></a>    <span class=s2>&quot;debugger&quot;</span><span class=p>:</span> <span class=n>AgentProfile</span><span class=p>(</span>
</span><span id=__span-67-33><a id=__codelineno-67-33 name=__codelineno-67-33 href=#__codelineno-67-33></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Debugger&quot;</span><span class=p>,</span>
</span><span id=__span-67-34><a id=__codelineno-67-34 name=__codelineno-67-34 href=#__codelineno-67-34></a>        <span class=n>role</span><span class=o>=</span><span class=s2>&quot;Find and fix bugs&quot;</span><span class=p>,</span>
</span><span id=__span-67-35><a id=__codelineno-67-35 name=__codelineno-67-35 href=#__codelineno-67-35></a>        <span class=n>system_prompt</span><span class=o>=</span><span class=s2>&quot;You are a debugging specialist...&quot;</span><span class=p>,</span>
</span><span id=__span-67-36><a id=__codelineno-67-36 name=__codelineno-67-36 href=#__codelineno-67-36></a>        <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;read_file&quot;</span><span class=p>,</span> <span class=s2>&quot;write_file&quot;</span><span class=p>,</span> <span class=s2>&quot;run_command&quot;</span><span class=p>],</span>
</span><span id=__span-67-37><a id=__codelineno-67-37 name=__codelineno-67-37 href=#__codelineno-67-37></a>        <span class=n>temperature</span><span class=o>=</span><span class=mf>0.3</span>
</span><span id=__span-67-38><a id=__codelineno-67-38 name=__codelineno-67-38 href=#__codelineno-67-38></a>    <span class=p>),</span>
</span><span id=__span-67-39><a id=__codelineno-67-39 name=__codelineno-67-39 href=#__codelineno-67-39></a>    <span class=s2>&quot;tester&quot;</span><span class=p>:</span> <span class=n>AgentProfile</span><span class=p>(</span>
</span><span id=__span-67-40><a id=__codelineno-67-40 name=__codelineno-67-40 href=#__codelineno-67-40></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;Tester&quot;</span><span class=p>,</span>
</span><span id=__span-67-41><a id=__codelineno-67-41 name=__codelineno-67-41 href=#__codelineno-67-41></a>        <span class=n>role</span><span class=o>=</span><span class=s2>&quot;Write and run tests&quot;</span><span class=p>,</span>
</span><span id=__span-67-42><a id=__codelineno-67-42 name=__codelineno-67-42 href=#__codelineno-67-42></a>        <span class=n>system_prompt</span><span class=o>=</span><span class=s2>&quot;You are a testing specialist...&quot;</span><span class=p>,</span>
</span><span id=__span-67-43><a id=__codelineno-67-43 name=__codelineno-67-43 href=#__codelineno-67-43></a>        <span class=n>tools</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;read_file&quot;</span><span class=p>,</span> <span class=s2>&quot;write_file&quot;</span><span class=p>,</span> <span class=s2>&quot;run_command&quot;</span><span class=p>],</span>
</span><span id=__span-67-44><a id=__codelineno-67-44 name=__codelineno-67-44 href=#__codelineno-67-44></a>        <span class=n>temperature</span><span class=o>=</span><span class=mf>0.3</span>
</span><span id=__span-67-45><a id=__codelineno-67-45 name=__codelineno-67-45 href=#__codelineno-67-45></a>    <span class=p>)</span>
</span><span id=__span-67-46><a id=__codelineno-67-46 name=__codelineno-67-46 href=#__codelineno-67-46></a><span class=p>}</span>
</span></code></pre></div> <h4 id=orchestration-flow>Orchestration Flow<a class=headerlink href=#orchestration-flow title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=k>class</span><span class=w> </span><span class=nc>AgentOrchestrator</span><span class=p>:</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>execute</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>goal</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>OrchestratedResult</span><span class=p>:</span>
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a>        <span class=c1># 1. Coordinator analyzes goal</span>
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a>        <span class=n>plan</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>coordinator</span><span class=o>.</span><span class=n>analyze</span><span class=p>(</span><span class=n>goal</span><span class=p>)</span>
</span><span id=__span-68-5><a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a>
</span><span id=__span-68-6><a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>        <span class=c1># 2. Assign subtasks to specialized agents</span>
</span><span id=__span-68-7><a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a>        <span class=n>assignments</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>assign_agents</span><span class=p>(</span><span class=n>plan</span><span class=p>)</span>
</span><span id=__span-68-8><a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a>
</span><span id=__span-68-9><a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a>        <span class=c1># 3. Execute in parallel where possible</span>
</span><span id=__span-68-10><a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a>        <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=p>[</span>
</span><span id=__span-68-11><a id=__codelineno-68-11 name=__codelineno-68-11 href=#__codelineno-68-11></a>            <span class=bp>self</span><span class=o>.</span><span class=n>run_agent</span><span class=p>(</span><span class=n>agent</span><span class=p>,</span> <span class=n>task</span><span class=p>)</span>
</span><span id=__span-68-12><a id=__codelineno-68-12 name=__codelineno-68-12 href=#__codelineno-68-12></a>            <span class=k>for</span> <span class=n>agent</span><span class=p>,</span> <span class=n>task</span> <span class=ow>in</span> <span class=n>assignments</span>
</span><span id=__span-68-13><a id=__codelineno-68-13 name=__codelineno-68-13 href=#__codelineno-68-13></a>        <span class=p>])</span>
</span><span id=__span-68-14><a id=__codelineno-68-14 name=__codelineno-68-14 href=#__codelineno-68-14></a>
</span><span id=__span-68-15><a id=__codelineno-68-15 name=__codelineno-68-15 href=#__codelineno-68-15></a>        <span class=c1># 4. Review results</span>
</span><span id=__span-68-16><a id=__codelineno-68-16 name=__codelineno-68-16 href=#__codelineno-68-16></a>        <span class=n>review</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>reviewer</span><span class=o>.</span><span class=n>review</span><span class=p>(</span><span class=n>results</span><span class=p>)</span>
</span><span id=__span-68-17><a id=__codelineno-68-17 name=__codelineno-68-17 href=#__codelineno-68-17></a>
</span><span id=__span-68-18><a id=__codelineno-68-18 name=__codelineno-68-18 href=#__codelineno-68-18></a>        <span class=c1># 5. Aggregate and return</span>
</span><span id=__span-68-19><a id=__codelineno-68-19 name=__codelineno-68-19 href=#__codelineno-68-19></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>aggregate</span><span class=p>(</span><span class=n>results</span><span class=p>,</span> <span class=n>review</span><span class=p>)</span>
</span></code></pre></div> <h4 id=ui-components_8>UI Components<a class=headerlink href=#ui-components_8 title="Permanent link">&para;</a></h4> <p><strong>1. Orchestration View</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a>  Multi-Agent Task: Implement user authentication          
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a>               
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a>   Planner  &gt;  Coder    &gt;  Reviewer         
</span><span id=__span-69-6><a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a>   Done           Working       Pending           
</span><span id=__span-69-7><a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a>               
</span><span id=__span-69-8><a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a>                                                             
</span><span id=__span-69-9><a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a>                                                             
</span><span id=__span-69-10><a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a>                                              
</span><span id=__span-69-11><a id=__codelineno-69-11 name=__codelineno-69-11 href=#__codelineno-69-11></a>                     Tester                              
</span><span id=__span-69-12><a id=__codelineno-69-12 name=__codelineno-69-12 href=#__codelineno-69-12></a>                     Pending                              
</span><span id=__span-69-13><a id=__codelineno-69-13 name=__codelineno-69-13 href=#__codelineno-69-13></a>                                              
</span><span id=__span-69-14><a id=__codelineno-69-14 name=__codelineno-69-14 href=#__codelineno-69-14></a>
</span><span id=__span-69-15><a id=__codelineno-69-15 name=__codelineno-69-15 href=#__codelineno-69-15></a> Current: Coder implementing JWT handler...                   
</span><span id=__span-69-16><a id=__codelineno-69-16 name=__codelineno-69-16 href=#__codelineno-69-16></a>
</span></code></pre></div></p> <p><strong>2. Agent Communication Log</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a>  Agent Communication                                       
</span><span id=__span-70-3><a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a>
</span><span id=__span-70-4><a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a> [Coordinator  Planner]: Break down auth implementation     
</span><span id=__span-70-5><a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a> [Planner  Coordinator]: 5 steps identified                 
</span><span id=__span-70-6><a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a> [Coordinator  Coder]: Implement step 1: JWT module         
</span><span id=__span-70-7><a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a> [Coder  Coordinator]: JWT module complete, 3 files         
</span><span id=__span-70-8><a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a> [Coordinator  Reviewer]: Review JWT implementation         
</span><span id=__span-70-9><a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a>
</span></code></pre></div></p> <h4 id=commands_6>Commands<a class=headerlink href=#commands_6 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/orchestrate &lt;goal&gt;</code></td> <td>Start multi-agent task</td> </tr> <tr> <td><code>/agents</code></td> <td>List available agent profiles</td> </tr> <tr> <td><code>/agents add &lt;name&gt;</code></td> <td>Create custom agent profile</td> </tr> <tr> <td><code>/agents edit &lt;name&gt;</code></td> <td>Edit agent profile</td> </tr> </tbody> </table> <h4 id=configuration_9>Configuration<a class=headerlink href=#configuration_9 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=p>{</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>  </span><span class=nt>&quot;orchestration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-71-3><a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-71-4><a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=w>    </span><span class=nt>&quot;default_agents&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;planner&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;coder&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;reviewer&quot;</span><span class=p>],</span>
</span><span id=__span-71-5><a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=w>    </span><span class=nt>&quot;parallel_execution&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-71-6><a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a><span class=w>    </span><span class=nt>&quot;require_review&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-71-7><a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=w>    </span><span class=nt>&quot;custom_profiles_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;~/.null/agents/&quot;</span>
</span><span id=__span-71-8><a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-71-9><a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_11>Implementation Steps<a class=headerlink href=#implementation-steps_11 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>AgentProfile</code> data model</li> <li>Define built-in agent profiles</li> <li>Implement <code>AgentOrchestrator</code></li> <li>Build coordinator logic</li> <li>Create orchestration view widget</li> <li>Add agent communication logging</li> <li>Implement custom profile management</li> <li>Testing</li> </ol> <h4 id=effort-estimate_11>Effort Estimate<a class=headerlink href=#effort-estimate_11 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>Built-in profiles: 0.5 days</li> <li>AgentOrchestrator: 2 days</li> <li>Coordinator logic: 1.5 days</li> <li>Orchestration view: 1 day</li> <li>Communication log: 0.5 days</li> <li>Custom profiles: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 7 days</strong></li> </ul> <hr> <h2 id=13-natural-language-to-shell>13. Natural Language to Shell<a class=headerlink href=#13-natural-language-to-shell title="Permanent link">&para;</a></h2> <h3 id=overview_12>Overview<a class=headerlink href=#overview_12 title="Permanent link">&para;</a></h3> <p>Translate natural language instructions into shell commands with explanation and confirmation.</p> <h3 id=user-story_12>User Story<a class=headerlink href=#user-story_12 title="Permanent link">&para;</a></h3> <blockquote> <p>As a user who doesn't remember complex CLI syntax, I want to describe what I want in plain English and get the right command.</p> </blockquote> <h3 id=current-state_12>Current State<a class=headerlink href=#current-state_12 title="Permanent link">&para;</a></h3> <ul> <li>Users must know exact command syntax</li> <li>No natural language interpretation for CLI mode</li> <li>AI mode can suggest commands but requires mode switch</li> </ul> <h3 id=proposed-design_12>Proposed Design<a class=headerlink href=#proposed-design_12 title="Permanent link">&para;</a></h3> <h4 id=architecture_8>Architecture<a class=headerlink href=#architecture_8 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a>
</span><span id=__span-72-2><a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a>                   NL2ShellEngine                             
</span><span id=__span-72-3><a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a>
</span><span id=__span-72-4><a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a>             
</span><span id=__span-72-5><a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a>    NL Input    &gt;  Command     &gt;  Confirmation   
</span><span id=__span-72-6><a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a>    Parser            Generator         UI             
</span><span id=__span-72-7><a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a>             
</span><span id=__span-72-8><a id=__codelineno-72-8 name=__codelineno-72-8 href=#__codelineno-72-8></a>                                                             
</span><span id=__span-72-9><a id=__codelineno-72-9 name=__codelineno-72-9 href=#__codelineno-72-9></a>                                               
</span><span id=__span-72-10><a id=__codelineno-72-10 name=__codelineno-72-10 href=#__codelineno-72-10></a>                       Context                              
</span><span id=__span-72-11><a id=__codelineno-72-11 name=__codelineno-72-11 href=#__codelineno-72-11></a>                       Enricher                             
</span><span id=__span-72-12><a id=__codelineno-72-12 name=__codelineno-72-12 href=#__codelineno-72-12></a>                       (cwd, git,                           
</span><span id=__span-72-13><a id=__codelineno-72-13 name=__codelineno-72-13 href=#__codelineno-72-13></a>                        history)                            
</span><span id=__span-72-14><a id=__codelineno-72-14 name=__codelineno-72-14 href=#__codelineno-72-14></a>                                               
</span><span id=__span-72-15><a id=__codelineno-72-15 name=__codelineno-72-15 href=#__codelineno-72-15></a>
</span></code></pre></div> <h4 id=data-model_7>Data Model<a class=headerlink href=#data-model_7 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=nd>@dataclass</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=k>class</span><span class=w> </span><span class=nc>CommandSuggestion</span><span class=p>:</span>
</span><span id=__span-73-3><a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a>    <span class=n>command</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-73-4><a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a>    <span class=n>explanation</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-73-5><a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a>    <span class=n>confidence</span><span class=p>:</span> <span class=nb>float</span>  <span class=c1># 0.0 - 1.0</span>
</span><span id=__span-73-6><a id=__codelineno-73-6 name=__codelineno-73-6 href=#__codelineno-73-6></a>    <span class=n>alternatives</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-73-7><a id=__codelineno-73-7 name=__codelineno-73-7 href=#__codelineno-73-7></a>    <span class=n>warnings</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>  <span class=c1># e.g., &quot;This will delete files&quot;</span>
</span><span id=__span-73-8><a id=__codelineno-73-8 name=__codelineno-73-8 href=#__codelineno-73-8></a>    <span class=n>requires_sudo</span><span class=p>:</span> <span class=nb>bool</span>
</span><span id=__span-73-9><a id=__codelineno-73-9 name=__codelineno-73-9 href=#__codelineno-73-9></a>
</span><span id=__span-73-10><a id=__codelineno-73-10 name=__codelineno-73-10 href=#__codelineno-73-10></a><span class=k>class</span><span class=w> </span><span class=nc>NL2Shell</span><span class=p>:</span>
</span><span id=__span-73-11><a id=__codelineno-73-11 name=__codelineno-73-11 href=#__codelineno-73-11></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>translate</span><span class=p>(</span>
</span><span id=__span-73-12><a id=__codelineno-73-12 name=__codelineno-73-12 href=#__codelineno-73-12></a>        <span class=bp>self</span><span class=p>,</span> 
</span><span id=__span-73-13><a id=__codelineno-73-13 name=__codelineno-73-13 href=#__codelineno-73-13></a>        <span class=n>natural_language</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-73-14><a id=__codelineno-73-14 name=__codelineno-73-14 href=#__codelineno-73-14></a>        <span class=n>context</span><span class=p>:</span> <span class=n>ShellContext</span>
</span><span id=__span-73-15><a id=__codelineno-73-15 name=__codelineno-73-15 href=#__codelineno-73-15></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CommandSuggestion</span><span class=p>:</span>
</span><span id=__span-73-16><a id=__codelineno-73-16 name=__codelineno-73-16 href=#__codelineno-73-16></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Translate NL to shell command.&quot;&quot;&quot;</span>
</span><span id=__span-73-17><a id=__codelineno-73-17 name=__codelineno-73-17 href=#__codelineno-73-17></a>
</span><span id=__span-73-18><a id=__codelineno-73-18 name=__codelineno-73-18 href=#__codelineno-73-18></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>explain</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>command</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-73-19><a id=__codelineno-73-19 name=__codelineno-73-19 href=#__codelineno-73-19></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Explain what a command does.&quot;&quot;&quot;</span>
</span></code></pre></div> <h4 id=context-enrichment>Context Enrichment<a class=headerlink href=#context-enrichment title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=nd>@dataclass</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=k>class</span><span class=w> </span><span class=nc>ShellContext</span><span class=p>:</span>
</span><span id=__span-74-3><a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a>    <span class=n>cwd</span><span class=p>:</span> <span class=n>Path</span>
</span><span id=__span-74-4><a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a>    <span class=n>git_status</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-74-5><a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a>    <span class=n>recent_commands</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-74-6><a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a>    <span class=n>environment</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>
</span><span id=__span-74-7><a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a>    <span class=n>os_info</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-74-8><a id=__codelineno-74-8 name=__codelineno-74-8 href=#__codelineno-74-8></a>    <span class=n>available_tools</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>  <span class=c1># Installed CLIs</span>
</span></code></pre></div> <h4 id=ui-components_9>UI Components<a class=headerlink href=#ui-components_9 title="Permanent link">&para;</a></h4> <p><strong>1. Command Suggestion Inline</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a>
</span><span id=__span-75-2><a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a> $ find large files over 100mb                                
</span><span id=__span-75-3><a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a>
</span><span id=__span-75-4><a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a>  Suggested command:                                        
</span><span id=__span-75-5><a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a>  
</span><span id=__span-75-6><a id=__codelineno-75-6 name=__codelineno-75-6 href=#__codelineno-75-6></a>  find . -type f -size +100M -exec ls -lh {} \;            
</span><span id=__span-75-7><a id=__codelineno-75-7 name=__codelineno-75-7 href=#__codelineno-75-7></a>  
</span><span id=__span-75-8><a id=__codelineno-75-8 name=__codelineno-75-8 href=#__codelineno-75-8></a>                                                              
</span><span id=__span-75-9><a id=__codelineno-75-9 name=__codelineno-75-9 href=#__codelineno-75-9></a> Explanation: Find all files larger than 100MB in current    
</span><span id=__span-75-10><a id=__codelineno-75-10 name=__codelineno-75-10 href=#__codelineno-75-10></a> directory and subdirectories, showing detailed file info.   
</span><span id=__span-75-11><a id=__codelineno-75-11 name=__codelineno-75-11 href=#__codelineno-75-11></a>                                                              
</span><span id=__span-75-12><a id=__codelineno-75-12 name=__codelineno-75-12 href=#__codelineno-75-12></a> Alternatives:                                                
</span><span id=__span-75-13><a id=__codelineno-75-13 name=__codelineno-75-13 href=#__codelineno-75-13></a>    du -ah . | sort -rh | head -20                          
</span><span id=__span-75-14><a id=__codelineno-75-14 name=__codelineno-75-14 href=#__codelineno-75-14></a>    find . -size +100M 2&gt;/dev/null                          
</span><span id=__span-75-15><a id=__codelineno-75-15 name=__codelineno-75-15 href=#__codelineno-75-15></a>                                                              
</span><span id=__span-75-16><a id=__codelineno-75-16 name=__codelineno-75-16 href=#__codelineno-75-16></a>                              [Run] [Edit] [Cancel]           
</span><span id=__span-75-17><a id=__codelineno-75-17 name=__codelineno-75-17 href=#__codelineno-75-17></a>
</span></code></pre></div></p> <p><strong>2. Command Explanation</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a>
</span><span id=__span-76-2><a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a> $ /explain grep -rn &quot;TODO&quot; --include=&quot;*.py&quot;                  
</span><span id=__span-76-3><a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a>
</span><span id=__span-76-4><a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a>  Command Explanation:                                      
</span><span id=__span-76-5><a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a>                                                              
</span><span id=__span-76-6><a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a> grep -rn &quot;TODO&quot; --include=&quot;*.py&quot;                            
</span><span id=__span-76-7><a id=__codelineno-76-7 name=__codelineno-76-7 href=#__codelineno-76-7></a>                                                         
</span><span id=__span-76-8><a id=__codelineno-76-8 name=__codelineno-76-8 href=#__codelineno-76-8></a>                Only search Python files                
</span><span id=__span-76-9><a id=__codelineno-76-9 name=__codelineno-76-9 href=#__codelineno-76-9></a>         Show line numbers                               
</span><span id=__span-76-10><a id=__codelineno-76-10 name=__codelineno-76-10 href=#__codelineno-76-10></a>       Recursive (search subdirectories)                  
</span><span id=__span-76-11><a id=__codelineno-76-11 name=__codelineno-76-11 href=#__codelineno-76-11></a>   Search for text pattern                                 
</span><span id=__span-76-12><a id=__codelineno-76-12 name=__codelineno-76-12 href=#__codelineno-76-12></a>                                                              
</span><span id=__span-76-13><a id=__codelineno-76-13 name=__codelineno-76-13 href=#__codelineno-76-13></a> This searches for &quot;TODO&quot; in all .py files recursively.      
</span><span id=__span-76-14><a id=__codelineno-76-14 name=__codelineno-76-14 href=#__codelineno-76-14></a>
</span></code></pre></div></p> <h4 id=commands_7>Commands<a class=headerlink href=#commands_7 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/cmd &lt;description&gt;</code></td> <td>Translate NL to command</td> </tr> <tr> <td><code>/explain &lt;command&gt;</code></td> <td>Explain a command</td> </tr> <tr> <td><code>/suggest</code></td> <td>Get contextual command suggestions</td> </tr> </tbody> </table> <h4 id=nl-patterns>NL Patterns<a class=headerlink href=#nl-patterns title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=n>NL_PATTERNS</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-77-2><a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a>    <span class=s2>&quot;find files&quot;</span><span class=p>:</span> <span class=s2>&quot;find . -name &#39;</span><span class=si>{pattern}</span><span class=s2>&#39;&quot;</span><span class=p>,</span>
</span><span id=__span-77-3><a id=__codelineno-77-3 name=__codelineno-77-3 href=#__codelineno-77-3></a>    <span class=s2>&quot;find large files&quot;</span><span class=p>:</span> <span class=s2>&quot;find . -type f -size +</span><span class=si>{size}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-77-4><a id=__codelineno-77-4 name=__codelineno-77-4 href=#__codelineno-77-4></a>    <span class=s2>&quot;search for text&quot;</span><span class=p>:</span> <span class=s2>&quot;grep -rn &#39;</span><span class=si>{text}</span><span class=s2>&#39; .&quot;</span><span class=p>,</span>
</span><span id=__span-77-5><a id=__codelineno-77-5 name=__codelineno-77-5 href=#__codelineno-77-5></a>    <span class=s2>&quot;disk usage&quot;</span><span class=p>:</span> <span class=s2>&quot;du -sh *&quot;</span><span class=p>,</span>
</span><span id=__span-77-6><a id=__codelineno-77-6 name=__codelineno-77-6 href=#__codelineno-77-6></a>    <span class=s2>&quot;process list&quot;</span><span class=p>:</span> <span class=s2>&quot;ps aux | grep </span><span class=si>{process}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-77-7><a id=__codelineno-77-7 name=__codelineno-77-7 href=#__codelineno-77-7></a>    <span class=s2>&quot;kill process&quot;</span><span class=p>:</span> <span class=s2>&quot;pkill </span><span class=si>{process}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-77-8><a id=__codelineno-77-8 name=__codelineno-77-8 href=#__codelineno-77-8></a>    <span class=s2>&quot;git undo&quot;</span><span class=p>:</span> <span class=s2>&quot;git checkout -- </span><span class=si>{file}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-77-9><a id=__codelineno-77-9 name=__codelineno-77-9 href=#__codelineno-77-9></a>    <span class=s2>&quot;compress folder&quot;</span><span class=p>:</span> <span class=s2>&quot;tar -czvf </span><span class=si>{name}</span><span class=s2>.tar.gz </span><span class=si>{folder}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-77-10><a id=__codelineno-77-10 name=__codelineno-77-10 href=#__codelineno-77-10></a><span class=p>}</span>
</span></code></pre></div> <h4 id=configuration_10>Configuration<a class=headerlink href=#configuration_10 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=p>{</span>
</span><span id=__span-78-2><a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=w>  </span><span class=nt>&quot;nl2shell&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-78-3><a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-78-4><a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a><span class=w>    </span><span class=nt>&quot;auto_suggest&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-78-5><a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a><span class=w>    </span><span class=nt>&quot;require_confirmation&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-78-6><a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a><span class=w>    </span><span class=nt>&quot;show_explanation&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-78-7><a id=__codelineno-78-7 name=__codelineno-78-7 href=#__codelineno-78-7></a><span class=w>    </span><span class=nt>&quot;show_alternatives&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-78-8><a id=__codelineno-78-8 name=__codelineno-78-8 href=#__codelineno-78-8></a><span class=w>    </span><span class=nt>&quot;warn_destructive&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-78-9><a id=__codelineno-78-9 name=__codelineno-78-9 href=#__codelineno-78-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-78-10><a id=__codelineno-78-10 name=__codelineno-78-10 href=#__codelineno-78-10></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_12>Implementation Steps<a class=headerlink href=#implementation-steps_12 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>CommandSuggestion</code> model</li> <li>Implement <code>NL2Shell</code> engine</li> <li>Build context enricher</li> <li>Create suggestion UI widget</li> <li>Implement command explanation</li> <li>Add common NL patterns</li> <li>Integrate with CLI input</li> <li>Testing</li> </ol> <h4 id=effort-estimate_12>Effort Estimate<a class=headerlink href=#effort-estimate_12 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>NL2Shell engine: 1.5 days</li> <li>Context enricher: 0.5 days</li> <li>Suggestion UI: 1 day</li> <li>Command explanation: 0.5 days</li> <li>NL patterns: 0.5 days</li> <li>CLI integration: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 5 days</strong></li> </ul> <hr> <h2 id=14-architecture-mapping-map>14. Architecture Mapping (<code>/map</code>)<a class=headerlink href=#14-architecture-mapping-map title="Permanent link">&para;</a></h2> <h3 id=overview_13>Overview<a class=headerlink href=#overview_13 title="Permanent link">&para;</a></h3> <p>Generate visual project architecture diagrams showing file structure, dependencies, and component relationships.</p> <h3 id=user-story_13>User Story<a class=headerlink href=#user-story_13 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer new to a codebase, I want to quickly understand the project structure and how components connect.</p> </blockquote> <h3 id=current-state_13>Current State<a class=headerlink href=#current-state_13 title="Permanent link">&para;</a></h3> <ul> <li>File tree in sidebar shows structure</li> <li>No dependency visualization</li> <li>No component relationship mapping</li> </ul> <h3 id=proposed-design_13>Proposed Design<a class=headerlink href=#proposed-design_13 title="Permanent link">&para;</a></h3> <h4 id=architecture_9>Architecture<a class=headerlink href=#architecture_9 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-79-1><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a>
</span><span id=__span-79-2><a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a>                   ArchitectureMapper                         
</span><span id=__span-79-3><a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a>
</span><span id=__span-79-4><a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a>             
</span><span id=__span-79-5><a id=__codelineno-79-5 name=__codelineno-79-5 href=#__codelineno-79-5></a>    File        &gt;  Dependency  &gt;  Diagram        
</span><span id=__span-79-6><a id=__codelineno-79-6 name=__codelineno-79-6 href=#__codelineno-79-6></a>    Scanner           Analyzer          Generator      
</span><span id=__span-79-7><a id=__codelineno-79-7 name=__codelineno-79-7 href=#__codelineno-79-7></a>             
</span><span id=__span-79-8><a id=__codelineno-79-8 name=__codelineno-79-8 href=#__codelineno-79-8></a>                                                             
</span><span id=__span-79-9><a id=__codelineno-79-9 name=__codelineno-79-9 href=#__codelineno-79-9></a>                                               
</span><span id=__span-79-10><a id=__codelineno-79-10 name=__codelineno-79-10 href=#__codelineno-79-10></a>                       Import/Call                          
</span><span id=__span-79-11><a id=__codelineno-79-11 name=__codelineno-79-11 href=#__codelineno-79-11></a>                       Graph                                
</span><span id=__span-79-12><a id=__codelineno-79-12 name=__codelineno-79-12 href=#__codelineno-79-12></a>                                               
</span><span id=__span-79-13><a id=__codelineno-79-13 name=__codelineno-79-13 href=#__codelineno-79-13></a>
</span></code></pre></div> <h4 id=data-model_8>Data Model<a class=headerlink href=#data-model_8 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-80-1><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=nd>@dataclass</span>
</span><span id=__span-80-2><a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a><span class=k>class</span><span class=w> </span><span class=nc>Component</span><span class=p>:</span>
</span><span id=__span-80-3><a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-80-4><a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a>    <span class=n>path</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-80-5><a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a>    <span class=nb>type</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;module&quot;</span><span class=p>,</span> <span class=s2>&quot;class&quot;</span><span class=p>,</span> <span class=s2>&quot;function&quot;</span><span class=p>,</span> <span class=s2>&quot;file&quot;</span><span class=p>,</span> <span class=s2>&quot;directory&quot;</span><span class=p>]</span>
</span><span id=__span-80-6><a id=__codelineno-80-6 name=__codelineno-80-6 href=#__codelineno-80-6></a>    <span class=n>imports</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-80-7><a id=__codelineno-80-7 name=__codelineno-80-7 href=#__codelineno-80-7></a>    <span class=n>exports</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-80-8><a id=__codelineno-80-8 name=__codelineno-80-8 href=#__codelineno-80-8></a>    <span class=n>dependencies</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-80-9><a id=__codelineno-80-9 name=__codelineno-80-9 href=#__codelineno-80-9></a>
</span><span id=__span-80-10><a id=__codelineno-80-10 name=__codelineno-80-10 href=#__codelineno-80-10></a><span class=nd>@dataclass</span>
</span><span id=__span-80-11><a id=__codelineno-80-11 name=__codelineno-80-11 href=#__codelineno-80-11></a><span class=k>class</span><span class=w> </span><span class=nc>ArchitectureMap</span><span class=p>:</span>
</span><span id=__span-80-12><a id=__codelineno-80-12 name=__codelineno-80-12 href=#__codelineno-80-12></a>    <span class=n>components</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Component</span><span class=p>]</span>
</span><span id=__span-80-13><a id=__codelineno-80-13 name=__codelineno-80-13 href=#__codelineno-80-13></a>    <span class=n>relationships</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]]</span>  <span class=c1># (from, to, type)</span>
</span><span id=__span-80-14><a id=__codelineno-80-14 name=__codelineno-80-14 href=#__codelineno-80-14></a>    <span class=n>layers</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]]</span>  <span class=c1># Logical groupings</span>
</span><span id=__span-80-15><a id=__codelineno-80-15 name=__codelineno-80-15 href=#__codelineno-80-15></a>
</span><span id=__span-80-16><a id=__codelineno-80-16 name=__codelineno-80-16 href=#__codelineno-80-16></a><span class=k>class</span><span class=w> </span><span class=nc>ArchitectureMapper</span><span class=p>:</span>
</span><span id=__span-80-17><a id=__codelineno-80-17 name=__codelineno-80-17 href=#__codelineno-80-17></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>scan</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ArchitectureMap</span>
</span><span id=__span-80-18><a id=__codelineno-80-18 name=__codelineno-80-18 href=#__codelineno-80-18></a>    <span class=k>def</span><span class=w> </span><span class=nf>to_ascii</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>map</span><span class=p>:</span> <span class=n>ArchitectureMap</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span>
</span><span id=__span-80-19><a id=__codelineno-80-19 name=__codelineno-80-19 href=#__codelineno-80-19></a>    <span class=k>def</span><span class=w> </span><span class=nf>to_mermaid</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>map</span><span class=p>:</span> <span class=n>ArchitectureMap</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span>
</span></code></pre></div> <h4 id=output-formats>Output Formats<a class=headerlink href=#output-formats title="Permanent link">&para;</a></h4> <p><strong>1. ASCII Diagram</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-81-1><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a>
</span><span id=__span-81-2><a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a>  Project Architecture: null-terminal                       
</span><span id=__span-81-3><a id=__codelineno-81-3 name=__codelineno-81-3 href=#__codelineno-81-3></a>
</span><span id=__span-81-4><a id=__codelineno-81-4 name=__codelineno-81-4 href=#__codelineno-81-4></a>                                                              
</span><span id=__span-81-5><a id=__codelineno-81-5 name=__codelineno-81-5 href=#__codelineno-81-5></a>                                               
</span><span id=__span-81-6><a id=__codelineno-81-6 name=__codelineno-81-6 href=#__codelineno-81-6></a>                         app.py                             
</span><span id=__span-81-7><a id=__codelineno-81-7 name=__codelineno-81-7 href=#__codelineno-81-7></a>                        (NullApp)                           
</span><span id=__span-81-8><a id=__codelineno-81-8 name=__codelineno-81-8 href=#__codelineno-81-8></a>                                               
</span><span id=__span-81-9><a id=__codelineno-81-9 name=__codelineno-81-9 href=#__codelineno-81-9></a>                         
</span><span id=__span-81-10><a id=__codelineno-81-10 name=__codelineno-81-10 href=#__codelineno-81-10></a>                                                           
</span><span id=__span-81-11><a id=__codelineno-81-11 name=__codelineno-81-11 href=#__codelineno-81-11></a>                
</span><span id=__span-81-12><a id=__codelineno-81-12 name=__codelineno-81-12 href=#__codelineno-81-12></a>    handlers/       widgets/          ai/              
</span><span id=__span-81-13><a id=__codelineno-81-13 name=__codelineno-81-13 href=#__codelineno-81-13></a>    execution       blocks          providers          
</span><span id=__span-81-14><a id=__codelineno-81-14 name=__codelineno-81-14 href=#__codelineno-81-14></a>                
</span><span id=__span-81-15><a id=__codelineno-81-15 name=__codelineno-81-15 href=#__codelineno-81-15></a>                                                           
</span><span id=__span-81-16><a id=__codelineno-81-16 name=__codelineno-81-16 href=#__codelineno-81-16></a>                                                           
</span><span id=__span-81-17><a id=__codelineno-81-17 name=__codelineno-81-17 href=#__codelineno-81-17></a>                
</span><span id=__span-81-18><a id=__codelineno-81-18 name=__codelineno-81-18 href=#__codelineno-81-18></a>    commands/       screens/          mcp/             
</span><span id=__span-81-19><a id=__codelineno-81-19 name=__codelineno-81-19 href=#__codelineno-81-19></a>                
</span><span id=__span-81-20><a id=__codelineno-81-20 name=__codelineno-81-20 href=#__codelineno-81-20></a>                                                              
</span><span id=__span-81-21><a id=__codelineno-81-21 name=__codelineno-81-21 href=#__codelineno-81-21></a>
</span></code></pre></div></p> <p><strong>2. Mermaid Diagram</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-82-1><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a>graph TD
</span><span id=__span-82-2><a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a>    A[app.py] --&gt; B[handlers/]
</span><span id=__span-82-3><a id=__codelineno-82-3 name=__codelineno-82-3 href=#__codelineno-82-3></a>    A --&gt; C[widgets/]
</span><span id=__span-82-4><a id=__codelineno-82-4 name=__codelineno-82-4 href=#__codelineno-82-4></a>    A --&gt; D[ai/]
</span><span id=__span-82-5><a id=__codelineno-82-5 name=__codelineno-82-5 href=#__codelineno-82-5></a>    B --&gt; E[commands/]
</span><span id=__span-82-6><a id=__codelineno-82-6 name=__codelineno-82-6 href=#__codelineno-82-6></a>    C --&gt; F[screens/]
</span><span id=__span-82-7><a id=__codelineno-82-7 name=__codelineno-82-7 href=#__codelineno-82-7></a>    D --&gt; G[mcp/]
</span></code></pre></div></p> <p><strong>3. Detailed Component View</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-83-1><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a>
</span><span id=__span-83-2><a id=__codelineno-83-2 name=__codelineno-83-2 href=#__codelineno-83-2></a>  Component: handlers/execution.py                          
</span><span id=__span-83-3><a id=__codelineno-83-3 name=__codelineno-83-3 href=#__codelineno-83-3></a>
</span><span id=__span-83-4><a id=__codelineno-83-4 name=__codelineno-83-4 href=#__codelineno-83-4></a> Classes:                                                     
</span><span id=__span-83-5><a id=__codelineno-83-5 name=__codelineno-83-5 href=#__codelineno-83-5></a>    ExecutionHandler                                         
</span><span id=__span-83-6><a id=__codelineno-83-6 name=__codelineno-83-6 href=#__codelineno-83-6></a>    AIExecutor                                               
</span><span id=__span-83-7><a id=__codelineno-83-7 name=__codelineno-83-7 href=#__codelineno-83-7></a>                                                              
</span><span id=__span-83-8><a id=__codelineno-83-8 name=__codelineno-83-8 href=#__codelineno-83-8></a> Imports:                                                     
</span><span id=__span-83-9><a id=__codelineno-83-9 name=__codelineno-83-9 href=#__codelineno-83-9></a>    ai/base.py (LLMProvider)                                
</span><span id=__span-83-10><a id=__codelineno-83-10 name=__codelineno-83-10 href=#__codelineno-83-10></a>    ai/manager.py (AIManager)                               
</span><span id=__span-83-11><a id=__codelineno-83-11 name=__codelineno-83-11 href=#__codelineno-83-11></a>    tools/builtin.py (run_command, read_file)               
</span><span id=__span-83-12><a id=__codelineno-83-12 name=__codelineno-83-12 href=#__codelineno-83-12></a>                                                              
</span><span id=__span-83-13><a id=__codelineno-83-13 name=__codelineno-83-13 href=#__codelineno-83-13></a> Imported by:                                                 
</span><span id=__span-83-14><a id=__codelineno-83-14 name=__codelineno-83-14 href=#__codelineno-83-14></a>    app.py                                                   
</span><span id=__span-83-15><a id=__codelineno-83-15 name=__codelineno-83-15 href=#__codelineno-83-15></a>    handlers/input.py                                        
</span><span id=__span-83-16><a id=__codelineno-83-16 name=__codelineno-83-16 href=#__codelineno-83-16></a>
</span></code></pre></div></p> <h4 id=commands_8>Commands<a class=headerlink href=#commands_8 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/map</code></td> <td>Show project architecture</td> </tr> <tr> <td><code>/map &lt;path&gt;</code></td> <td>Show architecture for specific path</td> </tr> <tr> <td><code>/map --format mermaid</code></td> <td>Output as mermaid diagram</td> </tr> <tr> <td><code>/map --depth 2</code></td> <td>Limit depth of analysis</td> </tr> <tr> <td><code>/map &lt;component&gt;</code></td> <td>Show component detail</td> </tr> </tbody> </table> <h4 id=configuration_11>Configuration<a class=headerlink href=#configuration_11 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-84-1><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=p>{</span>
</span><span id=__span-84-2><a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a><span class=w>  </span><span class=nt>&quot;architecture&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-84-3><a id=__codelineno-84-3 name=__codelineno-84-3 href=#__codelineno-84-3></a><span class=w>    </span><span class=nt>&quot;default_format&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;ascii&quot;</span><span class=p>,</span>
</span><span id=__span-84-4><a id=__codelineno-84-4 name=__codelineno-84-4 href=#__codelineno-84-4></a><span class=w>    </span><span class=nt>&quot;max_depth&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-84-5><a id=__codelineno-84-5 name=__codelineno-84-5 href=#__codelineno-84-5></a><span class=w>    </span><span class=nt>&quot;ignore_patterns&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;__pycache__&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;node_modules&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;.git&quot;</span><span class=p>],</span>
</span><span id=__span-84-6><a id=__codelineno-84-6 name=__codelineno-84-6 href=#__codelineno-84-6></a><span class=w>    </span><span class=nt>&quot;group_by&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;directory&quot;</span><span class=p>,</span>
</span><span id=__span-84-7><a id=__codelineno-84-7 name=__codelineno-84-7 href=#__codelineno-84-7></a><span class=w>    </span><span class=nt>&quot;show_imports&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-84-8><a id=__codelineno-84-8 name=__codelineno-84-8 href=#__codelineno-84-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-84-9><a id=__codelineno-84-9 name=__codelineno-84-9 href=#__codelineno-84-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_13>Implementation Steps<a class=headerlink href=#implementation-steps_13 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>Component</code> and <code>ArchitectureMap</code> models</li> <li>Implement file scanner</li> <li>Build dependency analyzer (imports/exports)</li> <li>Create ASCII diagram generator</li> <li>Create Mermaid diagram generator</li> <li>Build component detail view</li> <li>Add caching for large projects</li> <li>Testing</li> </ol> <h4 id=effort-estimate_13>Effort Estimate<a class=headerlink href=#effort-estimate_13 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>File scanner: 1 day</li> <li>Dependency analyzer: 1.5 days</li> <li>ASCII generator: 1 day</li> <li>Mermaid generator: 0.5 days</li> <li>Component view: 0.5 days</li> <li>Caching: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 6 days</strong></li> </ul> <hr> <h2 id=15-custom-agent-profiles>15. Custom Agent Profiles<a class=headerlink href=#15-custom-agent-profiles title="Permanent link">&para;</a></h2> <h3 id=overview_14>Overview<a class=headerlink href=#overview_14 title="Permanent link">&para;</a></h3> <p>Create domain-specific agent configurations with custom prompts, tools, and behaviors.</p> <h3 id=user-story_14>User Story<a class=headerlink href=#user-story_14 title="Permanent link">&para;</a></h3> <blockquote> <p>As a team lead, I want to create specialized AI profiles for different tasks (frontend, backend, DevOps) that my team can share.</p> </blockquote> <h3 id=current-state_14>Current State<a class=headerlink href=#current-state_14 title="Permanent link">&para;</a></h3> <ul> <li>Single default agent behavior</li> <li>System prompts can be customized via <code>/prompts</code></li> <li>No shareable profile system</li> </ul> <h3 id=proposed-design_14>Proposed Design<a class=headerlink href=#proposed-design_14 title="Permanent link">&para;</a></h3> <h4 id=data-model_9>Data Model<a class=headerlink href=#data-model_9 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-85-1><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=nd>@dataclass</span>
</span><span id=__span-85-2><a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a><span class=k>class</span><span class=w> </span><span class=nc>AgentProfile</span><span class=p>:</span>
</span><span id=__span-85-3><a id=__codelineno-85-3 name=__codelineno-85-3 href=#__codelineno-85-3></a>    <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-4><a id=__codelineno-85-4 name=__codelineno-85-4 href=#__codelineno-85-4></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-5><a id=__codelineno-85-5 name=__codelineno-85-5 href=#__codelineno-85-5></a>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-6><a id=__codelineno-85-6 name=__codelineno-85-6 href=#__codelineno-85-6></a>    <span class=n>icon</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-7><a id=__codelineno-85-7 name=__codelineno-85-7 href=#__codelineno-85-7></a>
</span><span id=__span-85-8><a id=__codelineno-85-8 name=__codelineno-85-8 href=#__codelineno-85-8></a>    <span class=c1># Behavior</span>
</span><span id=__span-85-9><a id=__codelineno-85-9 name=__codelineno-85-9 href=#__codelineno-85-9></a>    <span class=n>system_prompt</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-10><a id=__codelineno-85-10 name=__codelineno-85-10 href=#__codelineno-85-10></a>    <span class=n>temperature</span><span class=p>:</span> <span class=nb>float</span>
</span><span id=__span-85-11><a id=__codelineno-85-11 name=__codelineno-85-11 href=#__codelineno-85-11></a>    <span class=n>max_tokens</span><span class=p>:</span> <span class=nb>int</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-85-12><a id=__codelineno-85-12 name=__codelineno-85-12 href=#__codelineno-85-12></a>
</span><span id=__span-85-13><a id=__codelineno-85-13 name=__codelineno-85-13 href=#__codelineno-85-13></a>    <span class=c1># Tools</span>
</span><span id=__span-85-14><a id=__codelineno-85-14 name=__codelineno-85-14 href=#__codelineno-85-14></a>    <span class=n>allowed_tools</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span>  <span class=c1># None = all</span>
</span><span id=__span-85-15><a id=__codelineno-85-15 name=__codelineno-85-15 href=#__codelineno-85-15></a>    <span class=n>blocked_tools</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-85-16><a id=__codelineno-85-16 name=__codelineno-85-16 href=#__codelineno-85-16></a>    <span class=n>custom_tools</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>ToolDefinition</span><span class=p>]</span>
</span><span id=__span-85-17><a id=__codelineno-85-17 name=__codelineno-85-17 href=#__codelineno-85-17></a>
</span><span id=__span-85-18><a id=__codelineno-85-18 name=__codelineno-85-18 href=#__codelineno-85-18></a>    <span class=c1># Context</span>
</span><span id=__span-85-19><a id=__codelineno-85-19 name=__codelineno-85-19 href=#__codelineno-85-19></a>    <span class=n>auto_include_files</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>  <span class=c1># Glob patterns</span>
</span><span id=__span-85-20><a id=__codelineno-85-20 name=__codelineno-85-20 href=#__codelineno-85-20></a>    <span class=n>context_instructions</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-21><a id=__codelineno-85-21 name=__codelineno-85-21 href=#__codelineno-85-21></a>
</span><span id=__span-85-22><a id=__codelineno-85-22 name=__codelineno-85-22 href=#__codelineno-85-22></a>    <span class=c1># Guardrails</span>
</span><span id=__span-85-23><a id=__codelineno-85-23 name=__codelineno-85-23 href=#__codelineno-85-23></a>    <span class=n>require_approval</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>  <span class=c1># Tool names requiring approval</span>
</span><span id=__span-85-24><a id=__codelineno-85-24 name=__codelineno-85-24 href=#__codelineno-85-24></a>    <span class=n>max_iterations</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-85-25><a id=__codelineno-85-25 name=__codelineno-85-25 href=#__codelineno-85-25></a>
</span><span id=__span-85-26><a id=__codelineno-85-26 name=__codelineno-85-26 href=#__codelineno-85-26></a>    <span class=c1># Metadata</span>
</span><span id=__span-85-27><a id=__codelineno-85-27 name=__codelineno-85-27 href=#__codelineno-85-27></a>    <span class=n>created_by</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-85-28><a id=__codelineno-85-28 name=__codelineno-85-28 href=#__codelineno-85-28></a>    <span class=n>created_at</span><span class=p>:</span> <span class=n>datetime</span>
</span><span id=__span-85-29><a id=__codelineno-85-29 name=__codelineno-85-29 href=#__codelineno-85-29></a>    <span class=n>tags</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-85-30><a id=__codelineno-85-30 name=__codelineno-85-30 href=#__codelineno-85-30></a>    <span class=n>source</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;builtin&quot;</span><span class=p>,</span> <span class=s2>&quot;local&quot;</span><span class=p>,</span> <span class=s2>&quot;shared&quot;</span><span class=p>]</span>
</span><span id=__span-85-31><a id=__codelineno-85-31 name=__codelineno-85-31 href=#__codelineno-85-31></a>
</span><span id=__span-85-32><a id=__codelineno-85-32 name=__codelineno-85-32 href=#__codelineno-85-32></a><span class=k>class</span><span class=w> </span><span class=nc>ProfileManager</span><span class=p>:</span>
</span><span id=__span-85-33><a id=__codelineno-85-33 name=__codelineno-85-33 href=#__codelineno-85-33></a>    <span class=n>profiles</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AgentProfile</span><span class=p>]</span>
</span><span id=__span-85-34><a id=__codelineno-85-34 name=__codelineno-85-34 href=#__codelineno-85-34></a>    <span class=n>active_profile</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span>
</span><span id=__span-85-35><a id=__codelineno-85-35 name=__codelineno-85-35 href=#__codelineno-85-35></a>
</span><span id=__span-85-36><a id=__codelineno-85-36 name=__codelineno-85-36 href=#__codelineno-85-36></a>    <span class=k>def</span><span class=w> </span><span class=nf>create</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>profile</span><span class=p>:</span> <span class=n>AgentProfile</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-85-37><a id=__codelineno-85-37 name=__codelineno-85-37 href=#__codelineno-85-37></a>    <span class=k>def</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>updates</span><span class=p>:</span> <span class=nb>dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-85-38><a id=__codelineno-85-38 name=__codelineno-85-38 href=#__codelineno-85-38></a>    <span class=k>def</span><span class=w> </span><span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-85-39><a id=__codelineno-85-39 name=__codelineno-85-39 href=#__codelineno-85-39></a>    <span class=k>def</span><span class=w> </span><span class=nf>activate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-85-40><a id=__codelineno-85-40 name=__codelineno-85-40 href=#__codelineno-85-40></a>    <span class=k>def</span><span class=w> </span><span class=nf>export</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span>  <span class=c1># YAML</span>
</span><span id=__span-85-41><a id=__codelineno-85-41 name=__codelineno-85-41 href=#__codelineno-85-41></a>    <span class=k>def</span><span class=w> </span><span class=nf>import_profile</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>yaml</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AgentProfile</span>
</span></code></pre></div> <h4 id=built-in-profiles>Built-in Profiles<a class=headerlink href=#built-in-profiles title="Permanent link">&para;</a></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-86-1><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=c1># ~/.null/profiles/frontend.yaml</span>
</span><span id=__span-86-2><a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
</span><span id=__span-86-3><a id=__codelineno-86-3 name=__codelineno-86-3 href=#__codelineno-86-3></a><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Frontend Developer</span>
</span><span id=__span-86-4><a id=__codelineno-86-4 name=__codelineno-86-4 href=#__codelineno-86-4></a><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Specializes in React, TypeScript, and CSS</span>
</span><span id=__span-86-5><a id=__codelineno-86-5 name=__codelineno-86-5 href=#__codelineno-86-5></a><span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span><span id=__span-86-6><a id=__codelineno-86-6 name=__codelineno-86-6 href=#__codelineno-86-6></a>
</span><span id=__span-86-7><a id=__codelineno-86-7 name=__codelineno-86-7 href=#__codelineno-86-7></a><span class=nt>system_prompt</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-86-8><a id=__codelineno-86-8 name=__codelineno-86-8 href=#__codelineno-86-8></a><span class=w>  </span><span class=no>You are a frontend development expert specializing in:</span>
</span><span id=__span-86-9><a id=__codelineno-86-9 name=__codelineno-86-9 href=#__codelineno-86-9></a><span class=w>  </span><span class=no>- React and Next.js</span>
</span><span id=__span-86-10><a id=__codelineno-86-10 name=__codelineno-86-10 href=#__codelineno-86-10></a><span class=w>  </span><span class=no>- TypeScript</span>
</span><span id=__span-86-11><a id=__codelineno-86-11 name=__codelineno-86-11 href=#__codelineno-86-11></a><span class=w>  </span><span class=no>- Tailwind CSS and CSS-in-JS</span>
</span><span id=__span-86-12><a id=__codelineno-86-12 name=__codelineno-86-12 href=#__codelineno-86-12></a><span class=w>  </span><span class=no>- Accessibility (WCAG)</span>
</span><span id=__span-86-13><a id=__codelineno-86-13 name=__codelineno-86-13 href=#__codelineno-86-13></a><span class=w>  </span><span class=no>- Performance optimization</span>
</span><span id=__span-86-14><a id=__codelineno-86-14 name=__codelineno-86-14 href=#__codelineno-86-14></a>
</span><span id=__span-86-15><a id=__codelineno-86-15 name=__codelineno-86-15 href=#__codelineno-86-15></a><span class=w>  </span><span class=no>Always consider:</span>
</span><span id=__span-86-16><a id=__codelineno-86-16 name=__codelineno-86-16 href=#__codelineno-86-16></a><span class=w>  </span><span class=no>- Mobile-first responsive design</span>
</span><span id=__span-86-17><a id=__codelineno-86-17 name=__codelineno-86-17 href=#__codelineno-86-17></a><span class=w>  </span><span class=no>- Browser compatibility</span>
</span><span id=__span-86-18><a id=__codelineno-86-18 name=__codelineno-86-18 href=#__codelineno-86-18></a><span class=w>  </span><span class=no>- Component reusability</span>
</span><span id=__span-86-19><a id=__codelineno-86-19 name=__codelineno-86-19 href=#__codelineno-86-19></a>
</span><span id=__span-86-20><a id=__codelineno-86-20 name=__codelineno-86-20 href=#__codelineno-86-20></a><span class=nt>temperature</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</span><span id=__span-86-21><a id=__codelineno-86-21 name=__codelineno-86-21 href=#__codelineno-86-21></a><span class=nt>allowed_tools</span><span class=p>:</span>
</span><span id=__span-86-22><a id=__codelineno-86-22 name=__codelineno-86-22 href=#__codelineno-86-22></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">read_file</span>
</span><span id=__span-86-23><a id=__codelineno-86-23 name=__codelineno-86-23 href=#__codelineno-86-23></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">write_file</span>
</span><span id=__span-86-24><a id=__codelineno-86-24 name=__codelineno-86-24 href=#__codelineno-86-24></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">run_command</span>
</span><span id=__span-86-25><a id=__codelineno-86-25 name=__codelineno-86-25 href=#__codelineno-86-25></a>
</span><span id=__span-86-26><a id=__codelineno-86-26 name=__codelineno-86-26 href=#__codelineno-86-26></a><span class=nt>auto_include_files</span><span class=p>:</span>
</span><span id=__span-86-27><a id=__codelineno-86-27 name=__codelineno-86-27 href=#__codelineno-86-27></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;package.json&quot;</span>
</span><span id=__span-86-28><a id=__codelineno-86-28 name=__codelineno-86-28 href=#__codelineno-86-28></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;tsconfig.json&quot;</span>
</span><span id=__span-86-29><a id=__codelineno-86-29 name=__codelineno-86-29 href=#__codelineno-86-29></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;tailwind.config.*&quot;</span>
</span><span id=__span-86-30><a id=__codelineno-86-30 name=__codelineno-86-30 href=#__codelineno-86-30></a>
</span><span id=__span-86-31><a id=__codelineno-86-31 name=__codelineno-86-31 href=#__codelineno-86-31></a><span class=nt>require_approval</span><span class=p>:</span>
</span><span id=__span-86-32><a id=__codelineno-86-32 name=__codelineno-86-32 href=#__codelineno-86-32></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">write_file</span>
</span><span id=__span-86-33><a id=__codelineno-86-33 name=__codelineno-86-33 href=#__codelineno-86-33></a>
</span><span id=__span-86-34><a id=__codelineno-86-34 name=__codelineno-86-34 href=#__codelineno-86-34></a><span class=nt>tags</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>frontend</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>react</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>typescript</span><span class="p p-Indicator">]</span>
</span></code></pre></div> <h4 id=ui-components_10>UI Components<a class=headerlink href=#ui-components_10 title="Permanent link">&para;</a></h4> <p><strong>1. Profile Selector</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-87-1><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a>
</span><span id=__span-87-2><a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a>  Agent Profiles                                       []  
</span><span id=__span-87-3><a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a>
</span><span id=__span-87-4><a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a>  Default                                                    
</span><span id=__span-87-5><a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a>   General-purpose assistant                                  
</span><span id=__span-87-6><a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a>                                                              
</span><span id=__span-87-7><a id=__codelineno-87-7 name=__codelineno-87-7 href=#__codelineno-87-7></a>   Frontend Developer                                     
</span><span id=__span-87-8><a id=__codelineno-87-8 name=__codelineno-87-8 href=#__codelineno-87-8></a>   React, TypeScript, CSS specialist                         
</span><span id=__span-87-9><a id=__codelineno-87-9 name=__codelineno-87-9 href=#__codelineno-87-9></a>                                                              
</span><span id=__span-87-10><a id=__codelineno-87-10 name=__codelineno-87-10 href=#__codelineno-87-10></a>   Backend Engineer                                        
</span><span id=__span-87-11><a id=__codelineno-87-11 name=__codelineno-87-11 href=#__codelineno-87-11></a>   Python, APIs, databases                                    
</span><span id=__span-87-12><a id=__codelineno-87-12 name=__codelineno-87-12 href=#__codelineno-87-12></a>                                                              
</span><span id=__span-87-13><a id=__codelineno-87-13 name=__codelineno-87-13 href=#__codelineno-87-13></a>   DevOps                                                  
</span><span id=__span-87-14><a id=__codelineno-87-14 name=__codelineno-87-14 href=#__codelineno-87-14></a>   Docker, CI/CD, infrastructure                             
</span><span id=__span-87-15><a id=__codelineno-87-15 name=__codelineno-87-15 href=#__codelineno-87-15></a>                                                              
</span><span id=__span-87-16><a id=__codelineno-87-16 name=__codelineno-87-16 href=#__codelineno-87-16></a>   Security Auditor                                        
</span><span id=__span-87-17><a id=__codelineno-87-17 name=__codelineno-87-17 href=#__codelineno-87-17></a>   Security review and hardening                             
</span><span id=__span-87-18><a id=__codelineno-87-18 name=__codelineno-87-18 href=#__codelineno-87-18></a>
</span><span id=__span-87-19><a id=__codelineno-87-19 name=__codelineno-87-19 href=#__codelineno-87-19></a> [+ Create New] [Import]                                      
</span><span id=__span-87-20><a id=__codelineno-87-20 name=__codelineno-87-20 href=#__codelineno-87-20></a>
</span></code></pre></div></p> <p><strong>2. Profile Editor</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-88-1><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a>
</span><span id=__span-88-2><a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a>  Edit Profile: Frontend Developer                     []  
</span><span id=__span-88-3><a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a>
</span><span id=__span-88-4><a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a> Name: [Frontend Developer                              ]     
</span><span id=__span-88-5><a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a> Icon: [] Description: [React, TypeScript specialist  ]    
</span><span id=__span-88-6><a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a>                                                              
</span><span id=__span-88-7><a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a> System Prompt:                                               
</span><span id=__span-88-8><a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a>  
</span><span id=__span-88-9><a id=__codelineno-88-9 name=__codelineno-88-9 href=#__codelineno-88-9></a>  You are a frontend development expert...                
</span><span id=__span-88-10><a id=__codelineno-88-10 name=__codelineno-88-10 href=#__codelineno-88-10></a>                                                           
</span><span id=__span-88-11><a id=__codelineno-88-11 name=__codelineno-88-11 href=#__codelineno-88-11></a>  
</span><span id=__span-88-12><a id=__codelineno-88-12 name=__codelineno-88-12 href=#__codelineno-88-12></a>                                                              
</span><span id=__span-88-13><a id=__codelineno-88-13 name=__codelineno-88-13 href=#__codelineno-88-13></a> Temperature: [0.3    ] Max Tokens: [4096    ]               
</span><span id=__span-88-14><a id=__codelineno-88-14 name=__codelineno-88-14 href=#__codelineno-88-14></a>                                                              
</span><span id=__span-88-15><a id=__codelineno-88-15 name=__codelineno-88-15 href=#__codelineno-88-15></a> Tools:                                                       
</span><span id=__span-88-16><a id=__codelineno-88-16 name=__codelineno-88-16 href=#__codelineno-88-16></a>    read_file   write_file   run_command                  
</span><span id=__span-88-17><a id=__codelineno-88-17 name=__codelineno-88-17 href=#__codelineno-88-17></a>    search_code   web_search                               
</span><span id=__span-88-18><a id=__codelineno-88-18 name=__codelineno-88-18 href=#__codelineno-88-18></a>                                                              
</span><span id=__span-88-19><a id=__codelineno-88-19 name=__codelineno-88-19 href=#__codelineno-88-19></a> Auto-include Files: [package.json, tsconfig.json       ]    
</span><span id=__span-88-20><a id=__codelineno-88-20 name=__codelineno-88-20 href=#__codelineno-88-20></a>                                                              
</span><span id=__span-88-21><a id=__codelineno-88-21 name=__codelineno-88-21 href=#__codelineno-88-21></a>                              [Cancel] [Save]                 
</span><span id=__span-88-22><a id=__codelineno-88-22 name=__codelineno-88-22 href=#__codelineno-88-22></a>
</span></code></pre></div></p> <h4 id=commands_9>Commands<a class=headerlink href=#commands_9 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/profile</code></td> <td>Show profile selector</td> </tr> <tr> <td><code>/profile &lt;name&gt;</code></td> <td>Activate profile</td> </tr> <tr> <td><code>/profile create</code></td> <td>Create new profile</td> </tr> <tr> <td><code>/profile edit &lt;name&gt;</code></td> <td>Edit profile</td> </tr> <tr> <td><code>/profile export &lt;name&gt;</code></td> <td>Export to YAML</td> </tr> <tr> <td><code>/profile import &lt;file&gt;</code></td> <td>Import from YAML</td> </tr> </tbody> </table> <h4 id=configuration_12>Configuration<a class=headerlink href=#configuration_12 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-89-1><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=p>{</span>
</span><span id=__span-89-2><a id=__codelineno-89-2 name=__codelineno-89-2 href=#__codelineno-89-2></a><span class=w>  </span><span class=nt>&quot;profiles&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-89-3><a id=__codelineno-89-3 name=__codelineno-89-3 href=#__codelineno-89-3></a><span class=w>    </span><span class=nt>&quot;default&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;default&quot;</span><span class=p>,</span>
</span><span id=__span-89-4><a id=__codelineno-89-4 name=__codelineno-89-4 href=#__codelineno-89-4></a><span class=w>    </span><span class=nt>&quot;profiles_path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;~/.null/profiles/&quot;</span><span class=p>,</span>
</span><span id=__span-89-5><a id=__codelineno-89-5 name=__codelineno-89-5 href=#__codelineno-89-5></a><span class=w>    </span><span class=nt>&quot;allow_tool_override&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-89-6><a id=__codelineno-89-6 name=__codelineno-89-6 href=#__codelineno-89-6></a><span class=w>    </span><span class=nt>&quot;show_active_in_status&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-89-7><a id=__codelineno-89-7 name=__codelineno-89-7 href=#__codelineno-89-7></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-89-8><a id=__codelineno-89-8 name=__codelineno-89-8 href=#__codelineno-89-8></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_14>Implementation Steps<a class=headerlink href=#implementation-steps_14 title="Permanent link">&para;</a></h4> <ol> <li>Create <code>AgentProfile</code> data model</li> <li>Implement <code>ProfileManager</code></li> <li>Create built-in profiles</li> <li>Build profile selector UI</li> <li>Build profile editor UI</li> <li>Add YAML import/export</li> <li>Integrate with agent execution</li> <li>Add profile indicator to status bar</li> <li>Testing</li> </ol> <h4 id=effort-estimate_14>Effort Estimate<a class=headerlink href=#effort-estimate_14 title="Permanent link">&para;</a></h4> <ul> <li>Data model: 0.5 days</li> <li>ProfileManager: 1 day</li> <li>Built-in profiles: 0.5 days</li> <li>Profile selector: 0.5 days</li> <li>Profile editor: 1 day</li> <li>Import/export: 0.5 days</li> <li>Agent integration: 0.5 days</li> <li>Status bar: 0.25 days</li> <li>Testing: 0.25 days</li> <li><strong>Total: 5 days</strong></li> </ul> <hr> <h2 id=16-collaborative-git-context>16. Collaborative Git Context<a class=headerlink href=#16-collaborative-git-context title="Permanent link">&para;</a></h2> <h3 id=overview_15>Overview<a class=headerlink href=#overview_15 title="Permanent link">&para;</a></h3> <p>Pull context from GitHub issues, PRs, and discussions directly into the AI conversation.</p> <h3 id=user-story_15>User Story<a class=headerlink href=#user-story_15 title="Permanent link">&para;</a></h3> <blockquote> <p>As a developer working on a GitHub issue, I want the AI to understand the issue context without me copying/pasting details.</p> </blockquote> <h3 id=current-state_15>Current State<a class=headerlink href=#current-state_15 title="Permanent link">&para;</a></h3> <ul> <li>No GitHub integration</li> <li>Manual copy/paste of issue details</li> <li>No PR diff viewing</li> </ul> <h3 id=proposed-design_15>Proposed Design<a class=headerlink href=#proposed-design_15 title="Permanent link">&para;</a></h3> <h4 id=architecture_10>Architecture<a class=headerlink href=#architecture_10 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-90-1><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a>
</span><span id=__span-90-2><a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a>                   GitHubContextManager                       
</span><span id=__span-90-3><a id=__codelineno-90-3 name=__codelineno-90-3 href=#__codelineno-90-3></a>
</span><span id=__span-90-4><a id=__codelineno-90-4 name=__codelineno-90-4 href=#__codelineno-90-4></a>             
</span><span id=__span-90-5><a id=__codelineno-90-5 name=__codelineno-90-5 href=#__codelineno-90-5></a>    GitHub API  &gt;  Context     &gt;  AI Context     
</span><span id=__span-90-6><a id=__codelineno-90-6 name=__codelineno-90-6 href=#__codelineno-90-6></a>    Client            Parser            Injector       
</span><span id=__span-90-7><a id=__codelineno-90-7 name=__codelineno-90-7 href=#__codelineno-90-7></a>             
</span><span id=__span-90-8><a id=__codelineno-90-8 name=__codelineno-90-8 href=#__codelineno-90-8></a>                                                             
</span><span id=__span-90-9><a id=__codelineno-90-9 name=__codelineno-90-9 href=#__codelineno-90-9></a>          Issues                                           
</span><span id=__span-90-10><a id=__codelineno-90-10 name=__codelineno-90-10 href=#__codelineno-90-10></a>          Pull Requests                                    
</span><span id=__span-90-11><a id=__codelineno-90-11 name=__codelineno-90-11 href=#__codelineno-90-11></a>          Discussions                                      
</span><span id=__span-90-12><a id=__codelineno-90-12 name=__codelineno-90-12 href=#__codelineno-90-12></a>          Code Review Comments                             
</span><span id=__span-90-13><a id=__codelineno-90-13 name=__codelineno-90-13 href=#__codelineno-90-13></a>
</span></code></pre></div> <h4 id=data-model_10>Data Model<a class=headerlink href=#data-model_10 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-91-1><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=nd>@dataclass</span>
</span><span id=__span-91-2><a id=__codelineno-91-2 name=__codelineno-91-2 href=#__codelineno-91-2></a><span class=k>class</span><span class=w> </span><span class=nc>GitHubIssue</span><span class=p>:</span>
</span><span id=__span-91-3><a id=__codelineno-91-3 name=__codelineno-91-3 href=#__codelineno-91-3></a>    <span class=n>number</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-91-4><a id=__codelineno-91-4 name=__codelineno-91-4 href=#__codelineno-91-4></a>    <span class=n>title</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-5><a id=__codelineno-91-5 name=__codelineno-91-5 href=#__codelineno-91-5></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-6><a id=__codelineno-91-6 name=__codelineno-91-6 href=#__codelineno-91-6></a>    <span class=n>state</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-7><a id=__codelineno-91-7 name=__codelineno-91-7 href=#__codelineno-91-7></a>    <span class=n>labels</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-91-8><a id=__codelineno-91-8 name=__codelineno-91-8 href=#__codelineno-91-8></a>    <span class=n>comments</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Comment</span><span class=p>]</span>
</span><span id=__span-91-9><a id=__codelineno-91-9 name=__codelineno-91-9 href=#__codelineno-91-9></a>    <span class=n>linked_prs</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>
</span><span id=__span-91-10><a id=__codelineno-91-10 name=__codelineno-91-10 href=#__codelineno-91-10></a>
</span><span id=__span-91-11><a id=__codelineno-91-11 name=__codelineno-91-11 href=#__codelineno-91-11></a><span class=nd>@dataclass</span>
</span><span id=__span-91-12><a id=__codelineno-91-12 name=__codelineno-91-12 href=#__codelineno-91-12></a><span class=k>class</span><span class=w> </span><span class=nc>GitHubPR</span><span class=p>:</span>
</span><span id=__span-91-13><a id=__codelineno-91-13 name=__codelineno-91-13 href=#__codelineno-91-13></a>    <span class=n>number</span><span class=p>:</span> <span class=nb>int</span>
</span><span id=__span-91-14><a id=__codelineno-91-14 name=__codelineno-91-14 href=#__codelineno-91-14></a>    <span class=n>title</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-15><a id=__codelineno-91-15 name=__codelineno-91-15 href=#__codelineno-91-15></a>    <span class=n>body</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-16><a id=__codelineno-91-16 name=__codelineno-91-16 href=#__codelineno-91-16></a>    <span class=n>state</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-17><a id=__codelineno-91-17 name=__codelineno-91-17 href=#__codelineno-91-17></a>    <span class=n>diff</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-91-18><a id=__codelineno-91-18 name=__codelineno-91-18 href=#__codelineno-91-18></a>    <span class=n>files_changed</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span>
</span><span id=__span-91-19><a id=__codelineno-91-19 name=__codelineno-91-19 href=#__codelineno-91-19></a>    <span class=n>comments</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Comment</span><span class=p>]</span>
</span><span id=__span-91-20><a id=__codelineno-91-20 name=__codelineno-91-20 href=#__codelineno-91-20></a>    <span class=n>review_comments</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>ReviewComment</span><span class=p>]</span>
</span><span id=__span-91-21><a id=__codelineno-91-21 name=__codelineno-91-21 href=#__codelineno-91-21></a>    <span class=n>checks</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>CheckStatus</span><span class=p>]</span>
</span><span id=__span-91-22><a id=__codelineno-91-22 name=__codelineno-91-22 href=#__codelineno-91-22></a>
</span><span id=__span-91-23><a id=__codelineno-91-23 name=__codelineno-91-23 href=#__codelineno-91-23></a><span class=k>class</span><span class=w> </span><span class=nc>GitHubContextManager</span><span class=p>:</span>
</span><span id=__span-91-24><a id=__codelineno-91-24 name=__codelineno-91-24 href=#__codelineno-91-24></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>get_issue</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>number</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GitHubIssue</span>
</span><span id=__span-91-25><a id=__codelineno-91-25 name=__codelineno-91-25 href=#__codelineno-91-25></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>get_pr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>number</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>GitHubPR</span>
</span><span id=__span-91-26><a id=__codelineno-91-26 name=__codelineno-91-26 href=#__codelineno-91-26></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>get_pr_diff</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>number</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span>
</span><span id=__span-91-27><a id=__codelineno-91-27 name=__codelineno-91-27 href=#__codelineno-91-27></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>create_issue</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>title</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span>
</span><span id=__span-91-28><a id=__codelineno-91-28 name=__codelineno-91-28 href=#__codelineno-91-28></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>create_pr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>title</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span>
</span><span id=__span-91-29><a id=__codelineno-91-29 name=__codelineno-91-29 href=#__codelineno-91-29></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>comment_on_issue</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>number</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span><span id=__span-91-30><a id=__codelineno-91-30 name=__codelineno-91-30 href=#__codelineno-91-30></a>    <span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>comment_on_pr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>number</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span>
</span></code></pre></div> <h4 id=ui-components_11>UI Components<a class=headerlink href=#ui-components_11 title="Permanent link">&para;</a></h4> <p><strong>1. Issue Context Block</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-92-1><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a>
</span><span id=__span-92-2><a id=__codelineno-92-2 name=__codelineno-92-2 href=#__codelineno-92-2></a>  Issue #123: Login fails with special characters          
</span><span id=__span-92-3><a id=__codelineno-92-3 name=__codelineno-92-3 href=#__codelineno-92-3></a>
</span><span id=__span-92-4><a id=__codelineno-92-4 name=__codelineno-92-4 href=#__codelineno-92-4></a> Status: Open  Labels: bug, auth                             
</span><span id=__span-92-5><a id=__codelineno-92-5 name=__codelineno-92-5 href=#__codelineno-92-5></a>  
</span><span id=__span-92-6><a id=__codelineno-92-6 name=__codelineno-92-6 href=#__codelineno-92-6></a> When logging in with a password containing &#39;&amp;&#39; or &#39;=&#39;,      
</span><span id=__span-92-7><a id=__codelineno-92-7 name=__codelineno-92-7 href=#__codelineno-92-7></a> the authentication fails with a 400 error.                  
</span><span id=__span-92-8><a id=__codelineno-92-8 name=__codelineno-92-8 href=#__codelineno-92-8></a>                                                              
</span><span id=__span-92-9><a id=__codelineno-92-9 name=__codelineno-92-9 href=#__codelineno-92-9></a> Steps to reproduce:                                          
</span><span id=__span-92-10><a id=__codelineno-92-10 name=__codelineno-92-10 href=#__codelineno-92-10></a> 1. Create user with password &quot;test&amp;pass=123&quot;                
</span><span id=__span-92-11><a id=__codelineno-92-11 name=__codelineno-92-11 href=#__codelineno-92-11></a> 2. Try to login                                             
</span><span id=__span-92-12><a id=__codelineno-92-12 name=__codelineno-92-12 href=#__codelineno-92-12></a> 3. See 400 error                                            
</span><span id=__span-92-13><a id=__codelineno-92-13 name=__codelineno-92-13 href=#__codelineno-92-13></a>                                                              
</span><span id=__span-92-14><a id=__codelineno-92-14 name=__codelineno-92-14 href=#__codelineno-92-14></a> Comments (3):                                                
</span><span id=__span-92-15><a id=__codelineno-92-15 name=__codelineno-92-15 href=#__codelineno-92-15></a>   @alice: I can reproduce this on v2.1.0                    
</span><span id=__span-92-16><a id=__codelineno-92-16 name=__codelineno-92-16 href=#__codelineno-92-16></a>   @bob: Looks like URL encoding issue                       
</span><span id=__span-92-17><a id=__codelineno-92-17 name=__codelineno-92-17 href=#__codelineno-92-17></a>  
</span><span id=__span-92-18><a id=__codelineno-92-18 name=__codelineno-92-18 href=#__codelineno-92-18></a>                    [View on GitHub] [Add to Context]         
</span><span id=__span-92-19><a id=__codelineno-92-19 name=__codelineno-92-19 href=#__codelineno-92-19></a>
</span></code></pre></div></p> <p><strong>2. PR Review Block</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-93-1><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a>
</span><span id=__span-93-2><a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a>  PR #456: Fix special character encoding in auth          
</span><span id=__span-93-3><a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a>
</span><span id=__span-93-4><a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a> Status: Open  Base: main  feature/fix-auth-encoding        
</span><span id=__span-93-5><a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a>  
</span><span id=__span-93-6><a id=__codelineno-93-6 name=__codelineno-93-6 href=#__codelineno-93-6></a> Files changed: 2  +15 -3                                    
</span><span id=__span-93-7><a id=__codelineno-93-7 name=__codelineno-93-7 href=#__codelineno-93-7></a>   M src/auth/handler.py                                     
</span><span id=__span-93-8><a id=__codelineno-93-8 name=__codelineno-93-8 href=#__codelineno-93-8></a>   M tests/test_auth.py                                      
</span><span id=__span-93-9><a id=__codelineno-93-9 name=__codelineno-93-9 href=#__codelineno-93-9></a>                                                              
</span><span id=__span-93-10><a id=__codelineno-93-10 name=__codelineno-93-10 href=#__codelineno-93-10></a> Checks:  Tests   Lint   Deploy preview                   
</span><span id=__span-93-11><a id=__codelineno-93-11 name=__codelineno-93-11 href=#__codelineno-93-11></a>                                                              
</span><span id=__span-93-12><a id=__codelineno-93-12 name=__codelineno-93-12 href=#__codelineno-93-12></a> Review comments (1):                                         
</span><span id=__span-93-13><a id=__codelineno-93-13 name=__codelineno-93-13 href=#__codelineno-93-13></a>   @reviewer on handler.py:45                                
</span><span id=__span-93-14><a id=__codelineno-93-14 name=__codelineno-93-14 href=#__codelineno-93-14></a>   &quot;Consider using urllib.parse.quote_plus instead&quot;          
</span><span id=__span-93-15><a id=__codelineno-93-15 name=__codelineno-93-15 href=#__codelineno-93-15></a>  
</span><span id=__span-93-16><a id=__codelineno-93-16 name=__codelineno-93-16 href=#__codelineno-93-16></a>              [View Diff] [View on GitHub] [Add to Context]   
</span><span id=__span-93-17><a id=__codelineno-93-17 name=__codelineno-93-17 href=#__codelineno-93-17></a>
</span></code></pre></div></p> <h4 id=commands_10>Commands<a class=headerlink href=#commands_10 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>/issue &lt;number&gt;</code></td> <td>Load issue context</td> </tr> <tr> <td><code>/pr &lt;number&gt;</code></td> <td>Load PR context</td> </tr> <tr> <td><code>/pr diff &lt;number&gt;</code></td> <td>Show PR diff</td> </tr> <tr> <td><code>/gh create issue</code></td> <td>Create new issue</td> </tr> <tr> <td><code>/gh create pr</code></td> <td>Create new PR from current branch</td> </tr> <tr> <td><code>/gh comment &lt;number&gt;</code></td> <td>Comment on issue/PR</td> </tr> </tbody> </table> <h4 id=mcp-integration>MCP Integration<a class=headerlink href=#mcp-integration title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-94-1><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=c1># Register as MCP tools</span>
</span><span id=__span-94-2><a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a><span class=n>GITHUB_TOOLS</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-94-3><a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a>    <span class=n>Tool</span><span class=p>(</span>
</span><span id=__span-94-4><a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;github_get_issue&quot;</span><span class=p>,</span>
</span><span id=__span-94-5><a id=__codelineno-94-5 name=__codelineno-94-5 href=#__codelineno-94-5></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Get GitHub issue details&quot;</span><span class=p>,</span>
</span><span id=__span-94-6><a id=__codelineno-94-6 name=__codelineno-94-6 href=#__codelineno-94-6></a>        <span class=n>input_schema</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;number&quot;</span><span class=p>:</span> <span class=s2>&quot;integer&quot;</span><span class=p>}</span>
</span><span id=__span-94-7><a id=__codelineno-94-7 name=__codelineno-94-7 href=#__codelineno-94-7></a>    <span class=p>),</span>
</span><span id=__span-94-8><a id=__codelineno-94-8 name=__codelineno-94-8 href=#__codelineno-94-8></a>    <span class=n>Tool</span><span class=p>(</span>
</span><span id=__span-94-9><a id=__codelineno-94-9 name=__codelineno-94-9 href=#__codelineno-94-9></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;github_get_pr&quot;</span><span class=p>,</span>
</span><span id=__span-94-10><a id=__codelineno-94-10 name=__codelineno-94-10 href=#__codelineno-94-10></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Get GitHub PR details and diff&quot;</span><span class=p>,</span>
</span><span id=__span-94-11><a id=__codelineno-94-11 name=__codelineno-94-11 href=#__codelineno-94-11></a>        <span class=n>input_schema</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;number&quot;</span><span class=p>:</span> <span class=s2>&quot;integer&quot;</span><span class=p>}</span>
</span><span id=__span-94-12><a id=__codelineno-94-12 name=__codelineno-94-12 href=#__codelineno-94-12></a>    <span class=p>),</span>
</span><span id=__span-94-13><a id=__codelineno-94-13 name=__codelineno-94-13 href=#__codelineno-94-13></a>    <span class=n>Tool</span><span class=p>(</span>
</span><span id=__span-94-14><a id=__codelineno-94-14 name=__codelineno-94-14 href=#__codelineno-94-14></a>        <span class=n>name</span><span class=o>=</span><span class=s2>&quot;github_create_issue&quot;</span><span class=p>,</span>
</span><span id=__span-94-15><a id=__codelineno-94-15 name=__codelineno-94-15 href=#__codelineno-94-15></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Create a new GitHub issue&quot;</span><span class=p>,</span>
</span><span id=__span-94-16><a id=__codelineno-94-16 name=__codelineno-94-16 href=#__codelineno-94-16></a>        <span class=n>input_schema</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;string&quot;</span><span class=p>,</span> <span class=s2>&quot;body&quot;</span><span class=p>:</span> <span class=s2>&quot;string&quot;</span><span class=p>}</span>
</span><span id=__span-94-17><a id=__codelineno-94-17 name=__codelineno-94-17 href=#__codelineno-94-17></a>    <span class=p>),</span>
</span><span id=__span-94-18><a id=__codelineno-94-18 name=__codelineno-94-18 href=#__codelineno-94-18></a><span class=p>]</span>
</span></code></pre></div> <h4 id=configuration_13>Configuration<a class=headerlink href=#configuration_13 title="Permanent link">&para;</a></h4> <div class="language-json highlight"><pre><span></span><code><span id=__span-95-1><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=p>{</span>
</span><span id=__span-95-2><a id=__codelineno-95-2 name=__codelineno-95-2 href=#__codelineno-95-2></a><span class=w>  </span><span class=nt>&quot;github&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-95-3><a id=__codelineno-95-3 name=__codelineno-95-3 href=#__codelineno-95-3></a><span class=w>    </span><span class=nt>&quot;enabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-95-4><a id=__codelineno-95-4 name=__codelineno-95-4 href=#__codelineno-95-4></a><span class=w>    </span><span class=nt>&quot;token&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;${GITHUB_TOKEN}&quot;</span><span class=p>,</span>
</span><span id=__span-95-5><a id=__codelineno-95-5 name=__codelineno-95-5 href=#__codelineno-95-5></a><span class=w>    </span><span class=nt>&quot;default_repo&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;owner/repo&quot;</span><span class=p>,</span>
</span><span id=__span-95-6><a id=__codelineno-95-6 name=__codelineno-95-6 href=#__codelineno-95-6></a><span class=w>    </span><span class=nt>&quot;auto_detect_repo&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-95-7><a id=__codelineno-95-7 name=__codelineno-95-7 href=#__codelineno-95-7></a><span class=w>    </span><span class=nt>&quot;include_comments&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-95-8><a id=__codelineno-95-8 name=__codelineno-95-8 href=#__codelineno-95-8></a><span class=w>    </span><span class=nt>&quot;max_diff_lines&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span>
</span><span id=__span-95-9><a id=__codelineno-95-9 name=__codelineno-95-9 href=#__codelineno-95-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-95-10><a id=__codelineno-95-10 name=__codelineno-95-10 href=#__codelineno-95-10></a><span class=p>}</span>
</span></code></pre></div> <h4 id=implementation-steps_15>Implementation Steps<a class=headerlink href=#implementation-steps_15 title="Permanent link">&para;</a></h4> <ol> <li>Create GitHub API client (using <code>gh</code> CLI or API)</li> <li>Implement <code>GitHubContextManager</code></li> <li>Build issue context block widget</li> <li>Build PR review block widget</li> <li>Add diff viewer</li> <li>Implement GitHub tools for AI</li> <li>Add authentication flow</li> <li>Testing</li> </ol> <h4 id=effort-estimate_15>Effort Estimate<a class=headerlink href=#effort-estimate_15 title="Permanent link">&para;</a></h4> <ul> <li>API client: 1 day</li> <li>GitHubContextManager: 1 day</li> <li>Issue block: 0.5 days</li> <li>PR block: 1 day</li> <li>Diff viewer: 0.5 days</li> <li>AI tools: 0.5 days</li> <li>Authentication: 0.5 days</li> <li>Testing: 0.5 days</li> <li><strong>Total: 5.5 days</strong></li> </ul> <hr> <h2 id=updated-implementation-priority>Updated Implementation Priority<a class=headerlink href=#updated-implementation-priority title="Permanent link">&para;</a></h2> <p>Based on impact and effort for all 16 features:</p> <table> <thead> <tr> <th>Priority</th> <th>Feature</th> <th>Effort</th> <th>Impact</th> <th>Category</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Streaming Tool Results</td> <td>6d</td> <td> High</td> <td>UX</td> </tr> <tr> <td>2</td> <td>Planning Mode</td> <td>6d</td> <td> High</td> <td>Agent</td> </tr> <tr> <td>3</td> <td>Git-Native Operations</td> <td>5d</td> <td> High</td> <td>Workflow</td> </tr> <tr> <td>4</td> <td>Error Auto-Correction Loop</td> <td>6d</td> <td> High</td> <td>Agent</td> </tr> <tr> <td>5</td> <td>Smart Command Suggestions</td> <td>5d</td> <td>High</td> <td>UX</td> </tr> <tr> <td>6</td> <td>Human-in-the-Loop Review</td> <td>6d</td> <td>High</td> <td>Safety</td> </tr> <tr> <td>7</td> <td>Natural Language to Shell</td> <td>5d</td> <td>High</td> <td>UX</td> </tr> <tr> <td>8</td> <td>Background Agents</td> <td>6d</td> <td>High</td> <td>Agent</td> </tr> <tr> <td>9</td> <td>Conversation Branching UI</td> <td>6d</td> <td>Medium</td> <td>UX</td> </tr> <tr> <td>10</td> <td>Custom Agent Profiles</td> <td>5d</td> <td>Medium</td> <td>Agent</td> </tr> <tr> <td>11</td> <td>Architecture Mapping</td> <td>6d</td> <td>Medium</td> <td>DX</td> </tr> <tr> <td>12</td> <td>Collaborative Git Context</td> <td>5.5d</td> <td>Medium</td> <td>Workflow</td> </tr> <tr> <td>13</td> <td>Workflow Templates</td> <td>8d</td> <td>Medium</td> <td>Automation</td> </tr> <tr> <td>14</td> <td>Multi-Agent Orchestration</td> <td>7d</td> <td>Medium</td> <td>Agent</td> </tr> <tr> <td>15</td> <td>Enhanced RAG</td> <td>10d</td> <td>Medium</td> <td>Performance</td> </tr> <tr> <td>16</td> <td>Session Sharing</td> <td>11d</td> <td>Low*</td> <td>Collaboration</td> </tr> </tbody> </table> <p>*Impact increases significantly with team adoption.</p> <h3 id=recommended-implementation-order>Recommended Implementation Order<a class=headerlink href=#recommended-implementation-order title="Permanent link">&para;</a></h3> <p><strong>Phase 1: Core UX (Weeks 1-2)</strong> 1. Streaming Tool Results - Immediate UX improvement 2. Git-Native Operations - Essential for code workflows</p> <p><strong>Phase 2: Agent Evolution (Weeks 3-4)</strong> 3. Planning Mode - Control before execution 4. Error Auto-Correction Loop - Reduce manual iteration</p> <p><strong>Phase 3: Safety &amp; Productivity (Weeks 5-6)</strong> 5. Human-in-the-Loop Review - Maintain control 6. Smart Command Suggestions - Faster workflows 7. Natural Language to Shell - Accessibility</p> <p><strong>Phase 4: Advanced Features (Weeks 7-8)</strong> 8. Background Agents - Parallel work 9. Custom Agent Profiles - Team customization 10. Collaborative Git Context - GitHub integration</p> <p><strong>Phase 5: Power Features (Weeks 9+)</strong> 11. Conversation Branching UI 12. Architecture Mapping 13. Multi-Agent Orchestration 14. Workflow Templates 15. Enhanced RAG 16. Session Sharing</p> <hr> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <ol> <li>Review specs with stakeholders</li> <li>Create GitHub issues for each feature</li> <li>Begin implementation with Phase 1</li> <li>Gather user feedback on prototypes</li> <li>Iterate based on real usage</li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.action.edit"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>